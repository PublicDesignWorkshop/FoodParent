/*!
 * jQuery JavaScript Library v2.1.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:01Z
 */
function mod(n,t){return(n%t+t)%t}var __extends,FoodParent;(function(n,t){typeof module=="object"&&typeof module.exports=="object"?module.exports=n.document?t(n,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}:t(n)})(typeof window!="undefined"?window:this,function(n,t){function ri(n){var t="length"in n&&n.length,r=i.type(n);return r==="function"||i.isWindow(n)?!1:n.nodeType===1&&t?!0:r==="array"||t===0||typeof t=="number"&&t>0&&t-1 in n}function ui(n,t,r){if(i.isFunction(t))return i.grep(n,function(n,i){return!!t.call(n,i,n)!==r});if(t.nodeType)return i.grep(n,function(n){return n===t!==r});if(typeof t=="string"){if(ef.test(t))return i.filter(t,n,r);t=i.filter(t,n)}return i.grep(n,function(n){return ft.call(t,n)>=0!==r})}function ur(n,t){while((n=n[t])&&n.nodeType!==1);return n}function of(n){var t=fi[n]={};return i.each(n.match(c)||[],function(n,i){t[i]=!0}),t}function ht(){u.removeEventListener("DOMContentLoaded",ht,!1);n.removeEventListener("load",ht,!1);i.ready()}function v(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=i.expando+v.uid++}function fr(n,t,r){var u;if(r===undefined&&n.nodeType===1)if(u="data-"+t.replace(hf,"-$1").toLowerCase(),r=n.getAttribute(u),typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:sf.test(r)?i.parseJSON(r):r}catch(f){}e.set(n,t,r)}else r=undefined;return r}function lt(){return!0}function k(){return!1}function hr(){try{return u.activeElement}catch(n){}}function vr(n,t){return i.nodeName(n,"table")&&i.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?n.getElementsByTagName("tbody")[0]||n.appendChild(n.ownerDocument.createElement("tbody")):n}function bf(n){return n.type=(n.getAttribute("type")!==null)+"/"+n.type,n}function kf(n){var t=pf.exec(n.type);return t?n.type=t[1]:n.removeAttribute("type"),n}function ei(n,t){for(var i=0,u=n.length;i<u;i++)r.set(n[i],"globalEval",!t||r.get(t[i],"globalEval"))}function yr(n,t){var f,c,o,s,h,l,a,u;if(t.nodeType===1){if(r.hasData(n)&&(s=r.access(n),h=r.set(t,s),u=s.events,u)){delete h.handle;h.events={};for(o in u)for(f=0,c=u[o].length;f<c;f++)i.event.add(t,o,u[o][f])}e.hasData(n)&&(l=e.access(n),a=i.extend({},l),e.set(t,a))}}function o(n,t){var r=n.getElementsByTagName?n.getElementsByTagName(t||"*"):n.querySelectorAll?n.querySelectorAll(t||"*"):[];return t===undefined||t&&i.nodeName(n,t)?i.merge([n],r):r}function df(n,t){var i=t.nodeName.toLowerCase();i==="input"&&er.test(n.type)?t.checked=n.checked:(i==="input"||i==="textarea")&&(t.defaultValue=n.defaultValue)}function pr(t,r){var f,u=i(r.createElement(t)).appendTo(r.body),e=n.getDefaultComputedStyle&&(f=n.getDefaultComputedStyle(u[0]))?f.display:i.css(u[0],"display");return u.detach(),e}function si(n){var r=u,t=oi[n];return t||(t=pr(n,r),t!=="none"&&t||(at=(at||i("<iframe frameborder='0' width='0' height='0'/>")).appendTo(r.documentElement),r=at[0].contentDocument,r.write(),r.close(),t=pr(n,r),at.detach()),oi[n]=t),t}function it(n,t,r){var e,o,s,u,f=n.style;return r=r||vt(n),r&&(u=r.getPropertyValue(t)||r[t]),r&&(u!==""||i.contains(n.ownerDocument,n)||(u=i.style(n,t)),hi.test(u)&&wr.test(t)&&(e=f.width,o=f.minWidth,s=f.maxWidth,f.minWidth=f.maxWidth=f.width=u,u=r.width,f.width=e,f.minWidth=o,f.maxWidth=s)),u!==undefined?u+"":u}function br(n,t){return{get:function(){if(n()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}function gr(n,t){if(t in n)return t;for(var r=t[0].toUpperCase()+t.slice(1),u=t,i=dr.length;i--;)if(t=dr[i]+r,t in n)return t;return u}function nu(n,t,i){var r=ne.exec(t);return r?Math.max(0,r[1]-(i||0))+(r[2]||"px"):t}function tu(n,t,r,u,f){for(var e=r===(u?"border":"content")?4:t==="width"?1:0,o=0;e<4;e+=2)r==="margin"&&(o+=i.css(n,r+p[e],!0,f)),u?(r==="content"&&(o-=i.css(n,"padding"+p[e],!0,f)),r!=="margin"&&(o-=i.css(n,"border"+p[e]+"Width",!0,f))):(o+=i.css(n,"padding"+p[e],!0,f),r!=="padding"&&(o+=i.css(n,"border"+p[e]+"Width",!0,f)));return o}function iu(n,t,r){var o=!0,u=t==="width"?n.offsetWidth:n.offsetHeight,e=vt(n),s=i.css(n,"boxSizing",!1,e)==="border-box";if(u<=0||u==null){if(u=it(n,t,e),(u<0||u==null)&&(u=n.style[t]),hi.test(u))return u;o=s&&(f.boxSizingReliable()||u===n.style[t]);u=parseFloat(u)||0}return u+tu(n,t,r||(s?"border":"content"),o,e)+"px"}function ru(n,t){for(var e,u,s,o=[],f=0,h=n.length;f<h;f++)(u=n[f],u.style)&&(o[f]=r.get(u,"olddisplay"),e=u.style.display,t?(o[f]||e!=="none"||(u.style.display=""),u.style.display===""&&tt(u)&&(o[f]=r.access(u,"olddisplay",si(u.nodeName)))):(s=tt(u),e==="none"&&s||r.set(u,"olddisplay",s?e:i.css(u,"display"))));for(f=0;f<h;f++)(u=n[f],u.style)&&(t&&u.style.display!=="none"&&u.style.display!==""||(u.style.display=t?o[f]||"":"none"));return n}function s(n,t,i,r,u){return new s.prototype.init(n,t,i,r,u)}function fu(){return setTimeout(function(){d=undefined}),d=i.now()}function wt(n,t){var r,u=0,i={height:n};for(t=t?1:0;u<4;u+=2-t)r=p[u],i["margin"+r]=i["padding"+r]=n;return t&&(i.opacity=i.width=n),i}function eu(n,t,i){for(var u,f=(rt[t]||[]).concat(rt["*"]),r=0,e=f.length;r<e;r++)if(u=f[r].call(i,t,n))return u}function fe(n,t,u){var f,a,p,v,o,w,h,b,l=this,y={},s=n.style,c=n.nodeType&&tt(n),e=r.get(n,"fxshow");u.queue||(o=i._queueHooks(n,"fx"),o.unqueued==null&&(o.unqueued=0,w=o.empty.fire,o.empty.fire=function(){o.unqueued||w()}),o.unqueued++,l.always(function(){l.always(function(){o.unqueued--;i.queue(n,"fx").length||o.empty.fire()})}));n.nodeType===1&&("height"in t||"width"in t)&&(u.overflow=[s.overflow,s.overflowX,s.overflowY],h=i.css(n,"display"),b=h==="none"?r.get(n,"olddisplay")||si(n.nodeName):h,b==="inline"&&i.css(n,"float")==="none"&&(s.display="inline-block"));u.overflow&&(s.overflow="hidden",l.always(function(){s.overflow=u.overflow[0];s.overflowX=u.overflow[1];s.overflowY=u.overflow[2]}));for(f in t)if(a=t[f],re.exec(a)){if(delete t[f],p=p||a==="toggle",a===(c?"hide":"show"))if(a==="show"&&e&&e[f]!==undefined)c=!0;else continue;y[f]=e&&e[f]||i.style(n,f)}else h=undefined;if(i.isEmptyObject(y))(h==="none"?si(n.nodeName):h)==="inline"&&(s.display=h);else{e?"hidden"in e&&(c=e.hidden):e=r.access(n,"fxshow",{});p&&(e.hidden=!c);c?i(n).show():l.done(function(){i(n).hide()});l.done(function(){var t;r.remove(n,"fxshow");for(t in y)i.style(n,t,y[t])});for(f in y)v=eu(c?e[f]:0,f,l),f in e||(e[f]=v.start,c&&(v.end=v.start,v.start=f==="width"||f==="height"?1:0))}}function ee(n,t){var r,f,e,u,o;for(r in n)if(f=i.camelCase(r),e=t[f],u=n[r],i.isArray(u)&&(e=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),o=i.cssHooks[f],o&&"expand"in o){u=o.expand(u);delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=e)}else t[f]=e}function ou(n,t,r){var e,o,s=0,l=pt.length,f=i.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var s=d||fu(),t=Math.max(0,u.startTime+u.duration-s),h=t/u.duration||0,i=1-h,r=0,e=u.tweens.length;r<e;r++)u.tweens[r].run(i);return f.notifyWith(n,[u,i,t]),i<1&&e?t:(f.resolveWith(n,[u]),!1)},u=f.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:d||fu(),duration:r.duration,tweens:[],createTween:function(t,r){var f=i.Tween(n,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(f),f},stop:function(t){var i=0,r=t?u.tweens.length:0;if(o)return this;for(o=!0;i<r;i++)u.tweens[i].run(1);return t?f.resolveWith(n,[u,t]):f.rejectWith(n,[u,t]),this}}),h=u.props;for(ee(h,u.opts.specialEasing);s<l;s++)if(e=pt[s].call(u,n,h,u.opts),e)return e;return i.map(h,eu,u),i.isFunction(u.opts.start)&&u.opts.start.call(n,u),i.fx.timer(i.extend(c,{elem:n,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function pu(n){return function(t,r){typeof t!="string"&&(r=t,t="*");var u,f=0,e=t.toLowerCase().match(c)||[];if(i.isFunction(r))while(u=e[f++])u[0]==="+"?(u=u.slice(1)||"*",(n[u]=n[u]||[]).unshift(r)):(n[u]=n[u]||[]).push(r)}}function wu(n,t,r,u){function e(s){var h;return f[s]=!0,i.each(n[s]||[],function(n,i){var s=i(t,r,u);if(typeof s!="string"||o||f[s]){if(o)return!(h=s)}else return t.dataTypes.unshift(s),e(s),!1}),h}var f={},o=n===ci;return e(t.dataTypes[0])||!f["*"]&&e("*")}function ai(n,t){var r,u,f=i.ajaxSettings.flatOptions||{};for(r in t)t[r]!==undefined&&((f[r]?n:u||(u={}))[r]=t[r]);return u&&i.extend(!0,n,u),n}function ae(n,t,i){for(var e,u,f,o,s=n.contents,r=n.dataTypes;r[0]==="*";)r.shift(),e===undefined&&(e=n.mimeType||t.getResponseHeader("Content-Type"));if(e)for(u in s)if(s[u]&&s[u].test(e)){r.unshift(u);break}if(r[0]in i)f=r[0];else{for(u in i){if(!r[0]||n.converters[u+" "+r[0]]){f=u;break}o||(o=u)}f=f||o}if(f)return f!==r[0]&&r.unshift(f),i[f]}function ve(n,t,i,r){var h,u,f,s,e,o={},c=n.dataTypes.slice();if(c[1])for(f in n.converters)o[f.toLowerCase()]=n.converters[f];for(u=c.shift();u;)if(n.responseFields[u]&&(i[n.responseFields[u]]=t),!e&&r&&n.dataFilter&&(t=n.dataFilter(t,n.dataType)),e=u,u=c.shift(),u)if(u==="*")u=e;else if(e!=="*"&&e!==u){if(f=o[e+" "+u]||o["* "+u],!f)for(h in o)if(s=h.split(" "),s[1]===u&&(f=o[e+" "+s[0]]||o["* "+s[0]],f)){f===!0?f=o[h]:o[h]!==!0&&(u=s[0],c.unshift(s[1]));break}if(f!==!0)if(f&&n.throws)t=f(t);else try{t=f(t)}catch(l){return{state:"parsererror",error:f?l:"No conversion from "+e+" to "+u}}}return{state:"success",data:t}}function vi(n,t,r,u){var f;if(i.isArray(t))i.each(t,function(t,i){r||pe.test(n)?u(n,i):vi(n+"["+(typeof i=="object"?t:"")+"]",i,r,u)});else if(r||i.type(t)!=="object")u(n,t);else for(f in t)vi(n+"["+f+"]",t[f],r,u)}function ku(n){return i.isWindow(n)?n:n.nodeType===9&&n.defaultView}var w=[],a=w.slice,bi=w.concat,ti=w.push,ft=w.indexOf,et={},nf=et.toString,ii=et.hasOwnProperty,f={},u=n.document,ki="2.1.4",i=function(n,t){return new i.fn.init(n,t)},tf=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rf=/^-ms-/,uf=/-([\da-z])/gi,ff=function(n,t){return t.toUpperCase()},y,ot,nr,tr,ir,rr,c,fi,st,l,b,at,oi,oe,su,g,hu,bt,cu,kt,dt,yi,ni,pi,wi,du,gu;i.fn=i.prototype={jquery:ki,constructor:i,selector:"",length:0,toArray:function(){return a.call(this)},get:function(n){return n!=null?n<0?this[n+this.length]:this[n]:a.call(this)},pushStack:function(n){var t=i.merge(this.constructor(),n);return t.prevObject=this,t.context=this.context,t},each:function(n,t){return i.each(this,n,t)},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var i=this.length,t=+n+(n<0?i:0);return this.pushStack(t>=0&&t<i?[this[t]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:ti,sort:w.sort,splice:w.splice};i.extend=i.fn.extend=function(){var e,f,r,t,o,s,n=arguments[0]||{},u=1,c=arguments.length,h=!1;for(typeof n=="boolean"&&(h=n,n=arguments[u]||{},u++),typeof n=="object"||i.isFunction(n)||(n={}),u===c&&(n=this,u--);u<c;u++)if((e=arguments[u])!=null)for(f in e)(r=n[f],t=e[f],n!==t)&&(h&&t&&(i.isPlainObject(t)||(o=i.isArray(t)))?(o?(o=!1,s=r&&i.isArray(r)?r:[]):s=r&&i.isPlainObject(r)?r:{},n[f]=i.extend(h,s,t)):t!==undefined&&(n[f]=t));return n};i.extend({expando:"jQuery"+(ki+Math.random()).replace(/\D/g,""),isReady:!0,error:function(n){throw new Error(n);},noop:function(){},isFunction:function(n){return i.type(n)==="function"},isArray:Array.isArray,isWindow:function(n){return n!=null&&n===n.window},isNumeric:function(n){return!i.isArray(n)&&n-parseFloat(n)+1>=0},isPlainObject:function(n){return i.type(n)!=="object"||n.nodeType||i.isWindow(n)?!1:n.constructor&&!ii.call(n.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(n){for(var t in n)return!1;return!0},type:function(n){return n==null?n+"":typeof n=="object"||typeof n=="function"?et[nf.call(n)]||"object":typeof n},globalEval:function(n){var t,r=eval;n=i.trim(n);n&&(n.indexOf("use strict")===1?(t=u.createElement("script"),t.text=n,u.head.appendChild(t).parentNode.removeChild(t)):r(n))},camelCase:function(n){return n.replace(rf,"ms-").replace(uf,ff)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},each:function(n,t,i){var u,r=0,f=n.length,e=ri(n);if(i){if(e){for(;r<f;r++)if(u=t.apply(n[r],i),u===!1)break}else for(r in n)if(u=t.apply(n[r],i),u===!1)break}else if(e){for(;r<f;r++)if(u=t.call(n[r],r,n[r]),u===!1)break}else for(r in n)if(u=t.call(n[r],r,n[r]),u===!1)break;return n},trim:function(n){return n==null?"":(n+"").replace(tf,"")},makeArray:function(n,t){var r=t||[];return n!=null&&(ri(Object(n))?i.merge(r,typeof n=="string"?[n]:n):ti.call(r,n)),r},inArray:function(n,t,i){return t==null?-1:ft.call(t,n,i)},merge:function(n,t){for(var u=+t.length,i=0,r=n.length;i<u;i++)n[r++]=t[i];return n.length=r,n},grep:function(n,t,i){for(var u,f=[],r=0,e=n.length,o=!i;r<e;r++)u=!t(n[r],r),u!==o&&f.push(n[r]);return f},map:function(n,t,i){var u,r=0,e=n.length,o=ri(n),f=[];if(o)for(;r<e;r++)u=t(n[r],r,i),u!=null&&f.push(u);else for(r in n)u=t(n[r],r,i),u!=null&&f.push(u);return bi.apply([],f)},guid:1,proxy:function(n,t){var u,f,r;return(typeof t=="string"&&(u=n[t],t=n,n=u),!i.isFunction(n))?undefined:(f=a.call(arguments,2),r=function(){return n.apply(t||this,f.concat(a.call(arguments)))},r.guid=n.guid=n.guid||i.guid++,r)},now:Date.now,support:f});i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(n,t){et["[object "+t+"]"]=t.toLowerCase()});y=function(n){function r(n,t,i,r){var p,s,a,c,w,y,d,v,nt,g;if((t?t.ownerDocument||t:h)!==o&&k(t),t=t||o,i=i||[],c=t.nodeType,typeof n!="string"||!n||c!==1&&c!==9&&c!==11)return i;if(!r&&l){if(c!==11&&(p=hr.exec(n)))if(a=p[1]){if(c===9)if(s=t.getElementById(a),s&&s.parentNode){if(s.id===a)return i.push(s),i}else return i;else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(a))&&et(t,s)&&s.id===a)return i.push(s),i}else{if(p[2])return b.apply(i,t.getElementsByTagName(n)),i;if((a=p[3])&&u.getElementsByClassName)return b.apply(i,t.getElementsByClassName(a)),i}if(u.qsa&&(!e||!e.test(n))){if(v=d=f,nt=t,g=c!==1&&n,c===1&&t.nodeName.toLowerCase()!=="object"){for(y=ft(n),(d=t.getAttribute("id"))?v=d.replace(cr,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",w=y.length;w--;)y[w]=v+vt(y[w]);nt=dt.test(n)&&ti(t.parentNode)||t;g=y.join(",")}if(g)try{return b.apply(i,nt.querySelectorAll(g)),i}catch(tt){}finally{d||t.removeAttribute("id")}}}return oi(n.replace(lt,"$1"),t,i,r)}function gt(){function n(r,u){return i.push(r+" ")>t.cacheLength&&delete n[i.shift()],n[r+" "]=u}var i=[];return n}function c(n){return n[f]=!0,n}function v(n){var t=o.createElement("div");try{return!!n(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function ni(n,i){for(var u=n.split("|"),r=n.length;r--;)t.attrHandle[u[r]]=i}function wi(n,t){var i=t&&n,r=i&&n.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||li)-(~n.sourceIndex||li);if(r)return r;if(i)while(i=i.nextSibling)if(i===t)return-1;return n?1:-1}function lr(n){return function(t){var i=t.nodeName.toLowerCase();return i==="input"&&t.type===n}}function ar(n){return function(t){var i=t.nodeName.toLowerCase();return(i==="input"||i==="button")&&t.type===n}}function tt(n){return c(function(t){return t=+t,c(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function ti(n){return n&&typeof n.getElementsByTagName!="undefined"&&n}function bi(){}function vt(n){for(var t=0,r=n.length,i="";t<r;t++)i+=n[t].value;return i}function ii(n,t,i){var r=t.dir,u=i&&r==="parentNode",e=ki++;return t.first?function(t,i,f){while(t=t[r])if(t.nodeType===1||u)return n(t,i,f)}:function(t,i,o){var s,h,c=[a,e];if(o){while(t=t[r])if((t.nodeType===1||u)&&n(t,i,o))return!0}else while(t=t[r])if(t.nodeType===1||u){if(h=t[f]||(t[f]={}),(s=h[r])&&s[0]===a&&s[1]===e)return c[2]=s[2];if(h[r]=c,c[2]=n(t,i,o))return!0}}}function ri(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function vr(n,t,i){for(var u=0,f=t.length;u<f;u++)r(n,t[u],i);return i}function yt(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=t!=null;f<s;f++)(e=n[f])&&(!i||i(e,r,u))&&(o.push(e),h&&t.push(f));return o}function ui(n,t,i,r,u,e){return r&&!r[f]&&(r=ui(r)),u&&!u[f]&&(u=ui(u,e)),c(function(f,e,o,s){var l,c,a,p=[],y=[],w=e.length,k=f||vr(t||"*",o.nodeType?[o]:o,[]),v=n&&(f||!t)?yt(k,p,n,o,s):k,h=i?u||(f?n:w||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=yt(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?nt(f,a):p[c])>-1&&(f[l]=!(e[l]=a))}}else h=yt(h===e?h.splice(w,h.length):h),u?u(null,e,h,s):b.apply(e,h)})}function fi(n){for(var o,u,r,s=n.length,h=t.relative[n[0].type],c=h||t.relative[" "],i=h?1:0,l=ii(function(n){return n===o},c,!0),a=ii(function(n){return nt(o,n)>-1},c,!0),e=[function(n,t,i){var r=!h&&(i||t!==ht)||((o=t).nodeType?l(n,t,i):a(n,t,i));return o=null,r}];i<s;i++)if(u=t.relative[n[i].type])e=[ii(ri(e),u)];else{if(u=t.filter[n[i].type].apply(null,n[i].matches),u[f]){for(r=++i;r<s;r++)if(t.relative[n[r].type])break;return ui(i>1&&ri(e),i>1&&vt(n.slice(0,i-1).concat({value:n[i-2].type===" "?"*":""})).replace(lt,"$1"),u,i<r&&fi(n.slice(i,r)),r<s&&fi(n=n.slice(r)),r<s&&vt(n))}e.push(u)}return ri(e)}function yr(n,i){var u=i.length>0,f=n.length>0,e=function(e,s,h,c,l){var y,d,w,k=0,v="0",g=e&&[],p=[],nt=ht,tt=e||f&&t.find.TAG("*",l),it=a+=nt==null?1:Math.random()||.1,rt=tt.length;for(l&&(ht=s!==o&&s);v!==rt&&(y=tt[v])!=null;v++){if(f&&y){for(d=0;w=n[d++];)if(w(y,s,h)){c.push(y);break}l&&(a=it)}u&&((y=!w&&y)&&k--,e&&g.push(y))}if(k+=v,u&&v!==k){for(d=0;w=i[d++];)w(g,p,s,h);if(e){if(k>0)while(v--)g[v]||p[v]||(p[v]=gi.call(c));p=yt(p)}b.apply(c,p);l&&!e&&p.length>0&&k+i.length>1&&r.uniqueSort(c)}return l&&(a=it,ht=nt),g};return u?c(e):e}var it,u,t,st,ei,ft,pt,oi,ht,w,rt,k,o,s,l,e,d,ct,et,f="sizzle"+1*new Date,h=n.document,a=0,ki=0,si=gt(),hi=gt(),ci=gt(),wt=function(n,t){return n===t&&(rt=!0),0},li=-2147483648,di={}.hasOwnProperty,g=[],gi=g.pop,nr=g.push,b=g.push,ai=g.slice,nt=function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},bt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",i="[\\x20\\t\\r\\n\\f]",ut="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",vi=ut.replace("w","w#"),yi="\\["+i+"*("+ut+")(?:"+i+"*([*^$|!~]?=)"+i+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+vi+"))|)"+i+"*\\]",kt=":("+ut+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+yi+")*)|.*)\\)|)",tr=new RegExp(i+"+","g"),lt=new RegExp("^"+i+"+|((?:^|[^\\\\])(?:\\\\.)*)"+i+"+$","g"),ir=new RegExp("^"+i+"*,"+i+"*"),rr=new RegExp("^"+i+"*([>+~]|"+i+")"+i+"*"),ur=new RegExp("="+i+"*([^\\]'\"]*?)"+i+"*\\]","g"),fr=new RegExp(kt),er=new RegExp("^"+vi+"$"),at={ID:new RegExp("^#("+ut+")"),CLASS:new RegExp("^\\.("+ut+")"),TAG:new RegExp("^("+ut.replace("w","w*")+")"),ATTR:new RegExp("^"+yi),PSEUDO:new RegExp("^"+kt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+i+"*(even|odd|(([+-]|)(\\d*)n|)"+i+"*(?:([+-]|)"+i+"*(\\d+)|))"+i+"*\\)|)","i"),bool:new RegExp("^(?:"+bt+")$","i"),needsContext:new RegExp("^"+i+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+i+"*((?:-\\d)?\\d*)"+i+"*\\)|)(?=[^-]|$)","i")},or=/^(?:input|select|textarea|button)$/i,sr=/^h\d$/i,ot=/^[^{]+\{\s*\[native \w/,hr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,dt=/[+~]/,cr=/'|\\/g,y=new RegExp("\\\\([\\da-f]{1,6}"+i+"?|("+i+")|.)","ig"),p=function(n,t,i){var r="0x"+t-65536;return r!==r||i?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)},pi=function(){k()};try{b.apply(g=ai.call(h.childNodes),h.childNodes);g[h.childNodes.length].nodeType}catch(pr){b={apply:g.length?function(n,t){nr.apply(n,ai.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}u=r.support={};ei=r.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?t.nodeName!=="HTML":!1};k=r.setDocument=function(n){var a,c,r=n?n.ownerDocument||n:h;return r===o||r.nodeType!==9||!r.documentElement?o:(o=r,s=r.documentElement,c=r.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",pi,!1):c.attachEvent&&c.attachEvent("onunload",pi)),l=!ei(r),u.attributes=v(function(n){return n.className="i",!n.getAttribute("className")}),u.getElementsByTagName=v(function(n){return n.appendChild(r.createComment("")),!n.getElementsByTagName("*").length}),u.getElementsByClassName=ot.test(r.getElementsByClassName),u.getById=v(function(n){return s.appendChild(n).id=f,!r.getElementsByName||!r.getElementsByName(f).length}),u.getById?(t.find.ID=function(n,t){if(typeof t.getElementById!="undefined"&&l){var i=t.getElementById(n);return i&&i.parentNode?[i]:[]}},t.filter.ID=function(n){var t=n.replace(y,p);return function(n){return n.getAttribute("id")===t}}):(delete t.find.ID,t.filter.ID=function(n){var t=n.replace(y,p);return function(n){var i=typeof n.getAttributeNode!="undefined"&&n.getAttributeNode("id");return i&&i.value===t}}),t.find.TAG=u.getElementsByTagName?function(n,t){return typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName(n):u.qsa?t.querySelectorAll(n):void 0}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if(n==="*"){while(i=u[f++])i.nodeType===1&&r.push(i);return r}return u},t.find.CLASS=u.getElementsByClassName&&function(n,t){if(l)return t.getElementsByClassName(n)},d=[],e=[],(u.qsa=ot.test(r.querySelectorAll))&&(v(function(n){s.appendChild(n).innerHTML="<a id='"+f+"'><\/a><select id='"+f+"-\f]' msallowcapture=''><option selected=''><\/option><\/select>";n.querySelectorAll("[msallowcapture^='']").length&&e.push("[*^$]="+i+"*(?:''|\"\")");n.querySelectorAll("[selected]").length||e.push("\\["+i+"*(?:value|"+bt+")");n.querySelectorAll("[id~="+f+"-]").length||e.push("~=");n.querySelectorAll(":checked").length||e.push(":checked");n.querySelectorAll("a#"+f+"+*").length||e.push(".#.+[+~]")}),v(function(n){var t=r.createElement("input");t.setAttribute("type","hidden");n.appendChild(t).setAttribute("name","D");n.querySelectorAll("[name=d]").length&&e.push("name"+i+"*[*^$|!~]?=");n.querySelectorAll(":enabled").length||e.push(":enabled",":disabled");n.querySelectorAll("*,:x");e.push(",.*:")})),(u.matchesSelector=ot.test(ct=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&v(function(n){u.disconnectedMatch=ct.call(n,"div");ct.call(n,"[s!='']:x");d.push("!=",kt)}),e=e.length&&new RegExp(e.join("|")),d=d.length&&new RegExp(d.join("|")),a=ot.test(s.compareDocumentPosition),et=a||ot.test(s.contains)?function(n,t){var r=n.nodeType===9?n.documentElement:n,i=t&&t.parentNode;return n===i||!!(i&&i.nodeType===1&&(r.contains?r.contains(i):n.compareDocumentPosition&&n.compareDocumentPosition(i)&16))}:function(n,t){if(t)while(t=t.parentNode)if(t===n)return!0;return!1},wt=a?function(n,t){if(n===t)return rt=!0,0;var i=!n.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(n.ownerDocument||n)===(t.ownerDocument||t)?n.compareDocumentPosition(t):1,i&1||!u.sortDetached&&t.compareDocumentPosition(n)===i)?n===r||n.ownerDocument===h&&et(h,n)?-1:t===r||t.ownerDocument===h&&et(h,t)?1:w?nt(w,n)-nt(w,t):0:i&4?-1:1}:function(n,t){if(n===t)return rt=!0,0;var i,u=0,o=n.parentNode,s=t.parentNode,f=[n],e=[t];if(o&&s){if(o===s)return wi(n,t)}else return n===r?-1:t===r?1:o?-1:s?1:w?nt(w,n)-nt(w,t):0;for(i=n;i=i.parentNode;)f.unshift(i);for(i=t;i=i.parentNode;)e.unshift(i);while(f[u]===e[u])u++;return u?wi(f[u],e[u]):f[u]===h?-1:e[u]===h?1:0},r)};r.matches=function(n,t){return r(n,null,null,t)};r.matchesSelector=function(n,t){if((n.ownerDocument||n)!==o&&k(n),t=t.replace(ur,"='$1']"),u.matchesSelector&&l&&(!d||!d.test(t))&&(!e||!e.test(t)))try{var i=ct.call(n,t);if(i||u.disconnectedMatch||n.document&&n.document.nodeType!==11)return i}catch(f){}return r(t,o,null,[n]).length>0};r.contains=function(n,t){return(n.ownerDocument||n)!==o&&k(n),et(n,t)};r.attr=function(n,i){(n.ownerDocument||n)!==o&&k(n);var f=t.attrHandle[i.toLowerCase()],r=f&&di.call(t.attrHandle,i.toLowerCase())?f(n,i,!l):undefined;return r!==undefined?r:u.attributes||!l?n.getAttribute(i):(r=n.getAttributeNode(i))&&r.specified?r.value:null};r.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);};r.uniqueSort=function(n){var r,f=[],t=0,i=0;if(rt=!u.detectDuplicates,w=!u.sortStable&&n.slice(0),n.sort(wt),rt){while(r=n[i++])r===n[i]&&(t=f.push(i));while(t--)n.splice(f[t],1)}return w=null,n};st=r.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(t===1||t===9||t===11){if(typeof n.textContent=="string")return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=st(n)}else if(t===3||t===4)return n.nodeValue}else while(r=n[u++])i+=st(r);return i};t=r.selectors={cacheLength:50,createPseudo:c,match:at,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(y,p),n[3]=(n[3]||n[4]||n[5]||"").replace(y,p),n[2]==="~="&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),n[1].slice(0,3)==="nth"?(n[3]||r.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*(n[3]==="even"||n[3]==="odd")),n[5]=+(n[7]+n[8]||n[3]==="odd")):n[3]&&r.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return at.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&fr.test(t)&&(i=ft(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(y,p).toLowerCase();return n==="*"?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=si[n+" "];return t||(t=new RegExp("(^|"+i+")"+n+"("+i+"|$)"))&&si(n,function(n){return t.test(typeof n.className=="string"&&n.className||typeof n.getAttribute!="undefined"&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(u){var f=r.attr(u,n);return f==null?t==="!=":t?(f+="",t==="="?f===i:t==="!="?f!==i:t==="^="?i&&f.indexOf(i)===0:t==="*="?i&&f.indexOf(i)>-1:t==="$="?i&&f.slice(-i.length)===i:t==="~="?(" "+f.replace(tr," ")+" ").indexOf(i)>-1:t==="|="?f===i||f.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r,u){var s=n.slice(0,3)!=="nth",o=n.slice(-4)!=="last",e=t==="of-type";return r===1&&u===0?function(n){return!!n.parentNode}:function(t,i,h){var v,k,c,l,y,w,b=s!==o?"nextSibling":"previousSibling",p=t.parentNode,g=e&&t.nodeName.toLowerCase(),d=!h&&!e;if(p){if(s){while(b){for(c=t;c=c[b];)if(e?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;w=b=n==="only"&&!w&&"nextSibling"}return!0}if(w=[o?p.firstChild:p.lastChild],o&&d){for(k=p[f]||(p[f]={}),v=k[n]||[],y=v[0]===a&&v[1],l=v[0]===a&&v[2],c=y&&p.childNodes[y];c=++y&&c&&c[b]||(l=y=0)||w.pop();)if(c.nodeType===1&&++l&&c===t){k[n]=[a,y,l];break}}else if(d&&(v=(t[f]||(t[f]={}))[n])&&v[0]===a)l=v[1];else while(c=++y&&c&&c[b]||(l=y=0)||w.pop())if((e?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++l&&(d&&((c[f]||(c[f]={}))[n]=[a,l]),c===t))break;return l-=u,l===r||l%r==0&&l/r>=0}}},PSEUDO:function(n,i){var e,u=t.pseudos[n]||t.setFilters[n.toLowerCase()]||r.error("unsupported pseudo: "+n);return u[f]?u(i):u.length>1?(e=[n,n,"",i],t.setFilters.hasOwnProperty(n.toLowerCase())?c(function(n,t){for(var r,f=u(n,i),e=f.length;e--;)r=nt(n,f[e]),n[r]=!(t[r]=f[e])}):function(n){return u(n,0,e)}):u}},pseudos:{not:c(function(n){var t=[],r=[],i=pt(n.replace(lt,"$1"));return i[f]?c(function(n,t,r,u){for(var e,o=i(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(t[f]=e))}):function(n,u,f){return t[0]=n,i(t,null,f,r),t[0]=null,!r.pop()}}),has:c(function(n){return function(t){return r(n,t).length>0}}),contains:c(function(n){return n=n.replace(y,p),function(t){return(t.textContent||t.innerText||st(t)).indexOf(n)>-1}}),lang:c(function(n){return er.test(n||"")||r.error("unsupported lang: "+n),n=n.replace(y,p).toLowerCase(),function(t){var i;do if(i=l?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===n||i.indexOf(n+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var i=n.location&&n.location.hash;return i&&i.slice(1)===t.id},root:function(n){return n===s},focus:function(n){return n===o.activeElement&&(!o.hasFocus||o.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&!!n.checked||t==="option"&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!t.pseudos.empty(n)},header:function(n){return sr.test(n.nodeName)},input:function(n){return or.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&n.type==="button"||t==="button"},text:function(n){var t;return n.nodeName.toLowerCase()==="input"&&n.type==="text"&&((t=n.getAttribute("type"))==null||t.toLowerCase()==="text")},first:tt(function(){return[0]}),last:tt(function(n,t){return[t-1]}),eq:tt(function(n,t,i){return[i<0?i+t:i]}),even:tt(function(n,t){for(var i=0;i<t;i+=2)n.push(i);return n}),odd:tt(function(n,t){for(var i=1;i<t;i+=2)n.push(i);return n}),lt:tt(function(n,t,i){for(var r=i<0?i+t:i;--r>=0;)n.push(r);return n}),gt:tt(function(n,t,i){for(var r=i<0?i+t:i;++r<t;)n.push(r);return n})}};t.pseudos.nth=t.pseudos.eq;for(it in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[it]=lr(it);for(it in{submit:!0,reset:!0})t.pseudos[it]=ar(it);return bi.prototype=t.filters=t.pseudos,t.setFilters=new bi,ft=r.tokenize=function(n,i){var e,f,s,o,u,h,c,l=hi[n+" "];if(l)return i?0:l.slice(0);for(u=n,h=[],c=t.preFilter;u;){(!e||(f=ir.exec(u)))&&(f&&(u=u.slice(f[0].length)||u),h.push(s=[]));e=!1;(f=rr.exec(u))&&(e=f.shift(),s.push({value:e,type:f[0].replace(lt," ")}),u=u.slice(e.length));for(o in t.filter)(f=at[o].exec(u))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),u=u.slice(e.length));if(!e)break}return i?u.length:u?r.error(n):hi(n,h).slice(0)},pt=r.compile=function(n,t){var r,u=[],e=[],i=ci[n+" "];if(!i){for(t||(t=ft(n)),r=t.length;r--;)i=fi(t[r]),i[f]?u.push(i):e.push(i);i=ci(n,yr(e,u));i.selector=n}return i},oi=r.select=function(n,i,r,f){var s,e,o,a,v,c=typeof n=="function"&&n,h=!f&&ft(n=c.selector||n);if(r=r||[],h.length===1){if(e=h[0]=h[0].slice(0),e.length>2&&(o=e[0]).type==="ID"&&u.getById&&i.nodeType===9&&l&&t.relative[e[1].type]){if(i=(t.find.ID(o.matches[0].replace(y,p),i)||[])[0],i)c&&(i=i.parentNode);else return r;n=n.slice(e.shift().value.length)}for(s=at.needsContext.test(n)?0:e.length;s--;){if(o=e[s],t.relative[a=o.type])break;if((v=t.find[a])&&(f=v(o.matches[0].replace(y,p),dt.test(e[0].type)&&ti(i.parentNode)||i))){if(e.splice(s,1),n=f.length&&vt(e),!n)return b.apply(r,f),r;break}}}return(c||pt(n,h))(f,i,!l,r,dt.test(n)&&ti(i.parentNode)||i),r},u.sortStable=f.split("").sort(wt).join("")===f,u.detectDuplicates=!!rt,k(),u.sortDetached=v(function(n){return n.compareDocumentPosition(o.createElement("div"))&1}),v(function(n){return n.innerHTML="<a href='#'><\/a>",n.firstChild.getAttribute("href")==="#"})||ni("type|href|height|width",function(n,t,i){if(!i)return n.getAttribute(t,t.toLowerCase()==="type"?1:2)}),u.attributes&&v(function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),n.firstChild.getAttribute("value")===""})||ni("value",function(n,t,i){if(!i&&n.nodeName.toLowerCase()==="input")return n.defaultValue}),v(function(n){return n.getAttribute("disabled")==null})||ni(bt,function(n,t,i){var r;if(!i)return n[t]===!0?t.toLowerCase():(r=n.getAttributeNode(t))&&r.specified?r.value:null}),r}(n);i.find=y;i.expr=y.selectors;i.expr[":"]=i.expr.pseudos;i.unique=y.uniqueSort;i.text=y.getText;i.isXMLDoc=y.isXML;i.contains=y.contains;var di=i.expr.match.needsContext,gi=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ef=/^.[^:#\[\.,]*$/;i.filter=function(n,t,r){var u=t[0];return r&&(n=":not("+n+")"),t.length===1&&u.nodeType===1?i.find.matchesSelector(u,n)?[u]:[]:i.find.matches(n,i.grep(t,function(n){return n.nodeType===1}))};i.fn.extend({find:function(n){var t,u=this.length,r=[],f=this;if(typeof n!="string")return this.pushStack(i(n).filter(function(){for(t=0;t<u;t++)if(i.contains(f[t],this))return!0}));for(t=0;t<u;t++)i.find(n,f[t],r);return r=this.pushStack(u>1?i.unique(r):r),r.selector=this.selector?this.selector+" "+n:n,r},filter:function(n){return this.pushStack(ui(this,n||[],!1))},not:function(n){return this.pushStack(ui(this,n||[],!0))},is:function(n){return!!ui(this,typeof n=="string"&&di.test(n)?i(n):n||[],!1).length}});nr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;tr=i.fn.init=function(n,t){var r,f;if(!n)return this;if(typeof n=="string"){if(r=n[0]==="<"&&n[n.length-1]===">"&&n.length>=3?[null,n,null]:nr.exec(n),r&&(r[1]||!t)){if(r[1]){if(t=t instanceof i?t[0]:t,i.merge(this,i.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:u,!0)),gi.test(r[1])&&i.isPlainObject(t))for(r in t)i.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return f=u.getElementById(r[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=u,this.selector=n,this}return!t||t.jquery?(t||ot).find(n):this.constructor(t).find(n)}return n.nodeType?(this.context=this[0]=n,this.length=1,this):i.isFunction(n)?typeof ot.ready!="undefined"?ot.ready(n):n(i):(n.selector!==undefined&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))};tr.prototype=i.fn;ot=i(u);ir=/^(?:parents|prev(?:Until|All))/;rr={children:!0,contents:!0,next:!0,prev:!0};i.extend({dir:function(n,t,r){for(var u=[],f=r!==undefined;(n=n[t])&&n.nodeType!==9;)if(n.nodeType===1){if(f&&i(n).is(r))break;u.push(n)}return u},sibling:function(n,t){for(var i=[];n;n=n.nextSibling)n.nodeType===1&&n!==t&&i.push(n);return i}});i.fn.extend({has:function(n){var t=i(n,this),r=t.length;return this.filter(function(){for(var n=0;n<r;n++)if(i.contains(this,t[n]))return!0})},closest:function(n,t){for(var r,f=0,o=this.length,u=[],e=di.test(n)||typeof n!="string"?i(n,t||this.context):0;f<o;f++)for(r=this[f];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(e?e.index(r)>-1:r.nodeType===1&&i.find.matchesSelector(r,n))){u.push(r);break}return this.pushStack(u.length>1?i.unique(u):u)},index:function(n){return n?typeof n=="string"?ft.call(i(n),this[0]):ft.call(this,n.jquery?n[0]:n):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(i.unique(i.merge(this.get(),i(n,t))))},addBack:function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))}});i.each({parent:function(n){var t=n.parentNode;return t&&t.nodeType!==11?t:null},parents:function(n){return i.dir(n,"parentNode")},parentsUntil:function(n,t,r){return i.dir(n,"parentNode",r)},next:function(n){return ur(n,"nextSibling")},prev:function(n){return ur(n,"previousSibling")},nextAll:function(n){return i.dir(n,"nextSibling")},prevAll:function(n){return i.dir(n,"previousSibling")},nextUntil:function(n,t,r){return i.dir(n,"nextSibling",r)},prevUntil:function(n,t,r){return i.dir(n,"previousSibling",r)},siblings:function(n){return i.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return i.sibling(n.firstChild)},contents:function(n){return n.contentDocument||i.merge([],n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return n.slice(-5)!=="Until"&&(u=r),u&&typeof u=="string"&&(f=i.filter(u,f)),this.length>1&&(rr[n]||i.unique(f),ir.test(n)&&f.reverse()),this.pushStack(f)}});c=/\S+/g;fi={};i.Callbacks=function(n){n=typeof n=="string"?fi[n]||of(n):i.extend({},n);var u,h,o,c,f,e,t=[],r=!n.once&&[],l=function(i){for(u=n.memory&&i,h=!0,e=c||0,c=0,f=t.length,o=!0;t&&e<f;e++)if(t[e].apply(i[0],i[1])===!1&&n.stopOnFalse){u=!1;break}o=!1;t&&(r?r.length&&l(r.shift()):u?t=[]:s.disable())},s={add:function(){if(t){var r=t.length;(function e(r){i.each(r,function(r,u){var f=i.type(u);f==="function"?n.unique&&s.has(u)||t.push(u):u&&u.length&&f!=="string"&&e(u)})})(arguments);o?f=t.length:u&&(c=r,l(u))}return this},remove:function(){return t&&i.each(arguments,function(n,r){for(var u;(u=i.inArray(r,t,u))>-1;)t.splice(u,1),o&&(u<=f&&f--,u<=e&&e--)}),this},has:function(n){return n?i.inArray(n,t)>-1:!!(t&&t.length)},empty:function(){return t=[],f=0,this},disable:function(){return t=r=u=undefined,this},disabled:function(){return!t},lock:function(){return r=undefined,u||s.disable(),this},locked:function(){return!r},fireWith:function(n,i){return t&&(!h||r)&&(i=i||[],i=[n,i.slice?i.slice():i],o?r.push(i):l(i)),this},fire:function(){return s.fireWith(this,arguments),this},fired:function(){return!!h}};return s};i.extend({Deferred:function(n){var u=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],f="pending",r={state:function(){return f},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var n=arguments;return i.Deferred(function(f){i.each(u,function(u,e){var o=i.isFunction(n[u])&&n[u];t[e[1]](function(){var n=o&&o.apply(this,arguments);n&&i.isFunction(n.promise)?n.promise().done(f.resolve).fail(f.reject).progress(f.notify):f[e[0]+"With"](this===r?f.promise():this,o?[n]:arguments)})});n=null}).promise()},promise:function(n){return n!=null?i.extend(n,r):r}},t={};return r.pipe=r.then,i.each(u,function(n,i){var e=i[2],o=i[3];r[i[1]]=e.add;o&&e.add(function(){f=o},u[n^1][2].disable,u[2][2].lock);t[i[0]]=function(){return t[i[0]+"With"](this===t?r:this,arguments),this};t[i[0]+"With"]=e.fireWith}),r.promise(t),n&&n.call(t,t),t},when:function(n){var t=0,u=a.call(arguments),r=u.length,e=r!==1||n&&i.isFunction(n.promise)?r:0,f=e===1?n:i.Deferred(),h=function(n,t,i){return function(r){t[n]=this;i[n]=arguments.length>1?a.call(arguments):r;i===o?f.notifyWith(t,i):--e||f.resolveWith(t,i)}},o,c,s;if(r>1)for(o=new Array(r),c=new Array(r),s=new Array(r);t<r;t++)u[t]&&i.isFunction(u[t].promise)?u[t].promise().done(h(t,s,u)).fail(f.reject).progress(h(t,c,o)):--e;return e||f.resolveWith(s,u),f.promise()}});i.fn.ready=function(n){return i.ready.promise().done(n),this};i.extend({isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){(n===!0?--i.readyWait:i.isReady)||(i.isReady=!0,n!==!0&&--i.readyWait>0)||(st.resolveWith(u,[i]),i.fn.triggerHandler&&(i(u).triggerHandler("ready"),i(u).off("ready")))}});i.ready.promise=function(t){return st||(st=i.Deferred(),u.readyState==="complete"?setTimeout(i.ready):(u.addEventListener("DOMContentLoaded",ht,!1),n.addEventListener("load",ht,!1))),st.promise(t)};i.ready.promise();l=i.access=function(n,t,r,u,f,e,o){var s=0,c=n.length,h=r==null;if(i.type(r)==="object"){f=!0;for(s in r)i.access(n,t,s,r[s],!0,e,o)}else if(u!==undefined&&(f=!0,i.isFunction(u)||(o=!0),h&&(o?(t.call(n,u),t=null):(h=t,t=function(n,t,r){return h.call(i(n),r)})),t))for(;s<c;s++)t(n[s],r,o?u:u.call(n[s],s,t(n[s],r)));return f?n:h?t.call(n):c?t(n[0],r):e};i.acceptData=function(n){return n.nodeType===1||n.nodeType===9||!+n.nodeType};v.uid=1;v.accepts=i.acceptData;v.prototype={key:function(n){if(!v.accepts(n))return 0;var r={},t=n[this.expando];if(!t){t=v.uid++;try{r[this.expando]={value:t};Object.defineProperties(n,r)}catch(u){r[this.expando]=t;i.extend(n,r)}}return this.cache[t]||(this.cache[t]={}),t},set:function(n,t,r){var f,e=this.key(n),u=this.cache[e];if(typeof t=="string")u[t]=r;else if(i.isEmptyObject(u))i.extend(this.cache[e],t);else for(f in t)u[f]=t[f];return u},get:function(n,t){var i=this.cache[this.key(n)];return t===undefined?i:i[t]},access:function(n,t,r){var u;return t===undefined||t&&typeof t=="string"&&r===undefined?(u=this.get(n,t),u!==undefined?u:this.get(n,i.camelCase(t))):(this.set(n,t,r),r!==undefined?r:t)},remove:function(n,t){var u,r,f,o=this.key(n),e=this.cache[o];if(t===undefined)this.cache[o]={};else for(i.isArray(t)?r=t.concat(t.map(i.camelCase)):(f=i.camelCase(t),t in e?r=[t,f]:(r=f,r=r in e?[r]:r.match(c)||[])),u=r.length;u--;)delete e[r[u]]},hasData:function(n){return!i.isEmptyObject(this.cache[n[this.expando]]||{})},discard:function(n){n[this.expando]&&delete this.cache[n[this.expando]]}};var r=new v,e=new v,sf=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,hf=/([A-Z])/g;i.extend({hasData:function(n){return e.hasData(n)||r.hasData(n)},data:function(n,t,i){return e.access(n,t,i)},removeData:function(n,t){e.remove(n,t)},_data:function(n,t,i){return r.access(n,t,i)},_removeData:function(n,t){r.remove(n,t)}});i.fn.extend({data:function(n,t){var o,f,s,u=this[0],h=u&&u.attributes;if(n===undefined){if(this.length&&(s=e.get(u),u.nodeType===1&&!r.get(u,"hasDataAttrs"))){for(o=h.length;o--;)h[o]&&(f=h[o].name,f.indexOf("data-")===0&&(f=i.camelCase(f.slice(5)),fr(u,f,s[f])));r.set(u,"hasDataAttrs",!0)}return s}return typeof n=="object"?this.each(function(){e.set(this,n)}):l(this,function(t){var r,f=i.camelCase(n);if(u&&t===undefined)return(r=e.get(u,n),r!==undefined)?r:(r=e.get(u,f),r!==undefined)?r:(r=fr(u,f,undefined),r!==undefined)?r:void 0;this.each(function(){var i=e.get(this,f);e.set(this,f,t);n.indexOf("-")!==-1&&i!==undefined&&e.set(this,n,t)})},null,t,arguments.length>1,null,!0)},removeData:function(n){return this.each(function(){e.remove(this,n)})}});i.extend({queue:function(n,t,u){var f;if(n)return t=(t||"fx")+"queue",f=r.get(n,t),u&&(!f||i.isArray(u)?f=r.access(n,t,i.makeArray(u)):f.push(u)),f||[]},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),e=r.length,u=r.shift(),f=i._queueHooks(n,t),o=function(){i.dequeue(n,t)};u==="inprogress"&&(u=r.shift(),e--);u&&(t==="fx"&&r.unshift("inprogress"),delete f.stop,u.call(n,o,f));!e&&f&&f.empty.fire()},_queueHooks:function(n,t){var u=t+"queueHooks";return r.get(n,u)||r.access(n,u,{empty:i.Callbacks("once memory").add(function(){r.remove(n,[t+"queue",u])})})}});i.fn.extend({queue:function(n,t){var r=2;return(typeof n!="string"&&(t=n,n="fx",r--),arguments.length<r)?i.queue(this[0],n):t===undefined?this:this.each(function(){var r=i.queue(this,n,t);i._queueHooks(this,n);n==="fx"&&r[0]!=="inprogress"&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,t){var u,e=1,o=i.Deferred(),f=this,s=this.length,h=function(){--e||o.resolveWith(f,[f])};for(typeof n!="string"&&(t=n,n=undefined),n=n||"fx";s--;)u=r.get(f[s],n+"queueHooks"),u&&u.empty&&(e++,u.empty.add(h));return h(),o.promise(t)}});var ct=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,p=["Top","Right","Bottom","Left"],tt=function(n,t){return n=t||n,i.css(n,"display")==="none"||!i.contains(n.ownerDocument,n)},er=/^(?:checkbox|radio)$/i;(function(){var i=u.createDocumentFragment(),n=i.appendChild(u.createElement("div")),t=u.createElement("input");t.setAttribute("type","radio");t.setAttribute("checked","checked");t.setAttribute("name","t");n.appendChild(t);f.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked;n.innerHTML="<textarea>x<\/textarea>";f.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue})();b=typeof undefined;f.focusinBubbles="onfocusin"in n;var cf=/^key/,lf=/^(?:mouse|pointer|contextmenu)|click/,or=/^(?:focusinfocus|focusoutblur)$/,sr=/^([^.]*)(?:\.(.+)|)$/;i.event={global:{},add:function(n,t,u,f,e){var v,y,w,p,k,h,s,l,o,d,g,a=r.get(n);if(a)for(u.handler&&(v=u,u=v.handler,e=v.selector),u.guid||(u.guid=i.guid++),(p=a.events)||(p=a.events={}),(y=a.handle)||(y=a.handle=function(t){return typeof i!==b&&i.event.triggered!==t.type?i.event.dispatch.apply(n,arguments):undefined}),t=(t||"").match(c)||[""],k=t.length;k--;)(w=sr.exec(t[k])||[],o=g=w[1],d=(w[2]||"").split(".").sort(),o)&&(s=i.event.special[o]||{},o=(e?s.delegateType:s.bindType)||o,s=i.event.special[o]||{},h=i.extend({type:o,origType:g,data:f,handler:u,guid:u.guid,selector:e,needsContext:e&&i.expr.match.needsContext.test(e),namespace:d.join(".")},v),(l=p[o])||(l=p[o]=[],l.delegateCount=0,s.setup&&s.setup.call(n,f,d,y)!==!1||n.addEventListener&&n.addEventListener(o,y,!1)),s.add&&(s.add.call(n,h),h.handler.guid||(h.handler.guid=u.guid)),e?l.splice(l.delegateCount++,0,h):l.push(h),i.event.global[o]=!0)},remove:function(n,t,u,f,e){var p,k,h,v,w,s,l,a,o,b,d,y=r.hasData(n)&&r.get(n);if(y&&(v=y.events)){for(t=(t||"").match(c)||[""],w=t.length;w--;){if(h=sr.exec(t[w])||[],o=d=h[1],b=(h[2]||"").split(".").sort(),!o){for(o in v)i.event.remove(n,o+t[w],u,f,!0);continue}for(l=i.event.special[o]||{},o=(f?l.delegateType:l.bindType)||o,a=v[o]||[],h=h[2]&&new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"),k=p=a.length;p--;)s=a[p],(e||d===s.origType)&&(!u||u.guid===s.guid)&&(!h||h.test(s.namespace))&&(!f||f===s.selector||f==="**"&&s.selector)&&(a.splice(p,1),s.selector&&a.delegateCount--,l.remove&&l.remove.call(n,s));k&&!a.length&&(l.teardown&&l.teardown.call(n,b,y.handle)!==!1||i.removeEvent(n,o,y.handle),delete v[o])}i.isEmptyObject(v)&&(delete y.handle,r.remove(n,"events"))}},trigger:function(t,f,e,o){var w,s,c,b,a,v,l,p=[e||u],h=ii.call(t,"type")?t.type:t,y=ii.call(t,"namespace")?t.namespace.split("."):[];if((s=c=e=e||u,e.nodeType!==3&&e.nodeType!==8)&&!or.test(h+i.event.triggered)&&(h.indexOf(".")>=0&&(y=h.split("."),h=y.shift(),y.sort()),a=h.indexOf(":")<0&&"on"+h,t=t[i.expando]?t:new i.Event(h,typeof t=="object"&&t),t.isTrigger=o?2:3,t.namespace=y.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=e),f=f==null?[t]:i.makeArray(f,[t]),l=i.event.special[h]||{},o||!l.trigger||l.trigger.apply(e,f)!==!1)){if(!o&&!l.noBubble&&!i.isWindow(e)){for(b=l.delegateType||h,or.test(b+h)||(s=s.parentNode);s;s=s.parentNode)p.push(s),c=s;c===(e.ownerDocument||u)&&p.push(c.defaultView||c.parentWindow||n)}for(w=0;(s=p[w++])&&!t.isPropagationStopped();)t.type=w>1?b:l.bindType||h,v=(r.get(s,"events")||{})[t.type]&&r.get(s,"handle"),v&&v.apply(s,f),v=a&&s[a],v&&v.apply&&i.acceptData(s)&&(t.result=v.apply(s,f),t.result===!1&&t.preventDefault());return t.type=h,o||t.isDefaultPrevented()||(!l._default||l._default.apply(p.pop(),f)===!1)&&i.acceptData(e)&&a&&i.isFunction(e[h])&&!i.isWindow(e)&&(c=e[a],c&&(e[a]=null),i.event.triggered=h,e[h](),i.event.triggered=undefined,c&&(e[a]=c)),t.result}},dispatch:function(n){n=i.event.fix(n);var o,s,e,u,t,h=[],c=a.call(arguments),l=(r.get(this,"events")||{})[n.type]||[],f=i.event.special[n.type]||{};if(c[0]=n,n.delegateTarget=this,!f.preDispatch||f.preDispatch.call(this,n)!==!1){for(h=i.event.handlers.call(this,n,l),o=0;(u=h[o++])&&!n.isPropagationStopped();)for(n.currentTarget=u.elem,s=0;(t=u.handlers[s++])&&!n.isImmediatePropagationStopped();)(!n.namespace_re||n.namespace_re.test(t.namespace))&&(n.handleObj=t,n.data=t.data,e=((i.event.special[t.origType]||{}).handle||t.handler).apply(u.elem,c),e!==undefined&&(n.result=e)===!1&&(n.preventDefault(),n.stopPropagation()));return f.postDispatch&&f.postDispatch.call(this,n),n.result}},handlers:function(n,t){var e,u,f,o,h=[],s=t.delegateCount,r=n.target;if(s&&r.nodeType&&(!n.button||n.type!=="click"))for(;r!==this;r=r.parentNode||this)if(r.disabled!==!0||n.type!=="click"){for(u=[],e=0;e<s;e++)o=t[e],f=o.selector+" ",u[f]===undefined&&(u[f]=o.needsContext?i(f,this).index(r)>=0:i.find(f,this,null,[r]).length),u[f]&&u.push(o);u.length&&h.push({elem:r,handlers:u})}return s<t.length&&h.push({elem:this,handlers:t.slice(s)}),h},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return n.which==null&&(n.which=t.charCode!=null?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,t){var e,i,r,f=t.button;return n.pageX==null&&t.clientX!=null&&(e=n.target.ownerDocument||u,i=e.documentElement,r=e.body,n.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),n.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),n.which||f===undefined||(n.which=f&1?1:f&2?3:f&4?2:0),n}},fix:function(n){if(n[i.expando])return n;var f,e,o,r=n.type,s=n,t=this.fixHooks[r];for(t||(this.fixHooks[r]=t=lf.test(r)?this.mouseHooks:cf.test(r)?this.keyHooks:{}),o=t.props?this.props.concat(t.props):this.props,n=new i.Event(s),f=o.length;f--;)e=o[f],n[e]=s[e];return n.target||(n.target=u),n.target.nodeType===3&&(n.target=n.target.parentNode),t.filter?t.filter(n,s):n},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==hr()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===hr()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&i.nodeName(this,"input"))return this.click(),!1},_default:function(n){return i.nodeName(n.target,"a")}},beforeunload:{postDispatch:function(n){n.result!==undefined&&n.originalEvent&&(n.originalEvent.returnValue=n.result)}}},simulate:function(n,t,r,u){var f=i.extend(new i.Event,r,{type:n,isSimulated:!0,originalEvent:{}});u?i.event.trigger(f,null,t):i.event.dispatch.call(t,f);f.isDefaultPrevented()&&r.preventDefault()}};i.removeEvent=function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i,!1)};i.Event=function(n,t){if(!(this instanceof i.Event))return new i.Event(n,t);n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.defaultPrevented===undefined&&n.returnValue===!1?lt:k):this.type=n;t&&i.extend(this,t);this.timeStamp=n&&n.timeStamp||i.now();this[i.expando]=!0};i.Event.prototype={isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=lt;n&&n.preventDefault&&n.preventDefault()},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=lt;n&&n.stopPropagation&&n.stopPropagation()},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=lt;n&&n.stopImmediatePropagation&&n.stopImmediatePropagation();this.stopPropagation()}};i.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var u,f=this,r=n.relatedTarget,e=n.handleObj;return r&&(r===f||i.contains(f,r))||(n.type=e.origType,u=e.handler.apply(this,arguments),n.type=t),u}}});f.focusinBubbles||i.each({focus:"focusin",blur:"focusout"},function(n,t){var u=function(n){i.event.simulate(t,n.target,i.event.fix(n),!0)};i.event.special[t]={setup:function(){var i=this.ownerDocument||this,f=r.access(i,t);f||i.addEventListener(n,u,!0);r.access(i,t,(f||0)+1)},teardown:function(){var i=this.ownerDocument||this,f=r.access(i,t)-1;f?r.access(i,t,f):(i.removeEventListener(n,u,!0),r.remove(i,t))}}});i.fn.extend({on:function(n,t,r,u,f){var e,o;if(typeof n=="object"){typeof t!="string"&&(r=r||t,t=undefined);for(o in n)this.on(o,t,r,n[o],f);return this}if(r==null&&u==null?(u=t,r=t=undefined):u==null&&(typeof t=="string"?(u=r,r=undefined):(u=r,r=t,t=undefined)),u===!1)u=k;else if(!u)return this;return f===1&&(e=u,u=function(n){return i().off(n),e.apply(this,arguments)},u.guid=e.guid||(e.guid=i.guid++)),this.each(function(){i.event.add(this,n,u,r,t)})},one:function(n,t,i,r){return this.on(n,t,i,r,1)},off:function(n,t,r){var u,f;if(n&&n.preventDefault&&n.handleObj)return u=n.handleObj,i(n.delegateTarget).off(u.namespace?u.origType+"."+u.namespace:u.origType,u.selector,u.handler),this;if(typeof n=="object"){for(f in n)this.off(f,t,n[f]);return this}return(t===!1||typeof t=="function")&&(r=t,t=undefined),r===!1&&(r=k),this.each(function(){i.event.remove(this,n,r,t)})},trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){var r=this[0];if(r)return i.event.trigger(n,t,r,!0)}});var cr=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,lr=/<([\w:]+)/,af=/<|&#?\w+;/,vf=/<(?:script|style|link)/i,yf=/checked\s*(?:[^=]|=\s*.checked.)/i,ar=/^$|\/(?:java|ecma)script/i,pf=/^true\/(.*)/,wf=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,h={option:[1,"<select multiple='multiple'>","<\/select>"],thead:[1,"<table>","<\/table>"],col:[2,"<table><colgroup>","<\/colgroup><\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:[0,"",""]};h.optgroup=h.option;h.tbody=h.tfoot=h.colgroup=h.caption=h.thead;h.th=h.td;i.extend({clone:function(n,t,r){var u,c,s,e,h=n.cloneNode(!0),l=i.contains(n.ownerDocument,n);if(!f.noCloneChecked&&(n.nodeType===1||n.nodeType===11)&&!i.isXMLDoc(n))for(e=o(h),s=o(n),u=0,c=s.length;u<c;u++)df(s[u],e[u]);if(t)if(r)for(s=s||o(n),e=e||o(h),u=0,c=s.length;u<c;u++)yr(s[u],e[u]);else yr(n,h);return e=o(h,"script"),e.length>0&&ei(e,!l&&o(n,"script")),h},buildFragment:function(n,t,r,u){for(var f,e,y,l,p,a,s=t.createDocumentFragment(),v=[],c=0,w=n.length;c<w;c++)if(f=n[c],f||f===0)if(i.type(f)==="object")i.merge(v,f.nodeType?[f]:f);else if(af.test(f)){for(e=e||s.appendChild(t.createElement("div")),y=(lr.exec(f)||["",""])[1].toLowerCase(),l=h[y]||h._default,e.innerHTML=l[1]+f.replace(cr,"<$1><\/$2>")+l[2],a=l[0];a--;)e=e.lastChild;i.merge(v,e.childNodes);e=s.firstChild;e.textContent=""}else v.push(t.createTextNode(f));for(s.textContent="",c=0;f=v[c++];)if((!u||i.inArray(f,u)===-1)&&(p=i.contains(f.ownerDocument,f),e=o(s.appendChild(f),"script"),p&&ei(e),r))for(a=0;f=e[a++];)ar.test(f.type||"")&&r.push(f);return s},cleanData:function(n){for(var f,t,o,u,h=i.event.special,s=0;(t=n[s])!==undefined;s++){if(i.acceptData(t)&&(u=t[r.expando],u&&(f=r.cache[u]))){if(f.events)for(o in f.events)h[o]?i.event.remove(t,o):i.removeEvent(t,o,f.handle);r.cache[u]&&delete r.cache[u]}delete e.cache[t[e.expando]]}}});i.fn.extend({text:function(n){return l(this,function(n){return n===undefined?i.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=n)})},null,n,arguments.length)},append:function(){return this.domManip(arguments,function(n){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=vr(this,n);t.appendChild(n)}})},prepend:function(){return this.domManip(arguments,function(n){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=vr(this,n);t.insertBefore(n,t.firstChild)}})},before:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},remove:function(n,t){for(var r,f=n?i.filter(n,this):this,u=0;(r=f[u])!=null;u++)t||r.nodeType!==1||i.cleanData(o(r)),r.parentNode&&(t&&i.contains(r.ownerDocument,r)&&ei(o(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var n,t=0;(n=this[t])!=null;t++)n.nodeType===1&&(i.cleanData(o(n,!1)),n.textContent="");return this},clone:function(n,t){return n=n==null?!1:n,t=t==null?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return l(this,function(n){var t=this[0]||{},r=0,u=this.length;if(n===undefined&&t.nodeType===1)return t.innerHTML;if(typeof n=="string"&&!vf.test(n)&&!h[(lr.exec(n)||["",""])[1].toLowerCase()]){n=n.replace(cr,"<$1><\/$2>");try{for(;r<u;r++)t=this[r]||{},t.nodeType===1&&(i.cleanData(o(t,!1)),t.innerHTML=n);t=0}catch(f){}}t&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(){var n=arguments[0];return this.domManip(arguments,function(t){n=this.parentNode;i.cleanData(o(this));n&&n.replaceChild(t,this)}),n&&(n.length||n.nodeType)?this:this.remove()},detach:function(n){return this.remove(n,!0)},domManip:function(n,t){n=bi.apply([],n);var h,v,s,c,u,y,e=0,l=this.length,w=this,b=l-1,a=n[0],p=i.isFunction(a);if(p||l>1&&typeof a=="string"&&!f.checkClone&&yf.test(a))return this.each(function(i){var r=w.eq(i);p&&(n[0]=a.call(this,i,r.html()));r.domManip(n,t)});if(l&&(h=i.buildFragment(n,this[0].ownerDocument,!1,this),v=h.firstChild,h.childNodes.length===1&&(h=v),v)){for(s=i.map(o(h,"script"),bf),c=s.length;e<l;e++)u=h,e!==b&&(u=i.clone(u,!0,!0),c&&i.merge(s,o(u,"script"))),t.call(this[e],u,e);if(c)for(y=s[s.length-1].ownerDocument,i.map(s,kf),e=0;e<c;e++)u=s[e],ar.test(u.type||"")&&!r.access(u,"globalEval")&&i.contains(y,u)&&(u.src?i._evalUrl&&i._evalUrl(u.src):i.globalEval(u.textContent.replace(wf,"")))}return this}});i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(n){for(var u,f=[],e=i(n),o=e.length-1,r=0;r<=o;r++)u=r===o?this:this.clone(!0),i(e[r])[t](u),ti.apply(f,u.get());return this.pushStack(f)}});oi={};var wr=/^margin/,hi=new RegExp("^("+ct+")(?!px)[a-z%]+$","i"),vt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):n.getComputedStyle(t,null)};(function(){function h(){t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";t.innerHTML="";e.appendChild(r);var i=n.getComputedStyle(t,null);s=i.top!=="1%";o=i.width==="4px";e.removeChild(r)}var s,o,e=u.documentElement,r=u.createElement("div"),t=u.createElement("div");t.style&&(t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle=t.style.backgroundClip==="content-box",r.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",r.appendChild(t),n.getComputedStyle&&i.extend(f,{pixelPosition:function(){return h(),s},boxSizingReliable:function(){return o==null&&h(),o},reliableMarginRight:function(){var f,i=t.appendChild(u.createElement("div"));return i.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",t.style.width="1px",e.appendChild(r),f=!parseFloat(n.getComputedStyle(i,null).marginRight),e.removeChild(r),t.removeChild(i),f}}))})();i.swap=function(n,t,i,r){var f,u,e={};for(u in t)e[u]=n.style[u],n.style[u]=t[u];f=i.apply(n,r||[]);for(u in t)n.style[u]=e[u];return f};var gf=/^(none|table(?!-c[ea]).+)/,ne=new RegExp("^("+ct+")(.*)$","i"),te=new RegExp("^([+-])=("+ct+")","i"),ie={position:"absolute",visibility:"hidden",display:"block"},kr={letterSpacing:"0",fontWeight:"400"},dr=["Webkit","O","Moz","ms"];i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=it(n,"opacity");return i===""?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(n,t,r,u){if(n&&n.nodeType!==3&&n.nodeType!==8&&n.style){var o,h,e,s=i.camelCase(t),c=n.style;if(t=i.cssProps[s]||(i.cssProps[s]=gr(c,s)),e=i.cssHooks[t]||i.cssHooks[s],r!==undefined){if(h=typeof r,h==="string"&&(o=te.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(i.css(n,t)),h="number"),r==null||r!==r)return;h!=="number"||i.cssNumber[s]||(r+="px");f.clearCloneStyle||r!==""||t.indexOf("background")!==0||(c[t]="inherit");e&&"set"in e&&(r=e.set(n,r,u))===undefined||(c[t]=r)}else return e&&"get"in e&&(o=e.get(n,!1,u))!==undefined?o:c[t]}},css:function(n,t,r,u){var f,s,e,o=i.camelCase(t);return(t=i.cssProps[o]||(i.cssProps[o]=gr(n.style,o)),e=i.cssHooks[t]||i.cssHooks[o],e&&"get"in e&&(f=e.get(n,!0,r)),f===undefined&&(f=it(n,t,u)),f==="normal"&&t in kr&&(f=kr[t]),r===""||r)?(s=parseFloat(f),r===!0||i.isNumeric(s)?s||0:f):f}});i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,u){if(r)return gf.test(i.css(n,"display"))&&n.offsetWidth===0?i.swap(n,ie,function(){return iu(n,t,u)}):iu(n,t,u)},set:function(n,r,u){var f=u&&vt(n);return nu(n,r,u?tu(n,t,u,i.css(n,"boxSizing",!1,f)==="border-box",f):0)}}});i.cssHooks.marginRight=br(f.reliableMarginRight,function(n,t){if(t)return i.swap(n,{display:"inline-block"},it,[n,"marginRight"])});i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var r=0,f={},u=typeof i=="string"?i.split(" "):[i];r<4;r++)f[n+p[r]+t]=u[r]||u[r-2]||u[0];return f}};wr.test(n)||(i.cssHooks[n+t].set=nu)});i.fn.extend({css:function(n,t){return l(this,function(n,t,r){var f,e,o={},u=0;if(i.isArray(t)){for(f=vt(n),e=t.length;u<e;u++)o[t[u]]=i.css(n,t[u],!1,f);return o}return r!==undefined?i.style(n,t,r):i.css(n,t)},n,t,arguments.length>1)},show:function(){return ru(this,!0)},hide:function(){return ru(this)},toggle:function(n){return typeof n=="boolean"?n?this.show():this.hide():this.each(function(){tt(this)?i(this).show():i(this).hide()})}});i.Tween=s;s.prototype={constructor:s,init:function(n,t,r,u,f,e){this.elem=n;this.prop=r;this.easing=f||"swing";this.options=t;this.start=this.now=this.cur();this.end=u;this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=s.propHooks[this.prop];return n&&n.get?n.get(this):s.propHooks._default.get(this)},run:function(n){var t,r=s.propHooks[this.prop];return this.pos=this.options.duration?t=i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):t=n,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):s.propHooks._default.set(this),this}};s.prototype.init.prototype=s.prototype;s.propHooks={_default:{get:function(n){var t;return n.elem[n.prop]!=null&&(!n.elem.style||n.elem.style[n.prop]==null)?n.elem[n.prop]:(t=i.css(n.elem,n.prop,""),!t||t==="auto"?0:t)},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):n.elem.style&&(n.elem.style[i.cssProps[n.prop]]!=null||i.cssHooks[n.prop])?i.style(n.elem,n.prop,n.now+n.unit):n.elem[n.prop]=n.now}}};s.propHooks.scrollTop=s.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}};i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2}};i.fx=s.prototype.init;i.fx.step={};var d,yt,re=/^(?:toggle|show|hide)$/,uu=new RegExp("^(?:([+-])=|)("+ct+")([a-z%]*)$","i"),ue=/queueHooks$/,pt=[fe],rt={"*":[function(n,t){var f=this.createTween(n,t),s=f.cur(),u=uu.exec(t),e=u&&u[3]||(i.cssNumber[n]?"":"px"),r=(i.cssNumber[n]||e!=="px"&&+s)&&uu.exec(i.css(f.elem,n)),o=1,h=20;if(r&&r[3]!==e){e=e||r[3];u=u||[];r=+s||1;do o=o||".5",r=r/o,i.style(f.elem,n,r+e);while(o!==(o=f.cur()/s)&&o!==1&&--h)}return u&&(r=f.start=+r||+s||0,f.unit=e,f.end=u[1]?r+(u[1]+1)*u[2]:+u[2]),f}]};i.Animation=i.extend(ou,{tweener:function(n,t){i.isFunction(n)?(t=n,n=["*"]):n=n.split(" ");for(var r,u=0,f=n.length;u<f;u++)r=n[u],rt[r]=rt[r]||[],rt[r].unshift(t)},prefilter:function(n,t){t?pt.unshift(n):pt.push(n)}});i.speed=function(n,t,r){var u=n&&typeof n=="object"?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:typeof u.duration=="number"?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,(u.queue==null||u.queue===!0)&&(u.queue="fx"),u.old=u.complete,u.complete=function(){i.isFunction(u.old)&&u.old.call(this);u.queue&&i.dequeue(this,u.queue)},u};i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(tt).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,u,f){var s=i.isEmptyObject(n),o=i.speed(t,u,f),e=function(){var t=ou(this,i.extend({},n),o);(s||r.get(this,"finish"))&&t.stop(!0)};return e.finish=e,s||o.queue===!1?this.each(e):this.queue(o.queue,e)},stop:function(n,t,u){var f=function(n){var t=n.stop;delete n.stop;t(u)};return typeof n!="string"&&(u=t,t=n,n=undefined),t&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var s=!0,t=n!=null&&n+"queueHooks",o=i.timers,e=r.get(this);if(t)e[t]&&e[t].stop&&f(e[t]);else for(t in e)e[t]&&e[t].stop&&ue.test(t)&&f(e[t]);for(t=o.length;t--;)o[t].elem===this&&(n==null||o[t].queue===n)&&(o[t].anim.stop(u),s=!1,o.splice(t,1));(s||!u)&&i.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var t,e=r.get(this),u=e[n+"queue"],o=e[n+"queueHooks"],f=i.timers,s=u?u.length:0;for(e.finish=!0,i.queue(this,n,[]),o&&o.stop&&o.stop.call(this,!0),t=f.length;t--;)f[t].elem===this&&f[t].queue===n&&(f[t].anim.stop(!0),f.splice(t,1));for(t=0;t<s;t++)u[t]&&u[t].finish&&u[t].finish.call(this);delete e.finish})}});i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(n,i,u){return n==null||typeof n=="boolean"?r.apply(this,arguments):this.animate(wt(t,!0),n,i,u)}});i.each({slideDown:wt("show"),slideUp:wt("hide"),slideToggle:wt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}});i.timers=[];i.fx.tick=function(){var r,n=0,t=i.timers;for(d=i.now();n<t.length;n++)r=t[n],r()||t[n]!==r||t.splice(n--,1);t.length||i.fx.stop();d=undefined};i.fx.timer=function(n){i.timers.push(n);n()?i.fx.start():i.timers.pop()};i.fx.interval=13;i.fx.start=function(){yt||(yt=setInterval(i.fx.tick,i.fx.interval))};i.fx.stop=function(){clearInterval(yt);yt=null};i.fx.speeds={slow:600,fast:200,_default:400};i.fn.delay=function(n,t){return n=i.fx?i.fx.speeds[n]||n:n,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,n);i.stop=function(){clearTimeout(r)}})},function(){var n=u.createElement("input"),t=u.createElement("select"),i=t.appendChild(u.createElement("option"));n.type="checkbox";f.checkOn=n.value!=="";f.optSelected=i.selected;t.disabled=!0;f.optDisabled=!i.disabled;n=u.createElement("input");n.value="t";n.type="radio";f.radioValue=n.value==="t"}();g=i.expr.attrHandle;i.fn.extend({attr:function(n,t){return l(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})}});i.extend({attr:function(n,t,r){var u,f,e=n.nodeType;if(n&&e!==3&&e!==8&&e!==2){if(typeof n.getAttribute===b)return i.prop(n,t,r);if(e===1&&i.isXMLDoc(n)||(t=t.toLowerCase(),u=i.attrHooks[t]||(i.expr.match.bool.test(t)?su:oe)),r!==undefined)if(r===null)i.removeAttr(n,t);else return u&&"set"in u&&(f=u.set(n,r,t))!==undefined?f:(n.setAttribute(t,r+""),r);else return u&&"get"in u&&(f=u.get(n,t))!==null?f:(f=i.find.attr(n,t),f==null?undefined:f)}},removeAttr:function(n,t){var r,u,e=0,f=t&&t.match(c);if(f&&n.nodeType===1)while(r=f[e++])u=i.propFix[r]||r,i.expr.match.bool.test(r)&&(n[u]=!1),n.removeAttribute(r)},attrHooks:{type:{set:function(n,t){if(!f.radioValue&&t==="radio"&&i.nodeName(n,"input")){var r=n.value;return n.setAttribute("type",t),r&&(n.value=r),t}}}}});su={set:function(n,t,r){return t===!1?i.removeAttr(n,r):n.setAttribute(r,r),r}};i.each(i.expr.match.bool.source.match(/\w+/g),function(n,t){var r=g[t]||i.find.attr;g[t]=function(n,t,i){var u,f;return i||(f=g[t],g[t]=u,u=r(n,t,i)!=null?t.toLowerCase():null,g[t]=f),u}});hu=/^(?:input|select|textarea|button)$/i;i.fn.extend({prop:function(n,t){return l(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return this.each(function(){delete this[i.propFix[n]||n]})}});i.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(n,t,r){var f,u,o,e=n.nodeType;if(n&&e!==3&&e!==8&&e!==2)return o=e!==1||!i.isXMLDoc(n),o&&(t=i.propFix[t]||t,u=i.propHooks[t]),r!==undefined?u&&"set"in u&&(f=u.set(n,r,t))!==undefined?f:n[t]=r:u&&"get"in u&&(f=u.get(n,t))!==null?f:n[t]},propHooks:{tabIndex:{get:function(n){return n.hasAttribute("tabindex")||hu.test(n.nodeName)||n.href?n.tabIndex:-1}}}});f.optSelected||(i.propHooks.selected={get:function(n){var t=n.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}});i.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){i.propFix[this.toLowerCase()]=this});bt=/[\t\r\n\f]/g;i.fn.extend({addClass:function(n){var o,t,r,u,s,f,h=typeof n=="string"&&n,e=0,l=this.length;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,this.className))});if(h)for(o=(n||"").match(c)||[];e<l;e++)if(t=this[e],r=t.nodeType===1&&(t.className?(" "+t.className+" ").replace(bt," "):" "),r){for(s=0;u=o[s++];)r.indexOf(" "+u+" ")<0&&(r+=u+" ");f=i.trim(r);t.className!==f&&(t.className=f)}return this},removeClass:function(n){var o,t,r,u,s,f,h=arguments.length===0||typeof n=="string"&&n,e=0,l=this.length;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,this.className))});if(h)for(o=(n||"").match(c)||[];e<l;e++)if(t=this[e],r=t.nodeType===1&&(t.className?(" "+t.className+" ").replace(bt," "):""),r){for(s=0;u=o[s++];)while(r.indexOf(" "+u+" ")>=0)r=r.replace(" "+u+" "," ");f=n?i.trim(r):"";t.className!==f&&(t.className=f)}return this},toggleClass:function(n,t){var u=typeof n;return typeof t=="boolean"&&u==="string"?t?this.addClass(n):this.removeClass(n):i.isFunction(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,this.className,t),t)}):this.each(function(){if(u==="string")for(var t,e=0,f=i(this),o=n.match(c)||[];t=o[e++];)f.hasClass(t)?f.removeClass(t):f.addClass(t);else(u===b||u==="boolean")&&(this.className&&r.set(this,"__className__",this.className),this.className=this.className||n===!1?"":r.get(this,"__className__")||"")})},hasClass:function(n){for(var i=" "+n+" ",t=0,r=this.length;t<r;t++)if(this[t].nodeType===1&&(" "+this[t].className+" ").replace(bt," ").indexOf(i)>=0)return!0;return!1}});cu=/\r/g;i.fn.extend({val:function(n){var t,r,f,u=this[0];return arguments.length?(f=i.isFunction(n),this.each(function(r){var u;this.nodeType===1&&(u=f?n.call(this,r,i(this).val()):n,u==null?u="":typeof u=="number"?u+="":i.isArray(u)&&(u=i.map(u,function(n){return n==null?"":n+""})),t=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&t.set(this,u,"value")!==undefined||(this.value=u))})):u?(t=i.valHooks[u.type]||i.valHooks[u.nodeName.toLowerCase()],t&&"get"in t&&(r=t.get(u,"value"))!==undefined)?r:(r=u.value,typeof r=="string"?r.replace(cu,""):r==null?"":r):void 0}});i.extend({valHooks:{option:{get:function(n){var t=i.find.attr(n,"value");return t!=null?t:i.trim(i.text(n))}},select:{get:function(n){for(var o,t,s=n.options,r=n.selectedIndex,u=n.type==="select-one"||r<0,h=u?null:[],c=u?r+1:s.length,e=r<0?c:u?r:0;e<c;e++)if(t=s[e],(t.selected||e===r)&&(f.optDisabled?!t.disabled:t.getAttribute("disabled")===null)&&(!t.parentNode.disabled||!i.nodeName(t.parentNode,"optgroup"))){if(o=i(t).val(),u)return o;h.push(o)}return h},set:function(n,t){for(var u,r,f=n.options,e=i.makeArray(t),o=f.length;o--;)r=f[o],(r.selected=i.inArray(r.value,e)>=0)&&(u=!0);return u||(n.selectedIndex=-1),e}}}});i.each(["radio","checkbox"],function(){i.valHooks[this]={set:function(n,t){if(i.isArray(t))return n.checked=i.inArray(i(n).val(),t)>=0}};f.checkOn||(i.valHooks[this].get=function(n){return n.getAttribute("value")===null?"on":n.value})});i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return arguments.length>0?this.on(t,null,n,i):this.trigger(t)}});i.fn.extend({hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)},bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return arguments.length===1?this.off(n,"**"):this.off(t,n||"**",i)}});kt=i.now();dt=/\?/;i.parseJSON=function(n){return JSON.parse(n+"")};i.parseXML=function(n){var t,r;if(!n||typeof n!="string")return null;try{r=new DOMParser;t=r.parseFromString(n,"text/xml")}catch(u){t=undefined}return(!t||t.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+n),t};var se=/#.*$/,lu=/([?&])_=[^&]*/,he=/^(.*?):[ \t]*([^\r\n]*)$/mg,ce=/^(?:GET|HEAD)$/,le=/^\/\//,au=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,vu={},ci={},yu="*/".concat("*"),li=n.location.href,nt=au.exec(li.toLowerCase())||[];i.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:li,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(nt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":yu,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,t){return t?ai(ai(n,i.ajaxSettings),t):ai(i.ajaxSettings,n)},ajaxPrefilter:pu(vu),ajaxTransport:pu(ci),ajax:function(n,t){function p(n,t,h,c){var v,it,tt,p,nt,l=t;e!==2&&(e=2,b&&clearTimeout(b),s=undefined,w=c||"",u.readyState=n>0?4:0,v=n>=200&&n<300||n===304,h&&(p=ae(r,u,h)),p=ve(r,p,u,v),v?(r.ifModified&&(nt=u.getResponseHeader("Last-Modified"),nt&&(i.lastModified[f]=nt),nt=u.getResponseHeader("etag"),nt&&(i.etag[f]=nt)),n===204||r.type==="HEAD"?l="nocontent":n===304?l="notmodified":(l=p.state,it=p.data,tt=p.error,v=!tt)):(tt=l,(n||!l)&&(l="error",n<0&&(n=0))),u.status=n,u.statusText=(t||l)+"",v?d.resolveWith(o,[it,l,u]):d.rejectWith(o,[u,l,tt]),u.statusCode(y),y=undefined,a&&k.trigger(v?"ajaxSuccess":"ajaxError",[u,r,v?it:tt]),g.fireWith(o,[u,l]),a&&(k.trigger("ajaxComplete",[u,r]),--i.active||i.event.trigger("ajaxStop")))}typeof n=="object"&&(t=n,n=undefined);t=t||{};var s,f,w,v,b,h,a,l,r=i.ajaxSetup({},t),o=r.context||r,k=r.context&&(o.nodeType||o.jquery)?i(o):i.event,d=i.Deferred(),g=i.Callbacks("once memory"),y=r.statusCode||{},tt={},it={},e=0,rt="canceled",u={readyState:0,getResponseHeader:function(n){var t;if(e===2){if(!v)for(v={};t=he.exec(w);)v[t[1].toLowerCase()]=t[2];t=v[n.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return e===2?w:null},setRequestHeader:function(n,t){var i=n.toLowerCase();return e||(n=it[i]=it[i]||n,tt[n]=t),this},overrideMimeType:function(n){return e||(r.mimeType=n),this},statusCode:function(n){var t;if(n)if(e<2)for(t in n)y[t]=[y[t],n[t]];else u.always(n[u.status]);return this},abort:function(n){var t=n||rt;return s&&s.abort(t),p(0,t),this}};if(d.promise(u).complete=g.add,u.success=u.done,u.error=u.fail,r.url=((n||r.url||li)+"").replace(se,"").replace(le,nt[1]+"//"),r.type=t.method||t.type||r.method||r.type,r.dataTypes=i.trim(r.dataType||"*").toLowerCase().match(c)||[""],r.crossDomain==null&&(h=au.exec(r.url.toLowerCase()),r.crossDomain=!!(h&&(h[1]!==nt[1]||h[2]!==nt[2]||(h[3]||(h[1]==="http:"?"80":"443"))!==(nt[3]||(nt[1]==="http:"?"80":"443"))))),r.data&&r.processData&&typeof r.data!="string"&&(r.data=i.param(r.data,r.traditional)),wu(vu,r,t,u),e===2)return u;a=i.event&&r.global;a&&i.active++==0&&i.event.trigger("ajaxStart");r.type=r.type.toUpperCase();r.hasContent=!ce.test(r.type);f=r.url;r.hasContent||(r.data&&(f=r.url+=(dt.test(f)?"&":"?")+r.data,delete r.data),r.cache===!1&&(r.url=lu.test(f)?f.replace(lu,"$1_="+kt++):f+(dt.test(f)?"&":"?")+"_="+kt++));r.ifModified&&(i.lastModified[f]&&u.setRequestHeader("If-Modified-Since",i.lastModified[f]),i.etag[f]&&u.setRequestHeader("If-None-Match",i.etag[f]));(r.data&&r.hasContent&&r.contentType!==!1||t.contentType)&&u.setRequestHeader("Content-Type",r.contentType);u.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+(r.dataTypes[0]!=="*"?", "+yu+"; q=0.01":""):r.accepts["*"]);for(l in r.headers)u.setRequestHeader(l,r.headers[l]);if(r.beforeSend&&(r.beforeSend.call(o,u,r)===!1||e===2))return u.abort();rt="abort";for(l in{success:1,error:1,complete:1})u[l](r[l]);if(s=wu(ci,r,t,u),s){u.readyState=1;a&&k.trigger("ajaxSend",[u,r]);r.async&&r.timeout>0&&(b=setTimeout(function(){u.abort("timeout")},r.timeout));try{e=1;s.send(tt,p)}catch(ut){if(e<2)p(-1,ut);else throw ut;}}else p(-1,"No Transport");return u},getJSON:function(n,t,r){return i.get(n,t,r,"json")},getScript:function(n,t){return i.get(n,undefined,t,"script")}});i.each(["get","post"],function(n,t){i[t]=function(n,r,u,f){return i.isFunction(r)&&(f=f||u,u=r,r=undefined),i.ajax({url:n,type:t,dataType:f,data:r,success:u})}});i._evalUrl=function(n){return i.ajax({url:n,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})};i.fn.extend({wrapAll:function(n){var t;return i.isFunction(n)?this.each(function(t){i(this).wrapAll(n.call(this,t))}):(this[0]&&(t=i(n,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var n=this;n.firstElementChild;)n=n.firstElementChild;return n}).append(this)),this)},wrapInner:function(n){return i.isFunction(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=i.isFunction(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()}});i.expr.filters.hidden=function(n){return n.offsetWidth<=0&&n.offsetHeight<=0};i.expr.filters.visible=function(n){return!i.expr.filters.hidden(n)};var ye=/%20/g,pe=/\[\]$/,bu=/\r?\n/g,we=/^(?:submit|button|image|reset|file)$/i,be=/^(?:input|select|textarea|keygen)/i;i.param=function(n,t){var r,u=[],f=function(n,t){t=i.isFunction(t)?t():t==null?"":t;u[u.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(t===undefined&&(t=i.ajaxSettings&&i.ajaxSettings.traditional),i.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){f(this.name,this.value)});else for(r in n)vi(r,n[r],t,f);return u.join("&").replace(ye,"+")};i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=i.prop(this,"elements");return n?i.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!i(this).is(":disabled")&&be.test(this.nodeName)&&!we.test(n)&&(this.checked||!er.test(n))}).map(function(n,t){var r=i(this).val();return r==null?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(bu,"\r\n")}}):{name:t.name,value:r.replace(bu,"\r\n")}}).get()}});i.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(n){}};var ke=0,gt={},de={0:200,1223:204},ut=i.ajaxSettings.xhr();return n.attachEvent&&n.attachEvent("onunload",function(){for(var n in gt)gt[n]()}),f.cors=!!ut&&"withCredentials"in ut,f.ajax=ut=!!ut,i.ajaxTransport(function(n){var t;if(f.cors||ut&&!n.crossDomain)return{send:function(i,r){var f,u=n.xhr(),e=++ke;if(u.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(f in n.xhrFields)u[f]=n.xhrFields[f];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType);n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(f in i)u.setRequestHeader(f,i[f]);t=function(n){return function(){t&&(delete gt[e],t=u.onload=u.onerror=null,n==="abort"?u.abort():n==="error"?r(u.status,u.statusText):r(de[u.status]||u.status,u.statusText,typeof u.responseText=="string"?{text:u.responseText}:undefined,u.getAllResponseHeaders()))}};u.onload=t();u.onerror=t("error");t=gt[e]=t("abort");try{u.send(n.hasContent&&n.data||null)}catch(o){if(t)throw o;}},abort:function(){t&&t()}}}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(n){return i.globalEval(n),n}}}),i.ajaxPrefilter("script",function(n){n.cache===undefined&&(n.cache=!1);n.crossDomain&&(n.type="GET")}),i.ajaxTransport("script",function(n){if(n.crossDomain){var r,t;return{send:function(f,e){r=i("<script>").prop({async:!0,charset:n.scriptCharset,src:n.url}).on("load error",t=function(n){r.remove();t=null;n&&e(n.type==="error"?404:200,n.type)});u.head.appendChild(r[0])},abort:function(){t&&t()}}}}),yi=[],ni=/(=)\?(?=&|$)|\?\?/,i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=yi.pop()||i.expando+"_"+kt++;return this[n]=!0,n}}),i.ajaxPrefilter("json jsonp",function(t,r,u){var f,o,e,s=t.jsonp!==!1&&(ni.test(t.url)?"url":typeof t.data=="string"&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(t.data)&&"data");if(s||t.dataTypes[0]==="jsonp")return f=t.jsonpCallback=i.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(ni,"$1"+f):t.jsonp!==!1&&(t.url+=(dt.test(t.url)?"&":"?")+t.jsonp+"="+f),t.converters["script json"]=function(){return e||i.error(f+" was not called"),e[0]},t.dataTypes[0]="json",o=n[f],n[f]=function(){e=arguments},u.always(function(){n[f]=o;t[f]&&(t.jsonpCallback=r.jsonpCallback,yi.push(f));e&&i.isFunction(o)&&o(e[0]);e=o=undefined}),"script"}),i.parseHTML=function(n,t,r){if(!n||typeof n!="string")return null;typeof t=="boolean"&&(r=t,t=!1);t=t||u;var f=gi.exec(n),e=!r&&[];return f?[t.createElement(f[1])]:(f=i.buildFragment([n],t,e),e&&e.length&&i(e).remove(),i.merge([],f.childNodes))},pi=i.fn.load,i.fn.load=function(n,t,r){if(typeof n!="string"&&pi)return pi.apply(this,arguments);var u,o,s,f=this,e=n.indexOf(" ");return e>=0&&(u=i.trim(n.slice(e)),n=n.slice(0,e)),i.isFunction(t)?(r=t,t=undefined):t&&typeof t=="object"&&(o="POST"),f.length>0&&i.ajax({url:n,type:o,dataType:"html",data:t}).done(function(n){s=arguments;f.html(u?i("<div>").append(i.parseHTML(n)).find(u):n)}).complete(r&&function(n,t){f.each(r,s||[n.responseText,t,n])}),this},i.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){i.fn[t]=function(n){return this.on(t,n)}}),i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length},wi=n.document.documentElement,i.offset={setOffset:function(n,t,r){var e,o,s,h,u,c,v,l=i.css(n,"position"),a=i(n),f={};l==="static"&&(n.style.position="relative");u=a.offset();s=i.css(n,"top");c=i.css(n,"left");v=(l==="absolute"||l==="fixed")&&(s+c).indexOf("auto")>-1;v?(e=a.position(),h=e.top,o=e.left):(h=parseFloat(s)||0,o=parseFloat(c)||0);i.isFunction(t)&&(t=t.call(n,r,u));t.top!=null&&(f.top=t.top-u.top+h);t.left!=null&&(f.left=t.left-u.left+o);"using"in t?t.using.call(n,f):a.css(f)}},i.fn.extend({offset:function(n){if(arguments.length)return n===undefined?this:this.each(function(t){i.offset.setOffset(this,n,t)});var r,f,t=this[0],u={top:0,left:0},e=t&&t.ownerDocument;if(e)return(r=e.documentElement,!i.contains(r,t))?u:(typeof t.getBoundingClientRect!==b&&(u=t.getBoundingClientRect()),f=ku(e),{top:u.top+f.pageYOffset-r.clientTop,left:u.left+f.pageXOffset-r.clientLeft})},position:function(){if(this[0]){var n,r,u=this[0],t={top:0,left:0};return i.css(u,"position")==="fixed"?r=u.getBoundingClientRect():(n=this.offsetParent(),r=this.offset(),i.nodeName(n[0],"html")||(t=n.offset()),t.top+=i.css(n[0],"borderTopWidth",!0),t.left+=i.css(n[0],"borderLeftWidth",!0)),{top:r.top-t.top-i.css(u,"marginTop",!0),left:r.left-t.left-i.css(u,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent||wi;n&&!i.nodeName(n,"html")&&i.css(n,"position")==="static";)n=n.offsetParent;return n||wi})}}),i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var u="pageYOffset"===r;i.fn[t]=function(i){return l(this,function(t,i,f){var e=ku(t);if(f===undefined)return e?e[r]:t[i];e?e.scrollTo(u?n.pageXOffset:f,u?f:n.pageYOffset):t[i]=f},t,i,arguments.length,null)}}),i.each(["top","left"],function(n,t){i.cssHooks[t]=br(f.pixelPosition,function(n,r){if(r)return r=it(n,t),hi.test(r)?i(n).position()[t]+"px":r})}),i.each({Height:"height",Width:"width"},function(n,t){i.each({padding:"inner"+n,content:t,"":"outer"+n},function(r,u){i.fn[u]=function(u,f){var e=arguments.length&&(r||typeof u!="boolean"),o=r||(u===!0||f===!0?"margin":"border");return l(this,function(t,r,u){var f;return i.isWindow(t)?t.document.documentElement["client"+n]:t.nodeType===9?(f=t.documentElement,Math.max(t.body["scroll"+n],f["scroll"+n],t.body["offset"+n],f["offset"+n],f["client"+n])):u===undefined?i.css(t,r,o):i.style(t,r,u,o)},t,e?u:undefined,e,null)}})}),i.fn.size=function(){return this.length},i.fn.andSelf=i.fn.addBack,typeof define=="function"&&define.amd&&define("jquery",[],function(){return i}),du=n.jQuery,gu=n.$,i.noConflict=function(t){return n.$===i&&(n.$=gu),t&&n.jQuery===i&&(n.jQuery=du),i},typeof t===b&&(n.jQuery=n.$=i),i}),function(n,t,i){var e=n.L,r={},u,f;r.version="0.7.5";typeof module=="object"&&typeof module.exports=="object"?module.exports=r:typeof define=="function"&&define.amd&&define(r);r.noConflict=function(){return n.L=e,this};n.L=r;r.Util={extend:function(n){for(var u=Array.prototype.slice.call(arguments,1),t,r,i=0,f=u.length;i<f;i++){r=u[i]||{};for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t])}return n},bind:function(n,t){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return n.apply(t,i||arguments)}},stamp:function(){var t=0,n="_leaflet_id";return function(i){return i[n]=i[n]||++t,i[n]}}(),invokeEach:function(n,t,i){var r,u;if(typeof n=="object"){u=Array.prototype.slice.call(arguments,3);for(r in n)t.apply(i,[r,n[r]].concat(u));return!0}return!1},limitExecByInterval:function(n,t,i){var r,u;return function f(){var e=arguments;if(r){u=!0;return}r=!0;setTimeout(function(){r=!1;u&&(f.apply(i,e),u=!1)},t);n.apply(i,e)}},falseFn:function(){return!1},formatNum:function(n,t){var i=Math.pow(10,t||5);return Math.round(n*i)/i},trim:function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},splitWords:function(n){return r.Util.trim(n).split(/\s+/)},setOptions:function(n,t){return n.options=r.extend({},n.options,t),n.options},getParamString:function(n,t,i){var u=[];for(var r in n)u.push(encodeURIComponent(i?r.toUpperCase():r)+"="+encodeURIComponent(n[r]));return(!t||t.indexOf("?")===-1?"?":"&")+u.join("&")},template:function(n,t){return n.replace(/\{ *([\w_]+) *\}/g,function(n,r){var u=t[r];if(u===i)throw new Error("No value provided for variable "+n);else typeof u=="function"&&(u=u(t));return u})},isArray:Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){for(var r,u=["webkit","moz","o","ms"],i=0;i<u.length&&!r;i++)r=n[u[i]+t];return r}function u(t){var r=+new Date,u=Math.max(0,16-(r-i));return i=r+u,n.setTimeout(t,u)}var i=0,f=n.requestAnimationFrame||t("RequestAnimationFrame")||u,e=n.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){n.clearTimeout(t)};r.Util.requestAnimFrame=function(t,i,e,o){if(t=r.bind(t,i),e&&f===u)t();else return f.call(n,t,o)};r.Util.cancelAnimFrame=function(t){t&&e.call(n,t)}}();r.extend=r.Util.extend;r.bind=r.Util.bind;r.stamp=r.Util.stamp;r.setOptions=r.Util.setOptions;r.Class=function(){};r.Class.extend=function(n){var i=function(){this.initialize&&this.initialize.apply(this,arguments);this._initHooks&&this.callInitHooks()},e=function(){},t,u,f;e.prototype=this.prototype;t=new e;t.constructor=i;i.prototype=t;for(u in this)this.hasOwnProperty(u)&&u!=="prototype"&&(i[u]=this[u]);return n.statics&&(r.extend(i,n.statics),delete n.statics),n.includes&&(r.Util.extend.apply(null,[t].concat(n.includes)),delete n.includes),n.options&&t.options&&(n.options=r.extend({},t.options,n.options)),r.extend(t,n),t._initHooks=[],f=this,i.__super__=f.prototype,t.callInitHooks=function(){if(!this._initHooksCalled){f.prototype.callInitHooks&&f.prototype.callInitHooks.call(this);this._initHooksCalled=!0;for(var n=0,i=t._initHooks.length;n<i;n++)t._initHooks[n].call(this)}},i};r.Class.include=function(n){r.extend(this.prototype,n)};r.Class.mergeOptions=function(n){r.extend(this.prototype.options,n)};r.Class.addInitHook=function(n){var t=Array.prototype.slice.call(arguments,1),i=typeof n=="function"?n:function(){this[n].apply(this,t)};this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push(i)};u="_leaflet_events";r.Mixin={};r.Mixin.Events={addEventListener:function(n,t,i){if(r.Util.invokeEach(n,this.addEventListener,this,t,i))return this;var f=this[u]=this[u]||{},o=i&&i!==this&&r.stamp(i),s,v,l,e,h,a,c;for(n=r.Util.splitWords(n),s=0,v=n.length;s<v;s++)l={action:t,context:i||this},e=n[s],o?(h=e+"_idx",a=h+"_len",c=f[h]=f[h]||{},c[o]||(c[o]=[],f[a]=(f[a]||0)+1),c[o].push(l)):(f[e]=f[e]||[],f[e].push(l));return this},hasEventListeners:function(n){var t=this[u];return!!t&&(n in t&&t[n].length>0||n+"_idx"in t&&t[n+"_idx_len"]>0)},removeEventListener:function(n,t,i){if(!this[u])return this;if(!n)return this.clearAllEventListeners();if(r.Util.invokeEach(n,this.removeEventListener,this,t,i))return this;var e=this[u],a=i&&i!==this&&r.stamp(i),h,y,c,f,o,l,v,s,p;for(n=r.Util.splitWords(n),h=0,y=n.length;h<y;h++)if(c=n[h],l=c+"_idx",v=l+"_len",s=e[l],t){if(f=a&&s?s[a]:e[c],f){for(o=f.length-1;o>=0;o--)f[o].action!==t||i&&f[o].context!==i||(p=f.splice(o,1),p[0].action=r.Util.falseFn);i&&s&&f.length===0&&(delete s[a],e[v]--)}}else delete e[c],delete e[l],delete e[v];return this},clearAllEventListeners:function(){return delete this[u],this},fireEvent:function(n,t){if(!this.hasEventListeners(n))return this;var h=r.Util.extend({},t,{type:n,target:this}),o=this[u],f,i,e,s,c;if(o[n])for(f=o[n].slice(),i=0,e=f.length;i<e;i++)f[i].action.call(f[i].context,h);s=o[n+"_idx"];for(c in s)if(f=s[c].slice(),f)for(i=0,e=f.length;i<e;i++)f[i].action.call(f[i].context,h);return this},addOneTimeEventListener:function(n,t,i){if(r.Util.invokeEach(n,this.addOneTimeEventListener,this,t,i))return this;var u=r.bind(function(){this.removeEventListener(n,t,i).removeEventListener(n,u,i)},this);return this.addEventListener(n,t,i).addEventListener(n,u,i)}};r.Mixin.Events.on=r.Mixin.Events.addEventListener;r.Mixin.Events.off=r.Mixin.Events.removeEventListener;r.Mixin.Events.once=r.Mixin.Events.addOneTimeEventListener;r.Mixin.Events.fire=r.Mixin.Events.fireEvent,function(){var f="ActiveXObject"in n,b=f&&!t.addEventListener,u=navigator.userAgent.toLowerCase(),o=u.indexOf("webkit")!==-1,k=u.indexOf("chrome")!==-1,c=u.indexOf("phantom")!==-1,d=u.indexOf("android")!==-1,l=u.search("android [23]")!==-1,g=u.indexOf("gecko")!==-1,e=typeof orientation!=i+"",a=!n.PointerEvent&&n.MSPointerEvent,v=n.PointerEvent&&n.navigator.pointerEnabled&&n.navigator.maxTouchPoints||a,nt="devicePixelRatio"in n&&n.devicePixelRatio>1||"matchMedia"in n&&n.matchMedia("(min-resolution:144dpi)")&&n.matchMedia("(min-resolution:144dpi)").matches,s=t.documentElement,y=f&&"transition"in s.style,h="WebKitCSSMatrix"in n&&"m11"in new n.WebKitCSSMatrix&&!l,p="MozPerspective"in s.style,w="OTransition"in s.style,tt=!n.L_DISABLE_3D&&(y||h||p||w)&&!c,it=!n.L_NO_TOUCH&&!c&&(v||"ontouchstart"in n||n.DocumentTouch&&t instanceof n.DocumentTouch);r.Browser={ie:f,ielt9:b,webkit:o,gecko:g&&!o&&!n.opera&&!f,android:d,android23:l,chrome:k,ie3d:y,webkit3d:h,gecko3d:p,opera3d:w,any3d:tt,mobile:e,mobileWebkit:e&&o,mobileWebkit3d:e&&h,mobileOpera:e&&n.opera,touch:it,msPointer:a,pointer:v,retina:nt}}();r.Point=function(n,t,i){this.x=i?Math.round(n):n;this.y=i?Math.round(t):t};r.Point.prototype={clone:function(){return new r.Point(this.x,this.y)},add:function(n){return this.clone()._add(r.point(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(r.point(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(n){n=r.point(n);var t=n.x-this.x,i=n.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(n){return n=r.point(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=r.point(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+r.Util.formatNum(this.x)+", "+r.Util.formatNum(this.y)+")"}};r.point=function(n,t,u){return n instanceof r.Point?n:r.Util.isArray(n)?new r.Point(n[0],n[1]):n===i||n===null?n:new r.Point(n,t,u)};r.Bounds=function(n,t){var r,i,u;if(n)for(r=t?[n,t]:n,i=0,u=r.length;i<u;i++)this.extend(r[i])};r.Bounds.prototype={extend:function(n){return n=r.point(n),this.min||this.max?(this.min.x=Math.min(n.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(n.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=n.clone(),this.max=n.clone()),this},getCenter:function(n){return new r.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return new r.Point(this.min.x,this.max.y)},getTopRight:function(){return new r.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var t,i;return n=typeof n[0]=="number"||n instanceof r.Point?r.point(n):r.bounds(n),n instanceof r.Bounds?(t=n.min,i=n.max):t=i=n,t.x>=this.min.x&&i.x<=this.max.x&&t.y>=this.min.y&&i.y<=this.max.y},intersects:function(n){n=r.bounds(n);var t=this.min,i=this.max,u=n.min,f=n.max,e=f.x>=t.x&&u.x<=i.x,o=f.y>=t.y&&u.y<=i.y;return e&&o},isValid:function(){return!!(this.min&&this.max)}};r.bounds=function(n,t){return!n||n instanceof r.Bounds?n:new r.Bounds(n,t)};r.Transformation=function(n,t,i,r){this._a=n;this._b=t;this._c=i;this._d=r};r.Transformation.prototype={transform:function(n,t){return this._transform(n.clone(),t)},_transform:function(n,t){return t=t||1,n.x=t*(this._a*n.x+this._b),n.y=t*(this._c*n.y+this._d),n},untransform:function(n,t){return t=t||1,new r.Point((n.x/t-this._b)/this._a,(n.y/t-this._d)/this._c)}};r.DomUtil={get:function(n){return typeof n=="string"?t.getElementById(n):n},getStyle:function(n,i){var r=n.style[i],u;return!r&&n.currentStyle&&(r=n.currentStyle[i]),(!r||r==="auto")&&t.defaultView&&(u=t.defaultView.getComputedStyle(n,null),r=u?u[i]:null),r==="auto"?null:r},getViewportOffset:function(n){var u=0,f=0,i=n,e=t.body,s=t.documentElement,o;do{if(u+=i.offsetTop||0,f+=i.offsetLeft||0,u+=parseInt(r.DomUtil.getStyle(i,"borderTopWidth"),10)||0,f+=parseInt(r.DomUtil.getStyle(i,"borderLeftWidth"),10)||0,o=r.DomUtil.getStyle(i,"position"),i.offsetParent===e&&o==="absolute")break;if(o==="fixed"){u+=e.scrollTop||s.scrollTop||0;f+=e.scrollLeft||s.scrollLeft||0;break}if(o==="relative"&&!i.offsetLeft){var c=r.DomUtil.getStyle(i,"width"),l=r.DomUtil.getStyle(i,"max-width"),h=i.getBoundingClientRect();(c!=="none"||l!=="none")&&(f+=h.left+i.clientLeft);u+=h.top+(e.scrollTop||s.scrollTop||0);break}i=i.offsetParent}while(i);i=n;do{if(i===e)break;u-=i.scrollTop||0;f-=i.scrollLeft||0;i=i.parentNode}while(i);return new r.Point(f,u)},documentIsLtr:function(){return r.DomUtil._docIsLtrCached||(r.DomUtil._docIsLtrCached=!0,r.DomUtil._docIsLtr=r.DomUtil.getStyle(t.body,"direction")==="ltr"),r.DomUtil._docIsLtr},create:function(n,i,r){var u=t.createElement(n);return u.className=i,r&&r.appendChild(u),u},hasClass:function(n,t){if(n.classList!==i)return n.classList.contains(t);var u=r.DomUtil._getClass(n);return u.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(u)},addClass:function(n,t){var f,u,o,e;if(n.classList!==i)for(f=r.Util.splitWords(t),u=0,o=f.length;u<o;u++)n.classList.add(f[u]);else r.DomUtil.hasClass(n,t)||(e=r.DomUtil._getClass(n),r.DomUtil._setClass(n,(e?e+" ":"")+t))},removeClass:function(n,t){n.classList!==i?n.classList.remove(t):r.DomUtil._setClass(n,r.Util.trim((" "+r.DomUtil._getClass(n)+" ").replace(" "+t+" "," ")))},_setClass:function(n,t){n.className.baseVal===i?n.className=t:n.className.baseVal=t},_getClass:function(n){return n.className.baseVal===i?n.className:n.className.baseVal},setOpacity:function(n,t){if("opacity"in n.style)n.style.opacity=t;else if("filter"in n.style){var i=!1,r="DXImageTransform.Microsoft.Alpha";try{i=n.filters.item(r)}catch(u){if(t===1)return}t=Math.round(t*100);i?(i.Enabled=t!==100,i.Opacity=t):n.style.filter+=" progid:"+r+"(opacity="+t+")"}},testProp:function(n){for(var r=t.documentElement.style,i=0;i<n.length;i++)if(n[i]in r)return n[i];return!1},getTranslateString:function(n){var t=r.Browser.webkit3d,i="translate"+(t?"3d":"")+"(",u=(t?",0":"")+")";return i+n.x+"px,"+n.y+"px"+u},getScaleString:function(n,t){var i=r.DomUtil.getTranslateString(t.add(t.multiplyBy(-1*n))),u=" scale("+n+") ";return i+u},setPosition:function(n,t,i){n._leaflet_pos=t;!i&&r.Browser.any3d?n.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(t):(n.style.left=t.x+"px",n.style.top=t.y+"px")},getPosition:function(n){return n._leaflet_pos}};r.DomUtil.TRANSFORM=r.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);r.DomUtil.TRANSITION=r.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);r.DomUtil.TRANSITION_END=r.DomUtil.TRANSITION==="webkitTransition"||r.DomUtil.TRANSITION==="OTransition"?r.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in t)r.extend(r.DomUtil,{disableTextSelection:function(){r.DomEvent.on(n,"selectstart",r.DomEvent.preventDefault)},enableTextSelection:function(){r.DomEvent.off(n,"selectstart",r.DomEvent.preventDefault)}});else{var i=r.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);r.extend(r.DomUtil,{disableTextSelection:function(){if(i){var n=t.documentElement.style;this._userSelect=n[i];n[i]="none"}},enableTextSelection:function(){i&&(t.documentElement.style[i]=this._userSelect,delete this._userSelect)}})}r.extend(r.DomUtil,{disableImageDrag:function(){r.DomEvent.on(n,"dragstart",r.DomEvent.preventDefault)},enableImageDrag:function(){r.DomEvent.off(n,"dragstart",r.DomEvent.preventDefault)}})}();r.LatLng=function(n,t,r){if(n=parseFloat(n),t=parseFloat(t),isNaN(n)||isNaN(t))throw new Error("Invalid LatLng object: ("+n+", "+t+")");this.lat=n;this.lng=t;r!==i&&(this.alt=parseFloat(r))};r.extend(r.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9});r.LatLng.prototype={equals:function(n){if(!n)return!1;n=r.latLng(n);var t=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return t<=r.LatLng.MAX_MARGIN},toString:function(n){return"LatLng("+r.Util.formatNum(this.lat,n)+", "+r.Util.formatNum(this.lng,n)+")"},distanceTo:function(n){n=r.latLng(n);var t=r.LatLng.DEG_TO_RAD,e=(n.lat-this.lat)*t,o=(n.lng-this.lng)*t,s=this.lat*t,h=n.lat*t,i=Math.sin(e/2),u=Math.sin(o/2),f=i*i+u*u*Math.cos(s)*Math.cos(h);return 12756274*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))},wrap:function(n,t){var i=this.lng;return n=n||-180,t=t||180,i=(i+t)%(t-n)+(i<n||i===t?t:n),new r.LatLng(this.lat,i)}};r.latLng=function(n,t){return n instanceof r.LatLng?n:r.Util.isArray(n)?typeof n[0]=="number"||typeof n[0]=="string"?new r.LatLng(n[0],n[1],n[2]):null:n===i||n===null?n:typeof n=="object"&&"lat"in n?new r.LatLng(n.lat,"lng"in n?n.lng:n.lon):t===i?null:new r.LatLng(n,t)};r.LatLngBounds=function(n,t){var r,i,u;if(n)for(r=t?[n,t]:n,i=0,u=r.length;i<u;i++)this.extend(r[i])};r.LatLngBounds.prototype={extend:function(n){if(!n)return this;var t=r.latLng(n);return n=t!==null?t:r.latLngBounds(n),n instanceof r.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(n.lat,this._southWest.lat),this._southWest.lng=Math.min(n.lng,this._southWest.lng),this._northEast.lat=Math.max(n.lat,this._northEast.lat),this._northEast.lng=Math.max(n.lng,this._northEast.lng)):(this._southWest=new r.LatLng(n.lat,n.lng),this._northEast=new r.LatLng(n.lat,n.lng)):n instanceof r.LatLngBounds&&(this.extend(n._southWest),this.extend(n._northEast)),this},pad:function(n){var t=this._southWest,i=this._northEast,u=Math.abs(t.lat-i.lat)*n,f=Math.abs(t.lng-i.lng)*n;return new r.LatLngBounds(new r.LatLng(t.lat-u,t.lng-f),new r.LatLng(i.lat+u,i.lng+f))},getCenter:function(){return new r.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new r.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new r.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){n=typeof n[0]=="number"||n instanceof r.LatLng?r.latLng(n):r.latLngBounds(n);var u=this._southWest,f=this._northEast,t,i;return n instanceof r.LatLngBounds?(t=n.getSouthWest(),i=n.getNorthEast()):t=i=n,t.lat>=u.lat&&i.lat<=f.lat&&t.lng>=u.lng&&i.lng<=f.lng},intersects:function(n){n=r.latLngBounds(n);var t=this._southWest,i=this._northEast,u=n.getSouthWest(),f=n.getNorthEast(),e=f.lat>=t.lat&&u.lat<=i.lat,o=f.lng>=t.lng&&u.lng<=i.lng;return e&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n){return n?(n=r.latLngBounds(n),this._southWest.equals(n.getSouthWest())&&this._northEast.equals(n.getNorthEast())):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};r.latLngBounds=function(n,t){return!n||n instanceof r.LatLngBounds?n:new r.LatLngBounds(n,t)};r.Projection={};r.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(n){var i=r.LatLng.DEG_TO_RAD,u=this.MAX_LATITUDE,f=Math.max(Math.min(u,n.lat),-u),e=n.lng*i,t=f*i;return t=Math.log(Math.tan(Math.PI/4+t/2)),new r.Point(e,t)},unproject:function(n){var t=r.LatLng.RAD_TO_DEG,i=n.x*t,u=(2*Math.atan(Math.exp(n.y))-Math.PI/2)*t;return new r.LatLng(u,i)}};r.Projection.LonLat={project:function(n){return new r.Point(n.lng,n.lat)},unproject:function(n){return new r.LatLng(n.y,n.x)}};r.CRS={latLngToPoint:function(n,t){var i=this.projection.project(n),r=this.scale(t);return this.transformation._transform(i,r)},pointToLatLng:function(n,t){var i=this.scale(t),r=this.transformation.untransform(n,i);return this.projection.unproject(r)},project:function(n){return this.projection.project(n)},scale:function(n){return 256*Math.pow(2,n)},getSize:function(n){var t=this.scale(n);return r.point(t,t)}};r.CRS.Simple=r.extend({},r.CRS,{projection:r.Projection.LonLat,transformation:new r.Transformation(1,0,-1,0),scale:function(n){return Math.pow(2,n)}});r.CRS.EPSG3857=r.extend({},r.CRS,{code:"EPSG:3857",projection:r.Projection.SphericalMercator,transformation:new r.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(n){var t=this.projection.project(n);return t.multiplyBy(6378137)}});r.CRS.EPSG900913=r.extend({},r.CRS.EPSG3857,{code:"EPSG:900913"});r.CRS.EPSG4326=r.extend({},r.CRS,{code:"EPSG:4326",projection:r.Projection.LonLat,transformation:new r.Transformation(1/360,.5,-1/360,.5)});r.Map=r.Class.extend({includes:r.Mixin.Events,options:{crs:r.CRS.EPSG3857,fadeAnimation:r.DomUtil.TRANSITION&&!r.Browser.android23,trackResize:!0,markerZoomAnimation:r.DomUtil.TRANSITION&&r.Browser.any3d},initialize:function(n,t){t=r.setOptions(this,t);this._initContainer(n);this._initLayout();this._onResize=r.bind(this._onResize,this);this._initEvents();t.maxBounds&&this.setMaxBounds(t.maxBounds);t.center&&t.zoom!==i&&this.setView(r.latLng(t.center),t.zoom,{reset:!0});this._handlers=[];this._layers={};this._zoomBoundLayers={};this._tileLayersNum=0;this.callInitHooks();this._addLayers(t.layers)},setView:function(n,t){return t=t===i?this.getZoom():t,this._resetView(r.latLng(n),this._limitZoom(t)),this},setZoom:function(n,t){return this._loaded?this.setView(this.getCenter(),n,{zoom:t}):(this._zoom=this._limitZoom(n),this)},zoomIn:function(n,t){return this.setZoom(this._zoom+(n||1),t)},zoomOut:function(n,t){return this.setZoom(this._zoom-(n||1),t)},setZoomAround:function(n,t,i){var f=this.getZoomScale(t),u=this.getSize().divideBy(2),e=n instanceof r.Point?n:this.latLngToContainerPoint(n),o=e.subtract(u).multiplyBy(1-1/f),s=this.containerPointToLatLng(u.add(o));return this.setView(s,t,{zoom:i})},fitBounds:function(n,t){t=t||{};n=n.getBounds?n.getBounds():r.latLngBounds(n);var u=r.point(t.paddingTopLeft||t.padding||[0,0]),f=r.point(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(n,!1,u.add(f));i=t.maxZoom?Math.min(t.maxZoom,i):i;var e=f.subtract(u).divideBy(2),o=this.project(n.getSouthWest(),i),s=this.project(n.getNorthEast(),i),h=this.unproject(o.add(s).divideBy(2).add(e),i);return this.setView(h,i,t)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,t){return this.setView(n,this._zoom,{pan:t})},panBy:function(n){return this.fire("movestart"),this._rawPanBy(r.point(n)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(n){if(n=r.latLngBounds(n),this.options.maxBounds=n,!n)return this.off("moveend",this._panInsideMaxBounds,this);this._loaded&&this._panInsideMaxBounds();return this.on("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(n,t){var i=this.getCenter(),r=this._limitCenter(i,this._zoom,n);return i.equals(r)?this:this.panTo(r,t)},addLayer:function(n){var t=r.stamp(n);if(this._layers[t])return this;if(this._layers[t]=n,!n.options||isNaN(n.options.maxZoom)&&isNaN(n.options.minZoom)||(this._zoomBoundLayers[t]=n,this._updateZoomLevels()),this.options.zoomAnimation&&r.TileLayer&&n instanceof r.TileLayer){this._tileLayersNum++;this._tileLayersToLoad++;n.on("load",this._onTileLayerLoad,this)}return this._loaded&&this._layerAdd(n),this},removeLayer:function(n){var t=r.stamp(n);if(!this._layers[t])return this;if(this._loaded)n.onRemove(this);return delete this._layers[t],this._loaded&&this.fire("layerremove",{layer:n}),this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels()),this.options.zoomAnimation&&r.TileLayer&&n instanceof r.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,n.off("load",this._onTileLayerLoad,this)),this},hasLayer:function(n){return n?r.stamp(n)in this._layers:!1},eachLayer:function(n,t){for(var i in this._layers)n.call(t,this._layers[i]);return this},invalidateSize:function(n){var i;if(!this._loaded)return this;n=r.extend({animate:!1,pan:!0},n===!0?{animate:!0}:n);i=this.getSize();this._sizeChanged=!0;this._initialCenter=null;var u=this.getSize(),f=i.divideBy(2).round(),e=u.divideBy(2).round(),t=f.subtract(e);return!t.x&&!t.y?this:(n.animate&&n.pan?this.panBy(t):(n.pan&&this._rawPanBy(t),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:u}))},addHandler:function(n,t){if(!t)return this;var i=this[n]=new t(this);return this._handlers.push(i),this.options[n]&&i.enable(),this},remove:function(){this._loaded&&this.fire("unload");this._initEvents("off");try{delete this._container._leaflet}catch(n){this._container._leaflet=i}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return(this._checkIfLoaded(),this._initialCenter&&!this._moved())?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),t=this.unproject(n.getBottomLeft()),i=this.unproject(n.getTopRight());return new r.LatLngBounds(t,i)},getMinZoom:function(){return this.options.minZoom===i?this._layersMinZoom===i?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===i?this._layersMaxZoom===i?Infinity:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,t,i){n=r.latLngBounds(n);var u=this.getMinZoom()-(t?1:0),s=this.getMaxZoom(),e=this.getSize(),h=n.getNorthWest(),c=n.getSouthEast(),o=!0,f;i=r.point(i||[0,0]);do u++,f=this.project(c,u).subtract(this.project(h,u)).add(i),o=t?f.x<e.x||f.y<e.y:e.contains(f);while(o&&u<=s);return o&&t?null:t?u:u-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new r.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var n=this._getTopLeftPoint();return new r.Bounds(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n){var t=this.options.crs;return t.scale(n)/t.scale(this._zoom)},getScaleZoom:function(n){return this._zoom+Math.log(n)/Math.LN2},project:function(n,t){return t=t===i?this._zoom:t,this.options.crs.latLngToPoint(r.latLng(n),t)},unproject:function(n,t){return t=t===i?this._zoom:t,this.options.crs.pointToLatLng(r.point(n),t)},layerPointToLatLng:function(n){var t=r.point(n).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(n){var t=this.project(r.latLng(n))._round();return t._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(n){return r.point(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return r.point(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var t=this.containerPointToLayerPoint(r.point(n));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(r.latLng(n)))},mouseEventToContainerPoint:function(n){return r.DomEvent.getMousePosition(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var t=this._container=r.DomUtil.get(n);if(t){if(t._leaflet)throw new Error("Map container is already initialized.");}else throw new Error("Map container not found.");t._leaflet=!0},_initLayout:function(){var t=this._container,n;r.DomUtil.addClass(t,"leaflet-container"+(r.Browser.touch?" leaflet-touch":"")+(r.Browser.retina?" leaflet-retina":"")+(r.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));n=r.DomUtil.getStyle(t,"position");n!=="absolute"&&n!=="relative"&&n!=="fixed"&&(t.style.position="relative");this._initPanes();this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={},t;this._mapPane=n.mapPane=this._createPane("leaflet-map-pane",this._container);this._tilePane=n.tilePane=this._createPane("leaflet-tile-pane",this._mapPane);n.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane);n.shadowPane=this._createPane("leaflet-shadow-pane");n.overlayPane=this._createPane("leaflet-overlay-pane");n.markerPane=this._createPane("leaflet-marker-pane");n.popupPane=this._createPane("leaflet-popup-pane");t=" leaflet-zoom-hide";this.options.markerZoomAnimation||(r.DomUtil.addClass(n.markerPane,t),r.DomUtil.addClass(n.shadowPane,t),r.DomUtil.addClass(n.popupPane,t))},_createPane:function(n,t){return r.DomUtil.create("div",n,t||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(n){n=n?r.Util.isArray(n)?n:[n]:[];for(var t=0,i=n.length;t<i;t++)this.addLayer(n[t])},_resetView:function(n,t,i,u){var f=this._zoom!==t,e;u||(this.fire("movestart"),f&&this.fire("zoomstart"));this._zoom=t;this._initialCenter=n;this._initialTopLeftPoint=this._getNewTopLeftPoint(n);i?this._initialTopLeftPoint._add(this._getMapPanePos()):r.DomUtil.setPosition(this._mapPane,new r.Point(0,0));this._tileLayersToLoad=this._tileLayersNum;e=!this._loaded;this._loaded=!0;this.fire("viewreset",{hard:!i});e&&(this.fire("load"),this.eachLayer(this._layerAdd,this));this.fire("move");(f||u)&&this.fire("zoomend");this.fire("moveend",{hard:!i})},_rawPanBy:function(n){r.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,r=Infinity,u=-Infinity,f=this._getZoomSpan(),n;for(t in this._zoomBoundLayers)n=this._zoomBoundLayers[t],isNaN(n.options.minZoom)||(r=Math.min(r,n.options.minZoom)),isNaN(n.options.maxZoom)||(u=Math.max(u,n.options.maxZoom));t===i?this._layersMaxZoom=this._layersMinZoom=i:(this._layersMaxZoom=u,this._layersMinZoom=r);f!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.");},_initEvents:function(t){if(r.DomEvent){t=t||"on";r.DomEvent[t](this._container,"click",this._onMouseClick,this);for(var u=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"],i=0,f=u.length;i<f;i++)r.DomEvent[t](this._container,u[i],this._fireMouseEvent,this);this.options.trackResize&&r.DomEvent[t](n,"resize",this._onResize,this)}},_onResize:function(){r.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=r.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(n){!this._loaded||!n._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||r.DomEvent._skipped(n)||(this.fire("preclick"),this._fireMouseEvent(n))},_fireMouseEvent:function(n){var t;if(this._loaded&&!r.DomEvent._skipped(n)&&(t=n.type,t=t==="mouseenter"?"mouseover":t==="mouseleave"?"mouseout":t,this.hasEventListeners(t))){t==="contextmenu"&&r.DomEvent.preventDefault(n);var i=this.mouseEventToContainerPoint(n),u=this.containerPointToLayerPoint(i),f=this.layerPointToLatLng(u);this.fire(t,{latlng:f,layerPoint:u,containerPoint:i,originalEvent:n})}},_onTileLayerLoad:function(){this._tileLayersToLoad--;this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var n=0,t=this._handlers.length;n<t;n++)this._handlers[n].disable()},whenReady:function(n,t){if(this._loaded)n.call(t||this,this);else this.on("load",n,t);return this},_layerAdd:function(n){n.onAdd(this);this.fire("layeradd",{layer:n})},_getMapPanePos:function(){return r.DomUtil.getPosition(this._mapPane)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(n,t){var i=this.getSize()._divideBy(2);return this.project(n,t)._subtract(i)._round()},_latLngToNewLayerPoint:function(n,t,i){var r=this._getNewTopLeftPoint(i,t).add(this._getMapPanePos());return this.project(n,t)._subtract(r)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,t,i){if(!i)return n;var u=this.project(n,t),f=this.getSize().divideBy(2),e=new r.Bounds(u.subtract(f),u.add(f)),o=this._getBoundsOffset(e,i,t);return this.unproject(u.add(o),t)},_limitOffset:function(n,t){if(!t)return n;var i=this.getPixelBounds(),u=new r.Bounds(i.min.add(n),i.max.add(n));return n.add(this._getBoundsOffset(u,t))},_getBoundsOffset:function(n,t,i){var u=this.project(t.getNorthWest(),i).subtract(n.min),f=this.project(t.getSouthEast(),i).subtract(n.max),e=this._rebound(u.x,-f.x),o=this._rebound(u.y,-f.y);return new r.Point(e,o)},_rebound:function(n,t){return n+t>0?Math.round(n-t)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(t))},_limitZoom:function(n){var t=this.getMinZoom(),i=this.getMaxZoom();return Math.max(t,Math.min(i,n))}});r.map=function(n,t){return new r.Map(n,t)};r.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.3142451793,R_MAJOR:6378137,project:function(n){var f=r.LatLng.DEG_TO_RAD,e=this.MAX_LATITUDE,c=Math.max(Math.min(e,n.lat),-e),u=this.R_MAJOR,l=this.R_MINOR,a=n.lng*f*u,t=c*f,o=l/u,s=Math.sqrt(1-o*o),i=s*Math.sin(t),h;return i=Math.pow((1-i)/(1+i),s*.5),h=Math.tan(.5*(Math.PI*.5-t))/i,t=-u*Math.log(h),new r.Point(a,t)},unproject:function(n){for(var e=r.LatLng.RAD_TO_DEG,i=this.R_MAJOR,c=this.R_MINOR,l=n.x*e/i,o=c/i,s=Math.sqrt(1-o*o),h=Math.exp(-n.y/i),t=Math.PI/2-2*Math.atan(h),a=15,u=.1,f;Math.abs(u)>1e-7&&--a>0;)f=s*Math.sin(t),u=Math.PI/2-2*Math.atan(h*Math.pow((1-f)/(1+f),.5*s))-t,t+=u;return new r.LatLng(t*e,l)}};r.CRS.EPSG3395=r.extend({},r.CRS,{code:"EPSG:3395",projection:r.Projection.Mercator,transformation:function(){var t=r.Projection.Mercator,i=t.R_MAJOR,n=.5/(Math.PI*i);return new r.Transformation(n,.5,-n,.5)}()});r.TileLayer=r.Class.extend({includes:r.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:r.Browser.mobile,updateWhenIdle:r.Browser.mobile},initialize:function(n,t){t=r.setOptions(this,t);t.detectRetina&&r.Browser.retina&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomOffset++,t.minZoom>0&&t.minZoom--,this.options.maxZoom--);t.bounds&&(t.bounds=r.latLngBounds(t.bounds));this._url=n;var i=this.options.subdomains;typeof i=="string"&&(this.options.subdomains=i.split(""))},onAdd:function(n){this._map=n;this._animated=n._zoomAnimated;this._initContainer();n.on({viewreset:this._reset,moveend:this._update},this);if(this._animated)n.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this);if(!this.options.updateWhenIdle){this._limitedUpdate=r.Util.limitExecByInterval(this._update,150,this);n.on("move",this._limitedUpdate,this)}this._reset();this._update()},addTo:function(n){return n.addLayer(this),this},onRemove:function(n){this._container.parentNode.removeChild(this._container);n.off({viewreset:this._reset,moveend:this._update},this);this._animated&&n.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this);this.options.updateWhenIdle||n.off("move",this._limitedUpdate,this);this._container=null;this._map=null},bringToFront:function(){var n=this._map._panes.tilePane;return this._container&&(n.appendChild(this._container),this._setAutoZIndex(n,Math.max)),this},bringToBack:function(){var n=this._map._panes.tilePane;return this._container&&(n.insertBefore(this._container,n.firstChild),this._setAutoZIndex(n,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},setUrl:function(n,t){return this._url=n,t||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n,t){for(var u=n.children,r=-t(Infinity,-Infinity),f,i=0,e=u.length;i<e;i++)u[i]!==this._container&&(f=parseInt(u[i].style.zIndex,10),isNaN(f)||(r=t(r,f)));this.options.zIndex=this._container.style.zIndex=(isFinite(r)?r:0)+t(1,-1)},_updateOpacity:function(){var n,t=this._tiles;if(r.Browser.ielt9)for(n in t)r.DomUtil.setOpacity(t[n],this.options.opacity);else r.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane,n;this._container||(this._container=r.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated?(n="leaflet-tile-container",this._bgBuffer=r.DomUtil.create("div",n,this._container),this._tileContainer=r.DomUtil.create("div",n,this._container)):this._tileContainer=this._container,t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity())},_reset:function(n){for(var t in this._tiles)this.fire("tileunload",{tile:this._tiles[t]});this._tiles={};this._tilesToLoad=0;this.options.reuseTiles&&(this._unusedTiles=[]);this._tileContainer.innerHTML="";this._animated&&n&&n.hard&&this._clearBgBuffer();this._initContainer()},_getTileSize:function(){var n=this._map,r=n.getZoom()+this.options.zoomOffset,t=this.options.maxNativeZoom,i=this.options.tileSize;return t&&r>t&&(i=Math.round(n.getZoomScale(r)/n.getZoomScale(t)*i)),i},_update:function(){var n;if(this._map){var t=this._map,i=t.getPixelBounds(),u=t.getZoom(),f=this._getTileSize();u>this.options.maxZoom||u<this.options.minZoom||(n=r.bounds(i.min.divideBy(f)._floor(),i.max.divideBy(f)._floor()),this._addTilesFromCenterOut(n),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(n))}},_addTilesFromCenterOut:function(n){for(var u=[],h=n.getCenter(),i,o,e,s,f=n.min.y;f<=n.max.y;f++)for(i=n.min.x;i<=n.max.x;i++)o=new r.Point(i,f),this._tileShouldBeLoaded(o)&&u.push(o);if(e=u.length,e!==0){for(u.sort(function(n,t){return n.distanceTo(h)-t.distanceTo(h)}),s=t.createDocumentFragment(),this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=e,i=0;i<e;i++)this._addTile(u[i],s);this._tileContainer.appendChild(s)}},_tileShouldBeLoaded:function(n){var t,i;if(n.x+":"+n.y in this._tiles||(t=this.options,!t.continuousWorld&&(i=this._getWrapTileNum(),t.noWrap&&(n.x<0||n.x>=i.x)||n.y<0||n.y>=i.y)))return!1;if(t.bounds){var r=this._getTileSize(),e=n.multiplyBy(r),o=e.add([r,r]),u=this._map.unproject(e),f=this._map.unproject(o);if(t.continuousWorld||t.noWrap||(u=u.wrap(),f=f.wrap()),!t.bounds.intersects([u,f]))return!1}return!0},_removeOtherTiles:function(n){var t,i,r;for(var u in this._tiles)t=u.split(":"),i=parseInt(t[0],10),r=parseInt(t[1],10),(i<n.min.x||i>n.max.x||r<n.min.y||r>n.max.y)&&this._removeTile(u)},_removeTile:function(n){var t=this._tiles[n];this.fire("tileunload",{tile:t,url:t.src});this.options.reuseTiles?(r.DomUtil.removeClass(t,"leaflet-tile-loaded"),this._unusedTiles.push(t)):t.parentNode===this._tileContainer&&this._tileContainer.removeChild(t);r.Browser.android||(t.onload=null,t.src=r.Util.emptyImageUrl);delete this._tiles[n]},_addTile:function(n,t){var u=this._getTilePos(n),i=this._getTile();r.DomUtil.setPosition(i,u,r.Browser.chrome);this._tiles[n.x+":"+n.y]=i;this._loadTile(i,n);i.parentNode!==this._tileContainer&&t.appendChild(i)},_getZoomForUrl:function(){var n=this.options,t=this._map.getZoom();return n.zoomReverse&&(t=n.maxZoom-t),t+=n.zoomOffset,n.maxNativeZoom?Math.min(t,n.maxNativeZoom):t},_getTilePos:function(n){var t=this._map.getPixelOrigin(),i=this._getTileSize();return n.multiplyBy(i).subtract(t)},getTileUrl:function(n){return r.Util.template(this._url,r.extend({s:this._getSubdomain(n),z:n.z,x:n.x,y:n.y},this.options))},_getWrapTileNum:function(){var n=this._map.options.crs,t=n.getSize(this._map.getZoom());return t.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(n){var t=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(n.x=(n.x%t.x+t.x)%t.x);this.options.tms&&(n.y=t.y-n.y-1);n.z=this._getZoomForUrl()},_getSubdomain:function(n){var t=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[t]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var n=this._unusedTiles.pop();return this._resetTile(n),n}return this._createTile()},_resetTile:function(){},_createTile:function(){var n=r.DomUtil.create("img","leaflet-tile");return n.style.width=n.style.height=this._getTileSize()+"px",n.galleryimg="no",n.onselectstart=n.onmousemove=r.Util.falseFn,r.Browser.ielt9&&this.options.opacity!==i&&r.DomUtil.setOpacity(n,this.options.opacity),r.Browser.mobileWebkit3d&&(n.style.WebkitBackfaceVisibility="hidden"),n},_loadTile:function(n,t){n._layer=this;n.onload=this._tileOnLoad;n.onerror=this._tileOnError;this._adjustTilePoint(t);n.src=this.getTileUrl(t);this.fire("tileloadstart",{tile:n,url:n.src})},_tileLoaded:function(){this._tilesToLoad--;this._animated&&r.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated");this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(r.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var n=this._layer;this.src!==r.Util.emptyImageUrl&&(r.DomUtil.addClass(this,"leaflet-tile-loaded"),n.fire("tileload",{tile:this,url:this.src}));n._tileLoaded()},_tileOnError:function(){var n=this._layer,t;n.fire("tileerror",{tile:this,url:this.src});t=n.options.errorTileUrl;t&&(this.src=t);n._tileLoaded()}});r.tileLayer=function(n,t){return new r.TileLayer(n,t)};r.TileLayer.WMS=r.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(n,t){var i,f,u;this._url=n;i=r.extend({},this.defaultWmsParams);f=t.tileSize||this.options.tileSize;i.width=t.detectRetina&&r.Browser.retina?i.height=f*2:i.height=f;for(u in t)this.options.hasOwnProperty(u)||u==="crs"||(i[u]=t[u]);this.wmsParams=i;r.setOptions(this,t)},onAdd:function(n){this._crs=this.options.crs||n.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code;r.TileLayer.prototype.onAdd.call(this,n)},getTileUrl:function(n){var f=this._map,u=this.options.tileSize,e=n.multiplyBy(u),s=e.add([u,u]),t=this._crs.project(f.unproject(e,n.z)),i=this._crs.project(f.unproject(s,n.z)),h=this._wmsVersion>=1.3&&this._crs===r.CRS.EPSG4326?[i.y,t.x,t.y,i.x].join(","):[t.x,i.y,i.x,t.y].join(","),o=r.Util.template(this._url,{s:this._getSubdomain(n)});return o+r.Util.getParamString(this.wmsParams,o,!0)+"&BBOX="+h},setParams:function(n,t){return r.extend(this.wmsParams,n),t||this.redraw(),this}});r.tileLayer.wms=function(n,t){return new r.TileLayer.WMS(n,t)};r.TileLayer.Canvas=r.TileLayer.extend({options:{async:!1},initialize:function(n){r.setOptions(this,n)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var n in this._tiles)this._redrawTile(this._tiles[n]);return this},_redrawTile:function(n){this.drawTile(n,n._tilePoint,this._map._zoom)},_createTile:function(){var n=r.DomUtil.create("canvas","leaflet-tile");return n.width=n.height=this.options.tileSize,n.onselectstart=n.onmousemove=r.Util.falseFn,n},_loadTile:function(n,t){n._layer=this;n._tilePoint=t;this._redrawTile(n);this.options.async||this.tileDrawn(n)},drawTile:function(){},tileDrawn:function(n){this._tileOnLoad.call(n)}});r.tileLayer.canvas=function(n){return new r.TileLayer.Canvas(n)};r.ImageOverlay=r.Class.extend({includes:r.Mixin.Events,options:{opacity:1},initialize:function(n,t,i){this._url=n;this._bounds=r.latLngBounds(t);r.setOptions(this,i)},onAdd:function(n){this._map=n;this._image||this._initImage();n._panes.overlayPane.appendChild(this._image);n.on("viewreset",this._reset,this);if(n.options.zoomAnimation&&r.Browser.any3d)n.on("zoomanim",this._animateZoom,this);this._reset()},onRemove:function(n){n.getPanes().overlayPane.removeChild(this._image);n.off("viewreset",this._reset,this);n.options.zoomAnimation&&n.off("zoomanim",this._animateZoom,this)},addTo:function(n){return n.addLayer(this),this},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var n=this._map._panes.overlayPane;return this._image&&n.insertBefore(this._image,n.firstChild),this},setUrl:function(n){this._url=n;this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=r.DomUtil.create("img","leaflet-image-layer");this._map.options.zoomAnimation&&r.Browser.any3d?r.DomUtil.addClass(this._image,"leaflet-zoom-animated"):r.DomUtil.addClass(this._image,"leaflet-zoom-hide");this._updateOpacity();r.extend(this._image,{galleryimg:"no",onselectstart:r.Util.falseFn,onmousemove:r.Util.falseFn,onload:r.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(n){var t=this._map,f=this._image,i=t.getZoomScale(n.zoom),e=this._bounds.getNorthWest(),o=this._bounds.getSouthEast(),u=t._latLngToNewLayerPoint(e,n.zoom,n.center),s=t._latLngToNewLayerPoint(o,n.zoom,n.center)._subtract(u),h=u._add(s._multiplyBy(1/2*(1-1/i)));f.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(h)+" scale("+i+") "},_reset:function(){var n=this._image,t=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(t);r.DomUtil.setPosition(n,t);n.style.width=i.x+"px";n.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){r.DomUtil.setOpacity(this._image,this.options.opacity)}});r.imageOverlay=function(n,t,i){return new r.ImageOverlay(n,t,i)};r.Icon=r.Class.extend({options:{className:""},initialize:function(n){r.setOptions(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,t){var i=this._getIconUrl(n),r;if(!i){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}return r=t&&t.tagName==="IMG"?this._createImg(i,t):this._createImg(i),this._setIconStyles(r,n),r},_setIconStyles:function(n,t){var u=this.options,f=r.point(u[t+"Size"]),i;i=t==="shadow"?r.point(u.shadowAnchor||u.iconAnchor):r.point(u.iconAnchor);!i&&f&&(i=f.divideBy(2,!0));n.className="leaflet-marker-"+t+" "+u.className;i&&(n.style.marginLeft=-i.x+"px",n.style.marginTop=-i.y+"px");f&&(n.style.width=f.x+"px",n.style.height=f.y+"px")},_createImg:function(n,i){return i=i||t.createElement("img"),i.src=n,i},_getIconUrl:function(n){return r.Browser.retina&&this.options[n+"RetinaUrl"]?this.options[n+"RetinaUrl"]:this.options[n+"Url"]}});r.icon=function(n){return new r.Icon(n)};r.Icon.Default=r.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(n){var i=n+"Url",t;if(this.options[i])return this.options[i];if(r.Browser.retina&&n==="icon"&&(n+="-2x"),t=r.Icon.Default.imagePath,!t)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return t+"/marker-"+n+".png"}});r.Icon.Default.imagePath=function(){for(var u=t.getElementsByTagName("script"),f=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/,i,o,r,n=0,e=u.length;n<e;n++)if(i=u[n].src,o=i.match(f),o)return r=i.split(f)[0],(r?r+"/":"")+"images"}();r.Marker=r.Class.extend({includes:r.Mixin.Events,options:{icon:new r.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(n,t){r.setOptions(this,t);this._latlng=r.latLng(n)},onAdd:function(n){this._map=n;n.on("viewreset",this.update,this);if(this._initIcon(),this.update(),this.fire("add"),n.options.zoomAnimation&&n.options.markerZoomAnimation)n.on("zoomanim",this._animateZoom,this)},addTo:function(n){return n.addLayer(this),this},onRemove:function(n){this.dragging&&this.dragging.disable();this._removeIcon();this._removeShadow();this.fire("remove");n.off({viewreset:this.update,zoomanim:this._animateZoom},this);this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=r.latLng(n),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update(),this},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var n=this.options,e=this._map,h=e.options.zoomAnimation&&e.options.markerZoomAnimation,o=h?"leaflet-zoom-animated":"leaflet-zoom-hide",t=n.icon.createIcon(this._icon),s=!1,i,u,f;if(t!==this._icon&&(this._icon&&this._removeIcon(),s=!0,n.title&&(t.title=n.title),n.alt&&(t.alt=n.alt)),r.DomUtil.addClass(t,o),n.keyboard&&(t.tabIndex="0"),this._icon=t,this._initInteraction(),n.riseOnHover)r.DomEvent.on(t,"mouseover",this._bringToFront,this).on(t,"mouseout",this._resetZIndex,this);i=n.icon.createShadow(this._shadow);u=!1;i!==this._shadow&&(this._removeShadow(),u=!0);i&&r.DomUtil.addClass(i,o);this._shadow=i;n.opacity<1&&this._updateOpacity();f=this._map._panes;s&&f.markerPane.appendChild(this._icon);i&&u&&f.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&r.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex);this._map._panes.markerPane.removeChild(this._icon);this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow);this._shadow=null},_setPos:function(n){r.DomUtil.setPosition(this._icon,n);this._shadow&&r.DomUtil.setPosition(this._shadow,n);this._zIndex=n.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(n){this._icon.style.zIndex=this._zIndex+n},_animateZoom:function(n){var t=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(t)},_initInteraction:function(){var n,i,t;if(this.options.clickable){n=this._icon;i=["dblclick","mousedown","mouseover","mouseout","contextmenu"];r.DomUtil.addClass(n,"leaflet-clickable");r.DomEvent.on(n,"click",this._onMouseClick,this);r.DomEvent.on(n,"keypress",this._onKeyPress,this);for(t=0;t<i.length;t++)r.DomEvent.on(n,i[t],this._fireMouseEvent,this);r.Handler.MarkerDrag&&(this.dragging=new r.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(n){var t=this.dragging&&this.dragging.moved();((this.hasEventListeners(n.type)||t)&&r.DomEvent.stopPropagation(n),t)||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(n.type,{originalEvent:n,latlng:this._latlng})},_onKeyPress:function(n){n.keyCode===13&&this.fire("click",{originalEvent:n,latlng:this._latlng})},_fireMouseEvent:function(n){this.fire(n.type,{originalEvent:n,latlng:this._latlng});n.type==="contextmenu"&&this.hasEventListeners(n.type)&&r.DomEvent.preventDefault(n);n.type!=="mousedown"?r.DomEvent.stopPropagation(n):r.DomEvent.preventDefault(n)},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){r.DomUtil.setOpacity(this._icon,this.options.opacity);this._shadow&&r.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}});r.marker=function(n,t){return new r.Marker(n,t)};r.DivIcon=r.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(n){var r=n&&n.tagName==="DIV"?n:t.createElement("div"),i=this.options;return r.innerHTML=i.html!==!1?i.html:"",i.bgPos&&(r.style.backgroundPosition=-i.bgPos.x+"px "+-i.bgPos.y+"px"),this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});r.divIcon=function(n){return new r.DivIcon(n)};r.Map.mergeOptions({closePopupOnClick:!0});r.Popup=r.Class.extend({includes:r.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(n,t){r.setOptions(this,n);this._source=t;this._animated=r.Browser.any3d&&this.options.zoomAnimation;this._isOpen=!1},onAdd:function(n){this._map=n;this._container||this._initLayout();var t=n.options.fadeAnimation;t&&r.DomUtil.setOpacity(this._container,0);n._panes.popupPane.appendChild(this._container);n.on(this._getEvents(),this);this.update();t&&r.DomUtil.setOpacity(this._container,1);this.fire("open");n.fire("popupopen",{popup:this});this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(n){return n.addLayer(this),this},openOn:function(n){return n.openPopup(this),this},onRemove:function(n){n._panes.popupPane.removeChild(this._container);r.Util.falseFn(this._container.offsetWidth);n.off(this._getEvents(),this);n.options.fadeAnimation&&r.DomUtil.setOpacity(this._container,0);this._map=null;this.fire("close");n.fire("popupclose",{popup:this});this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=r.latLng(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var n={viewreset:this._updatePosition};return this._animated&&(n.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this._close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var n="leaflet-popup",f=n+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),u=this._container=r.DomUtil.create("div",f),t,i;if(this.options.closeButton){t=this._closeButton=r.DomUtil.create("a",n+"-close-button",u);t.href="#close";t.innerHTML="&#215;";r.DomEvent.disableClickPropagation(t);r.DomEvent.on(t,"click",this._onCloseButtonClick,this)}i=this._wrapper=r.DomUtil.create("div",n+"-content-wrapper",u);r.DomEvent.disableClickPropagation(i);this._contentNode=r.DomUtil.create("div",n+"-content",i);r.DomEvent.disableScrollPropagation(this._contentNode);r.DomEvent.on(i,"contextmenu",r.DomEvent.stopPropagation);this._tipContainer=r.DomUtil.create("div",n+"-tip-container",u);this._tip=r.DomUtil.create("div",n+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if(typeof this._content=="string")this._contentNode.innerHTML=this._content;else{while(this._contentNode.hasChildNodes())this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var i=this._contentNode,n=i.style,t;n.width="";n.whiteSpace="nowrap";t=i.offsetWidth;t=Math.min(t,this.options.maxWidth);t=Math.max(t,this.options.minWidth);n.width=t+1+"px";n.whiteSpace="";n.height="";var e=i.offsetHeight,u=this.options.maxHeight,f="leaflet-popup-scrolled";u&&e>u?(n.height=u+"px",r.DomUtil.addClass(i,f)):r.DomUtil.removeClass(i,f);this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),t=this._animated,i=r.point(this.options.offset);t&&r.DomUtil.setPosition(this._container,n);this._containerBottom=-i.y-(t?0:n.y);this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(t?0:n.x);this._container.style.bottom=this._containerBottom+"px";this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(n){var t=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);r.DomUtil.setPosition(this._container,t)},_adjustPan:function(){if(this.options.autoPan){var o=this._map,s=this._container.offsetHeight,h=this._containerWidth,c=new r.Point(this._containerLeft,-s-this._containerBottom);this._animated&&c._add(r.DomUtil.getPosition(this._container));var n=o.layerPointToContainerPoint(c),l=r.point(this.options.autoPanPadding),u=r.point(this.options.autoPanPaddingTopLeft||l),f=r.point(this.options.autoPanPaddingBottomRight||l),e=o.getSize(),t=0,i=0;n.x+h+f.x>e.x&&(t=n.x+h-e.x+f.x);n.x-t-u.x<0&&(t=n.x-u.x);n.y+s+f.y>e.y&&(i=n.y+s-e.y+f.y);n.y-i-u.y<0&&(i=n.y-u.y);(t||i)&&o.fire("autopanstart").panBy([t,i])}},_onCloseButtonClick:function(n){this._close();r.DomEvent.stop(n)}});r.popup=function(n,t){return new r.Popup(n,t)};r.Map.include({openPopup:function(n,t,i){if(this.closePopup(),!(n instanceof r.Popup)){var u=n;n=new r.Popup(i).setLatLng(t).setContent(u)}return n._isOpen=!0,this._popup=n,this.addLayer(n)},closePopup:function(n){return n&&n!==this._popup||(n=this._popup,this._popup=null),n&&(this.removeLayer(n),n._isOpen=!1),this}});r.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(n,t){var i=r.point(this.options.icon.options.popupAnchor||[0,0]);if(i=i.add(r.Popup.prototype.options.offset),t&&t.offset&&(i=i.add(t.offset)),t=r.extend({offset:i},t),!this._popupHandlersAdded){this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this);this._popupHandlersAdded=!0}return n instanceof r.Popup?(r.setOptions(n,t),this._popup=n,n._source=this):this._popup=new r.Popup(t,this).setContent(n),this},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(n){this._popup.setLatLng(n.latlng)}});r.LayerGroup=r.Class.extend({initialize:function(n){this._layers={};var t,i;if(n)for(t=0,i=n.length;t<i;t++)this.addLayer(n[t])},addLayer:function(n){var t=this.getLayerId(n);return this._layers[t]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var t=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(n){return n?n in this._layers||this.getLayerId(n)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(n){var r=Array.prototype.slice.call(arguments,1),i,t;for(i in this._layers)t=this._layers[i],t[n]&&t[n].apply(t,r);return this},onAdd:function(n){this._map=n;this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n);this._map=null},addTo:function(n){return n.addLayer(this),this},eachLayer:function(n,t){for(var i in this._layers)n.call(t,this._layers[i]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];for(var t in this._layers)n.push(this._layers[t]);return n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return r.stamp(n)}});r.layerGroup=function(n){return new r.LayerGroup(n)};r.FeatureGroup=r.LayerGroup.extend({includes:r.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(n){if(this.hasLayer(n))return this;if("on"in n)n.on(r.FeatureGroup.EVENTS,this._propagateEvent,this);return r.LayerGroup.prototype.addLayer.call(this,n),this._popupContent&&n.bindPopup&&n.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:n})},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.off(r.FeatureGroup.EVENTS,this._propagateEvent,this),r.LayerGroup.prototype.removeLayer.call(this,n),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:n})):this},bindPopup:function(n,t){return this._popupContent=n,this._popupOptions=t,this.invoke("bindPopup",n,t)},openPopup:function(n){for(var t in this._layers){this._layers[t].openPopup(n);break}return this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new r.LatLngBounds;return this.eachLayer(function(t){n.extend(t instanceof r.Marker?t.getLatLng():t.getBounds())}),n},_propagateEvent:function(n){n=r.extend({layer:n.target,target:this},n);this.fire(n.type,n)}});r.featureGroup=function(n){return new r.FeatureGroup(n)};r.Path=r.Class.extend({includes:[r.Mixin.Events],statics:{CLIP_PADDING:function(){var t=r.Browser.mobile?1280:2e3,i=(t/Math.max(n.outerWidth,n.outerHeight)-1)/2;return Math.max(0,Math.min(.5,i))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(n){r.setOptions(this,n)},onAdd:function(n){this._map=n;this._container||(this._initElements(),this._initEvents());this.projectLatlngs();this._updatePath();this._container&&this._map._pathRoot.appendChild(this._container);this.fire("add");n.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(n){return n.addLayer(this),this},onRemove:function(n){n._pathRoot.removeChild(this._container);this.fire("remove");this._map=null;r.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null);n.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(n){return r.setOptions(this,n),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}});r.Map.include({_updatePathViewport:function(){var n=r.Path.CLIP_PADDING,t=this.getSize(),u=r.DomUtil.getPosition(this._mapPane),i=u.multiplyBy(-1)._subtract(t.multiplyBy(n)._round()),f=i.add(t.multiplyBy(1+n*2)._round());this._pathViewport=new r.Bounds(i,f)}});r.Path.SVG_NS="http://www.w3.org/2000/svg";r.Browser.svg=!!(t.createElementNS&&t.createElementNS(r.Path.SVG_NS,"svg").createSVGRect);r.Path=r.Path.extend({statics:{SVG:r.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,n=this._container;return n&&t.lastChild!==n&&t.appendChild(n),this},bringToBack:function(){var t=this._map._pathRoot,n=this._container,i=t.firstChild;return n&&i!==n&&t.insertBefore(n,i),this},getPathString:function(){},_createElement:function(n){return t.createElementNS(r.Path.SVG_NS,n)},_initElements:function(){this._map._initPathRoot();this._initPath();this._initStyle()},_initPath:function(){this._container=this._createElement("g");this._path=this._createElement("path");this.options.className&&r.DomUtil.addClass(this._path,this.options.className);this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round"));this.options.fill&&this._path.setAttribute("fill-rule","evenodd");this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents);this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none");this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none");this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var n=this.getPathString();n||(n="M0 0");this._path.setAttribute("d",n)},_initEvents:function(){var t,n;if(this.options.clickable){(r.Browser.svg||!r.Browser.vml)&&r.DomUtil.addClass(this._path,"leaflet-clickable");r.DomEvent.on(this._container,"click",this._onMouseClick,this);for(t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],n=0;n<t.length;n++)r.DomEvent.on(this._container,t[n],this._fireMouseEvent,this)}},_onMouseClick:function(n){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(n)},_fireMouseEvent:function(n){if(this.hasEventListeners(n.type)){var t=this._map,i=t.mouseEventToContainerPoint(n),u=t.containerPointToLayerPoint(i),f=t.layerPointToLatLng(u);this.fire(n.type,{latlng:f,layerPoint:u,containerPoint:i,originalEvent:n});n.type==="contextmenu"&&r.DomEvent.preventDefault(n);n.type!=="mousemove"&&r.DomEvent.stopPropagation(n)}}});r.Map.include({_initPathRoot:function(){if(!this._pathRoot){if(this._pathRoot=r.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&r.Browser.any3d){r.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated");this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})}else r.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide");this.on("moveend",this._updateSvgViewport);this._updateSvgViewport()}},_animatePathZoom:function(n){var t=this.getZoomScale(n.zoom),i=this._getCenterOffset(n.center)._multiplyBy(-t)._add(this._pathViewport.min);this._pathRoot.style[r.DomUtil.TRANSFORM]=r.DomUtil.getTranslateString(i)+" scale("+t+") ";this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var i=this._pathViewport,t=i.min,u=i.max,f=u.x-t.x,e=u.y-t.y,n=this._pathRoot,o=this._panes.overlayPane;r.Browser.mobileWebkit&&o.removeChild(n);r.DomUtil.setPosition(n,t);n.setAttribute("width",f);n.setAttribute("height",e);n.setAttribute("viewBox",[t.x,t.y,f,e].join(" "));r.Browser.mobileWebkit&&o.appendChild(n)}}});r.Path.include({bindPopup:function(n,t){if(n instanceof r.Popup?this._popup=n:((!this._popup||t)&&(this._popup=new r.Popup(t,this)),this._popup.setContent(n)),!this._popupHandlersAdded){this.on("click",this._openPopup,this).on("remove",this.closePopup,this);this._popupHandlersAdded=!0}return this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(n){return this._popup&&(n=n||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:n})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(n){this._popup.setLatLng(n.latlng);this._map.openPopup(this._popup)}});r.Browser.vml=!r.Browser.svg&&function(){var i,n;try{return i=t.createElement("div"),i.innerHTML='<v:shape adj="1"/>',n=i.firstChild,n.style.behavior="url(#default#VML)",n&&typeof n.adj=="object"}catch(r){return!1}}();r.Path=r.Browser.svg||!r.Browser.vml?r.Path:r.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return t.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return t.createElement("<lvml:"+n+' class="lvml">')}}catch(n){return function(n){return t.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var n=this._container=this._createElement("shape");r.DomUtil.addClass(n,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:""));this.options.clickable&&r.DomUtil.addClass(n,"leaflet-clickable");n.coordsize="1 1";this._path=this._createElement("path");n.appendChild(this._path);this._map._pathRoot.appendChild(n)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,i=this._fill,n=this.options,u=this._container;u.stroked=n.stroke;u.filled=n.fill;n.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",u.appendChild(t)),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,t.dashStyle=n.dashArray?r.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):"",n.lineCap&&(t.endcap=n.lineCap.replace("butt","flat")),n.lineJoin&&(t.joinstyle=n.lineJoin)):t&&(u.removeChild(t),this._stroke=null);n.fill?(i||(i=this._fill=this._createElement("fill"),u.appendChild(i)),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(u.removeChild(i),this._fill=null)},_updatePath:function(){var n=this._container.style;n.display="none";this._path.v=this.getPathString()+" ";n.display=""}});r.Map.include(r.Browser.svg||!r.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var n=this._pathRoot=t.createElement("div");n.className="leaflet-vml-container";this._panes.overlayPane.appendChild(n);this.on("moveend",this._updatePathViewport);this._updatePathViewport()}}});r.Browser.canvas=function(){return!!t.createElement("canvas").getContext}();r.Path=r.Path.SVG&&!n.L_PREFER_CANVAS||!r.Browser.canvas?r.Path:r.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(n){return r.setOptions(this,n),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(n){n.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this);this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this));this._requestUpdate();this.fire("remove");this._map=null},_requestUpdate:function(){this._map&&!r.Path._updateRequest&&(r.Path._updateRequest=r.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){r.Path._updateRequest=null;this.fire("moveend")},_initElements:function(){this._map._initPathRoot();this._ctx=this._map._canvasCtx},_updateStyle:function(){var n=this.options;n.stroke&&(this._ctx.lineWidth=n.weight,this._ctx.strokeStyle=n.color);n.fill&&(this._ctx.fillStyle=n.fillColor||n.color);n.lineCap&&(this._ctx.lineCap=n.lineCap);n.lineJoin&&(this._ctx.lineJoin=n.lineJoin)},_drawPath:function(){var n,t,u,f,i,e;for(this._ctx.beginPath(),n=0,u=this._parts.length;n<u;n++){for(t=0,f=this._parts[n].length;t<f;t++)i=this._parts[n][t],e=(t===0?"move":"line")+"To",this._ctx[e](i.x,i.y);this instanceof r.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var n=this._ctx,t=this.options;this._drawPath();n.save();this._updateStyle();t.fill&&(n.globalAlpha=t.fillOpacity,n.fill(t.fillRule||"evenodd"));t.stroke&&(n.globalAlpha=t.opacity,n.stroke());n.restore()}},_initEvents:function(){if(this.options.clickable){this._map.on("mousemove",this._onMouseMove,this);this._map.on("click dblclick contextmenu",this._fireMouseEvent,this)}},_fireMouseEvent:function(n){this._containsPoint(n.layerPoint)&&this.fire(n.type,n)},_onMouseMove:function(n){this._map&&!this._map._animatingZoom&&(this._containsPoint(n.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",n)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",n)))}});r.Map.include(r.Path.SVG&&!n.L_PREFER_CANVAS||!r.Browser.canvas?{}:{_initPathRoot:function(){var n=this._pathRoot,i;if(!n){if(n=this._pathRoot=t.createElement("canvas"),n.style.position="absolute",i=this._canvasCtx=n.getContext("2d"),i.lineCap="round",i.lineJoin="round",this._panes.overlayPane.appendChild(n),this.options.zoomAnimation){this._pathRoot.className="leaflet-zoom-animated";this.on("zoomanim",this._animatePathZoom);this.on("zoomend",this._endPathZoom)}this.on("moveend",this._updateCanvasViewport);this._updateCanvasViewport()}},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var i=this._pathViewport,n=i.min,u=i.max.subtract(n),t=this._pathRoot;r.DomUtil.setPosition(t,n);t.width=u.x;t.height=u.y;t.getContext("2d").translate(-n.x,-n.y)}}});r.LineUtil={simplify:function(n,t){if(!t||!n.length)return n.slice();var i=t*t;return n=this._reducePoints(n,i),this._simplifyDP(n,i)},pointToSegmentDistance:function(n,t,i){return Math.sqrt(this._sqClosestPointOnSegment(n,t,i,!0))},closestPointOnSegment:function(n,t,i){return this._sqClosestPointOnSegment(n,t,i)},_simplifyDP:function(n,t){var u=n.length,o=typeof Uint8Array!=i+""?Uint8Array:Array,f=new o(u),r,e;for(f[0]=f[u-1]=1,this._simplifyDPStep(n,f,t,0,u-1),e=[],r=0;r<u;r++)f[r]&&e.push(n[r]);return e},_simplifyDPStep:function(n,t,i,r,u){for(var o=0,e,s,f=r+1;f<=u-1;f++)s=this._sqClosestPointOnSegment(n[f],n[r],n[u],!0),s>o&&(e=f,o=s);o>i&&(t[e]=1,this._simplifyDPStep(n,t,i,r,e),this._simplifyDPStep(n,t,i,e,u))},_reducePoints:function(n,t){for(var r=[n[0]],i=1,u=0,f=n.length;i<f;i++)this._sqDist(n[i],n[u])>t&&(r.push(n[i]),u=i);return u<f-1&&r.push(n[f-1]),r},clipSegment:function(n,t,i,r){var u=r?this._lastCode:this._getBitCode(n,i),f=this._getBitCode(t,i),o,e,s;for(this._lastCode=f;;)if(u|f){if(u&f)return!1;o=u||f;e=this._getEdgeIntersection(n,t,o,i);s=this._getBitCode(e,i);o===u?(n=e,u=s):(t=e,f=s)}else return[n,t]},_getEdgeIntersection:function(n,t,i,u){var f=t.x-n.x,e=t.y-n.y,o=u.min,s=u.max;return i&8?new r.Point(n.x+f*(s.y-n.y)/e,s.y):i&4?new r.Point(n.x+f*(o.y-n.y)/e,o.y):i&2?new r.Point(s.x,n.y+e*(s.x-n.x)/f):i&1?new r.Point(o.x,n.y+e*(o.x-n.x)/f):void 0},_getBitCode:function(n,t){var i=0;return n.x<t.min.x?i|=1:n.x>t.max.x&&(i|=2),n.y<t.min.y?i|=4:n.y>t.max.y&&(i|=8),i},_sqDist:function(n,t){var i=t.x-n.x,r=t.y-n.y;return i*i+r*r},_sqClosestPointOnSegment:function(n,t,i,u){var o=t.x,s=t.y,f=i.x-o,e=i.y-s,c=f*f+e*e,h;return c>0&&(h=((n.x-o)*f+(n.y-s)*e)/c,h>1?(o=i.x,s=i.y):h>0&&(o+=f*h,s+=e*h)),f=n.x-o,e=n.y-s,u?f*f+e*e:new r.Point(o,s)}};r.Polyline=r.Path.extend({initialize:function(n,t){r.Path.prototype.initialize.call(this,t);this._latlngs=this._convertLatLngs(n)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var n=0,t=this._latlngs.length;n<t;n++)this._originalPoints[n]=this._map.latLngToLayerPoint(this._latlngs[n])},getPathString:function(){for(var n=0,i=this._parts.length,t="";n<i;n++)t+=this._getPathPartStr(this._parts[n]);return t},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._latlngs=this._convertLatLngs(n),this.redraw()},addLatLng:function(n){return this._latlngs.push(r.latLng(n)),this.redraw()},spliceLatLngs:function(){var n=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),n},closestLayerPoint:function(n){for(var u,t,l,h,f=Infinity,c=this._parts,e,o,i=null,s=0,a=c.length;s<a;s++)for(u=c[s],t=1,l=u.length;t<l;t++)e=u[t-1],o=u[t],h=r.LineUtil._sqClosestPointOnSegment(n,e,o,!0),h<f&&(f=h,i=r.LineUtil._sqClosestPointOnSegment(n,e,o));return i&&(i.distance=Math.sqrt(f)),i},getBounds:function(){return new r.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(n,t){for(var f=t?n:[],i=0,u=n.length;i<u;i++){if(r.Util.isArray(n[i])&&typeof n[i][0]!="number")return;f[i]=r.latLng(n[i])}return f},_initEvents:function(){r.Path.prototype._initEvents.call(this)},_getPathPartStr:function(n){for(var f=r.Path.VML,t=0,e=n.length,u="",i;t<e;t++)i=n[t],f&&i._round(),u+=(t?"L":"M")+i.x+" "+i.y;return u},_clipPoints:function(){var i=this._originalPoints,e=i.length,n,t,u;if(this.options.noClip){this._parts=[i];return}this._parts=[];var f=this._parts,o=this._map._pathViewport,s=r.LineUtil;for(n=0,t=0;n<e-1;n++)(u=s.clipSegment(i[n],i[n+1],o,n),u)&&(f[t]=f[t]||[],f[t].push(u[0]),(u[1]!==i[n+1]||n===e-2)&&(f[t].push(u[1]),t++))},_simplifyPoints:function(){for(var t=this._parts,i=r.LineUtil,n=0,u=t.length;n<u;n++)t[n]=i.simplify(t[n],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),r.Path.prototype._updatePath.call(this))}});r.polyline=function(n,t){return new r.Polyline(n,t)};r.PolyUtil={};r.PolyUtil.clipPolygon=function(n,t){for(var e,v=[1,4,2,8],a,l,o,s,f,u,c=r.LineUtil,i=0,h=n.length;i<h;i++)n[i]._code=c._getBitCode(n[i],t);for(l=0;l<4;l++){for(f=v[l],e=[],i=0,h=n.length,a=h-1;i<h;a=i++)o=n[i],s=n[a],o._code&f?s._code&f||(u=c._getEdgeIntersection(s,o,f,t),u._code=c._getBitCode(u,t),e.push(u)):(s._code&f&&(u=c._getEdgeIntersection(s,o,f,t),u._code=c._getBitCode(u,t),e.push(u)),e.push(o));n=e}return n};r.Polygon=r.Polyline.extend({options:{fill:!0},initialize:function(n,t){r.Polyline.prototype.initialize.call(this,n,t);this._initWithHoles(n)},_initWithHoles:function(n){var t,u,i;if(n&&r.Util.isArray(n[0])&&typeof n[0][0]!="number")for(this._latlngs=this._convertLatLngs(n[0]),this._holes=n.slice(1),t=0,u=this._holes.length;t<u;t++)i=this._holes[t]=this._convertLatLngs(this._holes[t]),i[0].equals(i[i.length-1])&&i.pop();n=this._latlngs;n.length>=2&&n[0].equals(n[n.length-1])&&n.pop()},projectLatlngs:function(){if(r.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes)for(var t,u,n=0,i=this._holes.length;n<i;n++)for(this._holePoints[n]=[],t=0,u=this._holes[n].length;t<u;t++)this._holePoints[n][t]=this._map.latLngToLayerPoint(this._holes[n][t])},setLatLngs:function(n){return n&&r.Util.isArray(n[0])&&typeof n[0][0]!="number"?(this._initWithHoles(n),this.redraw()):r.Polyline.prototype.setLatLngs.call(this,n)},_clipPoints:function(){var f=this._originalPoints,i=[],n,u,t;if(this._parts=[f].concat(this._holePoints),!this.options.noClip){for(n=0,u=this._parts.length;n<u;n++)t=r.PolyUtil.clipPolygon(this._parts[n],this._map._pathViewport),t.length&&i.push(t);this._parts=i}},_getPathPartStr:function(n){var t=r.Polyline.prototype._getPathPartStr.call(this,n);return t+(r.Browser.svg?"z":"x")}});r.polygon=function(n,t){return new r.Polygon(n,t)},function(){function n(n){return r.FeatureGroup.extend({initialize:function(n,t){this._layers={};this._options=t;this.setLatLngs(n)},setLatLngs:function(t){var i=0,r=t.length;for(this.eachLayer(function(n){i<r?n.setLatLngs(t[i++]):this.removeLayer(n)},this);i<r;)this.addLayer(new n(t[i++],this._options));return this},getLatLngs:function(){var n=[];return this.eachLayer(function(t){n.push(t.getLatLngs())}),n}})}r.MultiPolyline=n(r.Polyline);r.MultiPolygon=n(r.Polygon);r.multiPolyline=function(n,t){return new r.MultiPolyline(n,t)};r.multiPolygon=function(n,t){return new r.MultiPolygon(n,t)}}();r.Rectangle=r.Polygon.extend({initialize:function(n,t){r.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(n),t)},setBounds:function(n){this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=r.latLngBounds(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});r.rectangle=function(n,t){return new r.Rectangle(n,t)};r.Circle=r.Path.extend({initialize:function(n,t,i){r.Path.prototype.initialize.call(this,i);this._latlng=r.latLng(n);this._mRadius=t},options:{fill:!0},setLatLng:function(n){return this._latlng=r.latLng(n),this.redraw()},setRadius:function(n){return this._mRadius=n,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),n=this._latlng,i=this._map.latLngToLayerPoint([n.lat,n.lng-t]);this._point=this._map.latLngToLayerPoint(n);this._radius=Math.max(this._point.x-i.x,1)},getBounds:function(){var t=this._getLngRadius(),i=this._mRadius/40075017*360,n=this._latlng;return new r.LatLngBounds([n.lat-i,n.lng-t],[n.lat+i,n.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,n=this._radius;return this._checkIfEmpty()?"":r.Browser.svg?"M"+t.x+","+(t.y-n)+"A"+n+","+n+",0,1,1,"+(t.x-.1)+","+(t.y-n)+" z":(t._round(),n=Math.round(n),"AL "+t.x+","+t.y+" "+n+","+n+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(r.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var n=this._map._pathViewport,t=this._radius,i=this._point;return i.x-t>n.max.x||i.y-t>n.max.y||i.x+t<n.min.x||i.y+t<n.min.y}});r.circle=function(n,t,i){return new r.Circle(n,t,i)};r.CircleMarker=r.Circle.extend({options:{radius:10,weight:2},initialize:function(n,t){r.Circle.prototype.initialize.call(this,n,null,t);this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){r.Circle.prototype._updateStyle.call(this);this.setRadius(this.options.radius)},setLatLng:function(n){return r.Circle.prototype.setLatLng.call(this,n),this._popup&&this._popup._isOpen&&this._popup.setLatLng(n),this},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius}});r.circleMarker=function(n,t){return new r.CircleMarker(n,t)};r.Polyline.include(r.Path.CANVAS?{_containsPoint:function(n,t){var u,i,e,s,o,h,f,c=this.options.weight/2;for(r.Browser.touch&&(c+=10),u=0,s=this._parts.length;u<s;u++)for(f=this._parts[u],i=0,o=f.length,e=o-1;i<o;e=i++)if((t||i!==0)&&(h=r.LineUtil.pointToSegmentDistance(n,f[e],f[i]),h<=c))return!0;return!1}}:{});r.Polygon.include(r.Path.CANVAS?{_containsPoint:function(n){var o=!1,i,t,u,f,e,s,c,h;if(r.Polyline.prototype._containsPoint.call(this,n,!0))return!0;for(f=0,c=this._parts.length;f<c;f++)for(i=this._parts[f],e=0,h=i.length,s=h-1;e<h;s=e++)t=i[e],u=i[s],t.y>n.y!=u.y>n.y&&n.x<(u.x-t.x)*(n.y-t.y)/(u.y-t.y)+t.x&&(o=!o);return o}}:{});r.Circle.include(r.Path.CANVAS?{_drawPath:function(){var n=this._point;this._ctx.beginPath();this._ctx.arc(n.x,n.y,this._radius,0,Math.PI*2,!1)},_containsPoint:function(n){var t=this._point,i=this.options.stroke?this.options.weight/2:0;return n.distanceTo(t)<=this._radius+i}}:{});r.CircleMarker.include(r.Path.CANVAS?{_updateStyle:function(){r.Path.prototype._updateStyle.call(this)}}:{});r.GeoJSON=r.FeatureGroup.extend({initialize:function(n,t){r.setOptions(this,t);this._layers={};n&&this.addData(n)},addData:function(n){var e=r.Util.isArray(n)?n:n.features,u,o,f,t,i;if(e){for(u=0,o=e.length;u<o;u++)f=e[u],(f.geometries||f.geometry||f.features||f.coordinates)&&this.addData(e[u]);return this}if(t=this.options,!t.filter||t.filter(n)){if(i=r.GeoJSON.geometryToLayer(n,t.pointToLayer,t.coordsToLatLng,t),i.feature=r.GeoJSON.asFeature(n),i.defaultOptions=i.options,this.resetStyle(i),t.onEachFeature)t.onEachFeature(n,i);return this.addLayer(i)}},resetStyle:function(n){var t=this.options.style;t&&(r.Util.extend(n.options,n.defaultOptions),this._setLayerStyle(n,t))},setStyle:function(n){this.eachLayer(function(t){this._setLayerStyle(t,n)},this)},_setLayerStyle:function(n,t){typeof t=="function"&&(t=t(n.feature));n.setStyle&&n.setStyle(t)}});r.extend(r.GeoJSON,{geometryToLayer:function(n,t,i,u){var h=n.type==="Feature"?n.geometry:n,f=h.coordinates,c=[],s,e,o,l;i=i||this.coordsToLatLng;switch(h.type){case"Point":return s=i(f),t?t(n,s):new r.Marker(s);case"MultiPoint":for(o=0,l=f.length;o<l;o++)s=i(f[o]),c.push(t?t(n,s):new r.Marker(s));return new r.FeatureGroup(c);case"LineString":return e=this.coordsToLatLngs(f,0,i),new r.Polyline(e,u);case"Polygon":if(f.length===2&&!f[1].length)throw new Error("Invalid GeoJSON object.");return e=this.coordsToLatLngs(f,1,i),new r.Polygon(e,u);case"MultiLineString":return e=this.coordsToLatLngs(f,1,i),new r.MultiPolyline(e,u);case"MultiPolygon":return e=this.coordsToLatLngs(f,2,i),new r.MultiPolygon(e,u);case"GeometryCollection":for(o=0,l=h.geometries.length;o<l;o++)c.push(this.geometryToLayer({geometry:h.geometries[o],type:"Feature",properties:n.properties},t,i,u));return new r.FeatureGroup(c);default:throw new Error("Invalid GeoJSON object.");}},coordsToLatLng:function(n){return new r.LatLng(n[1],n[0],n[2])},coordsToLatLngs:function(n,t,i){for(var u,e=[],r=0,f=n.length;r<f;r++)u=t?this.coordsToLatLngs(n[r],t-1,i):(i||this.coordsToLatLng)(n[r]),e.push(u);return e},latLngToCoords:function(n){var t=[n.lng,n.lat];return n.alt!==i&&t.push(n.alt),t},latLngsToCoords:function(n){for(var i=[],t=0,u=n.length;t<u;t++)i.push(r.GeoJSON.latLngToCoords(n[t]));return i},getFeature:function(n,t){return n.feature?r.extend({},n.feature,{geometry:t}):r.GeoJSON.asFeature(t)},asFeature:function(n){return n.type==="Feature"?n:{type:"Feature",properties:{},geometry:n}}});f={toGeoJSON:function(){return r.GeoJSON.getFeature(this,{type:"Point",coordinates:r.GeoJSON.latLngToCoords(this.getLatLng())})}};r.Marker.include(f);r.Circle.include(f);r.CircleMarker.include(f);r.Polyline.include({toGeoJSON:function(){return r.GeoJSON.getFeature(this,{type:"LineString",coordinates:r.GeoJSON.latLngsToCoords(this.getLatLngs())})}});r.Polygon.include({toGeoJSON:function(){var n=[r.GeoJSON.latLngsToCoords(this.getLatLngs())],t,u,i;if(n[0].push(n[0][0]),this._holes)for(t=0,u=this._holes.length;t<u;t++)i=r.GeoJSON.latLngsToCoords(this._holes[t]),i.push(i[0]),n.push(i);return r.GeoJSON.getFeature(this,{type:"Polygon",coordinates:n})}}),function(){function n(n){return function(){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON().geometry.coordinates)}),r.GeoJSON.getFeature(this,{type:n,coordinates:t})}}r.MultiPolyline.include({toGeoJSON:n("MultiLineString")});r.MultiPolygon.include({toGeoJSON:n("MultiPolygon")});r.LayerGroup.include({toGeoJSON:function(){var t=this.feature&&this.feature.geometry,i=[],u,f;return t&&t.type==="MultiPoint"?n("MultiPoint").call(this):(f=t&&t.type==="GeometryCollection",this.eachLayer(function(n){n.toGeoJSON&&(u=n.toGeoJSON(),i.push(f?u.geometry:r.GeoJSON.asFeature(u)))}),f)?r.GeoJSON.getFeature(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}})}();r.geoJson=function(n,t){return new r.GeoJSON(n,t)};r.DomEvent={addListener:function(n,t,i,u){var o=r.stamp(i),s="_leaflet_"+t+o,f,e,h;return n[s]?this:(f=function(t){return i.call(u||n,t||r.DomEvent._getEvent())},r.Browser.pointer&&t.indexOf("touch")===0)?this.addPointerListener(n,t,f,o):(r.Browser.touch&&t==="dblclick"&&this.addDoubleTapListener&&this.addDoubleTapListener(n,f,o),"addEventListener"in n?t==="mousewheel"?(n.addEventListener("DOMMouseScroll",f,!1),n.addEventListener(t,f,!1)):t==="mouseenter"||t==="mouseleave"?(e=f,h=t==="mouseenter"?"mouseover":"mouseout",f=function(t){if(r.DomEvent._checkMouse(n,t))return e(t)},n.addEventListener(h,f,!1)):t==="click"&&r.Browser.android?(e=f,f=function(n){return r.DomEvent._filterClick(n,e)},n.addEventListener(t,f,!1)):n.addEventListener(t,f,!1):"attachEvent"in n&&n.attachEvent("on"+t,f),n[s]=f,this)},removeListener:function(n,t,i){var f=r.stamp(i),e="_leaflet_"+t+f,u=n[e];return u?(r.Browser.pointer&&t.indexOf("touch")===0?this.removePointerListener(n,t,f):r.Browser.touch&&t==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(n,f):"removeEventListener"in n?t==="mousewheel"?(n.removeEventListener("DOMMouseScroll",u,!1),n.removeEventListener(t,u,!1)):t==="mouseenter"||t==="mouseleave"?n.removeEventListener(t==="mouseenter"?"mouseover":"mouseout",u,!1):n.removeEventListener(t,u,!1):"detachEvent"in n&&n.detachEvent("on"+t,u),n[e]=null,this):this},stopPropagation:function(n){return n.stopPropagation?n.stopPropagation():n.cancelBubble=!0,r.DomEvent._skipped(n),this},disableScrollPropagation:function(n){var t=r.DomEvent.stopPropagation;return r.DomEvent.on(n,"mousewheel",t).on(n,"MozMousePixelScroll",t)},disableClickPropagation:function(n){for(var i=r.DomEvent.stopPropagation,t=r.Draggable.START.length-1;t>=0;t--)r.DomEvent.on(n,r.Draggable.START[t],i);return r.DomEvent.on(n,"click",r.DomEvent._fakeStop).on(n,"dblclick",i)},preventDefault:function(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this},stop:function(n){return r.DomEvent.preventDefault(n).stopPropagation(n)},getMousePosition:function(n,t){if(!t)return new r.Point(n.clientX,n.clientY);var i=t.getBoundingClientRect();return new r.Point(n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop)},getWheelDelta:function(n){var t=0;return n.wheelDelta&&(t=n.wheelDelta/120),n.detail&&(t=-n.detail/3),t},_skipEvents:{},_fakeStop:function(n){r.DomEvent._skipEvents[n.type]=!0},_skipped:function(n){var t=this._skipEvents[n.type];return this._skipEvents[n.type]=!1,t},_checkMouse:function(n,t){var i=t.relatedTarget;if(!i)return!0;try{while(i&&i!==n)i=i.parentNode}catch(r){return!1}return i!==n},_getEvent:function(){var t=n.event,i;if(!t)for(i=arguments.callee.caller;i;){if(t=i.arguments[0],t&&n.Event===t.constructor)break;i=i.caller}return t},_filterClick:function(n,t){var u=n.timeStamp||n.originalEvent.timeStamp,i=r.DomEvent._lastClick&&u-r.DomEvent._lastClick;if(i&&i>100&&i<500||n.target._simulatedClick&&!n._simulated){r.DomEvent.stop(n);return}return r.DomEvent._lastClick=u,t(n)}};r.DomEvent.on=r.DomEvent.addListener;r.DomEvent.off=r.DomEvent.removeListener;r.Draggable=r.Class.extend({includes:r.Mixin.Events,statics:{START:r.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(n,t){this._element=n;this._dragStartTarget=t||n},enable:function(){if(!this._enabled){for(var n=r.Draggable.START.length-1;n>=0;n--)r.DomEvent.on(this._dragStartTarget,r.Draggable.START[n],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var n=r.Draggable.START.length-1;n>=0;n--)r.DomEvent.off(this._dragStartTarget,r.Draggable.START[n],this._onDown,this);this._enabled=!1;this._moved=!1}},_onDown:function(n){if((this._moved=!1,!n.shiftKey&&(n.which===1||n.button===1||n.touches))&&(r.DomEvent.stopPropagation(n),!r.Draggable._disabled)&&(r.DomUtil.disableImageDrag(),r.DomUtil.disableTextSelection(),!this._moving)){var i=n.touches?n.touches[0]:n;this._startPoint=new r.Point(i.clientX,i.clientY);this._startPos=this._newPos=r.DomUtil.getPosition(this._element);r.DomEvent.on(t,r.Draggable.MOVE[n.type],this._onMove,this).on(t,r.Draggable.END[n.type],this._onUp,this)}},_onMove:function(n){if(n.touches&&n.touches.length>1){this._moved=!0;return}var u=n.touches&&n.touches.length===1?n.touches[0]:n,f=new r.Point(u.clientX,u.clientY),i=f.subtract(this._startPoint);(i.x||i.y)&&(r.Browser.touch&&Math.abs(i.x)+Math.abs(i.y)<3||(r.DomEvent.preventDefault(n),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=r.DomUtil.getPosition(this._element).subtract(i),r.DomUtil.addClass(t.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,r.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,r.Util.cancelAnimFrame(this._animRequest),this._animRequest=r.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag");r.DomUtil.setPosition(this._element,this._newPos);this.fire("drag")},_onUp:function(){r.DomUtil.removeClass(t.body,"leaflet-dragging");this._lastTarget&&(r.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var n in r.Draggable.MOVE)r.DomEvent.off(t,r.Draggable.MOVE[n],this._onMove).off(t,r.Draggable.END[n],this._onUp);r.DomUtil.enableImageDrag();r.DomUtil.enableTextSelection();this._moved&&this._moving&&(r.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)}));this._moving=!1}});r.Handler=r.Class.extend({initialize:function(n){this._map=n},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}});r.Map.mergeOptions({dragging:!0,inertia:!r.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,inertiaThreshold:r.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1});r.Map.Drag=r.Handler.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new r.Draggable(n._mapPane,n._container);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);if(n.options.worldCopyJump){this._draggable.on("predrag",this._onPreDrag,this);n.on("viewreset",this._onViewReset,this);n.whenReady(this._onViewReset,this)}}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var n=this._map;n._panAnim&&n._panAnim.stop();n.fire("movestart").fire("dragstart");n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var n=this._lastTime=+new Date,t=this._lastPos=this._draggable._newPos;this._positions.push(t);this._times.push(n);n-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var n=this._map.getSize()._divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(n).x;this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var i=this._worldWidth,t=Math.round(i/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,u=(r-t+n)%i+t-n,f=(r+t+n)%i-t-n,e=Math.abs(u+n)<Math.abs(f+n)?u:f;this._draggable._newPos.x=e},_onDragEnd:function(n){var t=this._map,i=t.options,e=+new Date-this._lastTime,l=!i.inertia||e>i.inertiaThreshold||!this._positions[0];if(t.fire("dragend",n),l)t.fire("moveend");else{var a=this._lastPos.subtract(this._positions[0]),v=(this._lastTime+e-this._times[0])/1e3,f=i.easeLinearity,o=a.multiplyBy(f/v),s=o.distanceTo([0,0]),h=Math.min(i.inertiaMaxSpeed,s),y=o.multiplyBy(h/s),c=h/(i.inertiaDeceleration*f),u=y.multiplyBy(-c/2).round();u.x&&u.y?(u=t._limitOffset(u,t.options.maxBounds),r.Util.requestAnimFrame(function(){t.panBy(u,{duration:c,easeLinearity:f,noMoveStart:!0})})):t.fire("moveend")}}});r.Map.addInitHook("addHandler","dragging",r.Map.Drag);r.Map.mergeOptions({doubleClickZoom:!0});r.Map.DoubleClickZoom=r.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var t=this._map,i=t.getZoom()+(n.originalEvent.shiftKey?-1:1);t.options.doubleClickZoom==="center"?t.setZoom(i):t.setZoomAround(n.containerPoint,i)}});r.Map.addInitHook("addHandler","doubleClickZoom",r.Map.DoubleClickZoom);r.Map.mergeOptions({scrollWheelZoom:!0});r.Map.ScrollWheelZoom=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this);r.DomEvent.on(this._map._container,"MozMousePixelScroll",r.DomEvent.preventDefault);this._delta=0},removeHooks:function(){r.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll);r.DomEvent.off(this._map._container,"MozMousePixelScroll",r.DomEvent.preventDefault)},_onWheelScroll:function(n){var i=r.DomEvent.getWheelDelta(n),t;this._delta+=i;this._lastMousePos=this._map.mouseEventToContainerPoint(n);this._startTime||(this._startTime=+new Date);t=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(r.bind(this._performZoom,this),t);r.DomEvent.preventDefault(n);r.DomEvent.stopPropagation(n)},_performZoom:function(){var t=this._map,n=this._delta,i=t.getZoom();(n=n>0?Math.ceil(n):Math.floor(n),n=Math.max(Math.min(n,4),-4),n=t._limitZoom(i+n)-i,this._delta=0,this._startTime=null,n)&&(t.options.scrollWheelZoom==="center"?t.setZoom(i+n):t.setZoomAround(this._lastMousePos,i+n))}});r.Map.addInitHook("addHandler","scrollWheelZoom",r.Map.ScrollWheelZoom);r.extend(r.DomEvent,{_touchstart:r.Browser.msPointer?"MSPointerDown":r.Browser.pointer?"pointerdown":"touchstart",_touchend:r.Browser.msPointer?"MSPointerUp":r.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(n,i,u){function y(n){var i,t,u;(r.Browser.pointer?(e.push(n.pointerId),i=e.length):i=n.touches.length,i>1)||(t=Date.now(),u=t-(o||t),f=n.touches?n.touches[0]:n,c=u>0&&u<=p,o=t)}function s(n){var u,s,t,h;if(r.Browser.pointer){if(u=e.indexOf(n.pointerId),u===-1)return;e.splice(u,1)}if(c){if(r.Browser.pointer){s={};for(h in f)t=f[h],s[h]=typeof t=="function"?t.bind(f):t;f=s}f.type="dblclick";i(f);o=null}}var o,c=!1,p=250,f,l="_leaflet_",a=this._touchstart,v=this._touchend,e=[],h;return n[l+a+u]=y,n[l+v+u]=s,h=r.Browser.pointer?t.documentElement:n,n.addEventListener(a,y,!1),h.addEventListener(v,s,!1),r.Browser.pointer&&h.addEventListener(r.DomEvent.POINTER_CANCEL,s,!1),this},removeDoubleTapListener:function(n,i){var u="_leaflet_";return n.removeEventListener(this._touchstart,n[u+this._touchstart+i],!1),(r.Browser.pointer?t.documentElement:n).removeEventListener(this._touchend,n[u+this._touchend+i],!1),r.Browser.pointer&&t.documentElement.removeEventListener(r.DomEvent.POINTER_CANCEL,n[u+this._touchend+i],!1),this}});r.extend(r.DomEvent,{POINTER_DOWN:r.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:r.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:r.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:r.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(n,t,i,r){switch(t){case"touchstart":return this.addPointerListenerStart(n,t,i,r);case"touchend":return this.addPointerListenerEnd(n,t,i,r);case"touchmove":return this.addPointerListenerMove(n,t,i,r);default:throw"Unknown touch event type";}},addPointerListenerStart:function(n,i,u,f){var e=this._pointers,s=function(n){var i,t;for(r.DomEvent.preventDefault(n),i=!1,t=0;t<e.length;t++)if(e[t].pointerId===n.pointerId){i=!0;break}i||e.push(n);n.touches=e.slice();n.changedTouches=[n];u(n)},o;return n["_leaflet_touchstart"+f]=s,n.addEventListener(this.POINTER_DOWN,s,!1),this._pointerDocumentListener||(o=function(n){for(var t=0;t<e.length;t++)if(e[t].pointerId===n.pointerId){e.splice(t,1);break}},t.documentElement.addEventListener(this.POINTER_UP,o,!1),t.documentElement.addEventListener(this.POINTER_CANCEL,o,!1),this._pointerDocumentListener=!0),this},addPointerListenerMove:function(n,t,i,r){function f(n){if(n.pointerType!==n.MSPOINTER_TYPE_MOUSE&&n.pointerType!=="mouse"||n.buttons!==0){for(var t=0;t<u.length;t++)if(u[t].pointerId===n.pointerId){u[t]=n;break}n.touches=u.slice();n.changedTouches=[n];i(n)}}var u=this._pointers;return n["_leaflet_touchmove"+r]=f,n.addEventListener(this.POINTER_MOVE,f,!1),this},addPointerListenerEnd:function(n,t,i,r){var u=this._pointers,f=function(n){for(var t=0;t<u.length;t++)if(u[t].pointerId===n.pointerId){u.splice(t,1);break}n.touches=u.slice();n.changedTouches=[n];i(n)};return n["_leaflet_touchend"+r]=f,n.addEventListener(this.POINTER_UP,f,!1),n.addEventListener(this.POINTER_CANCEL,f,!1),this},removePointerListener:function(n,t,i){var r=n["_leaflet_"+t+i];switch(t){case"touchstart":n.removeEventListener(this.POINTER_DOWN,r,!1);break;case"touchmove":n.removeEventListener(this.POINTER_MOVE,r,!1);break;case"touchend":n.removeEventListener(this.POINTER_UP,r,!1);n.removeEventListener(this.POINTER_CANCEL,r,!1)}return this}});r.Map.mergeOptions({touchZoom:r.Browser.touch&&!r.Browser.android23,bounceAtZoomLimits:!0});r.Map.TouchZoom=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){r.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var i=this._map;if(n.touches&&n.touches.length===2&&!i._animatingZoom&&!this._zooming){var u=i.mouseEventToLayerPoint(n.touches[0]),f=i.mouseEventToLayerPoint(n.touches[1]),e=i._getCenterLayerPoint();this._startCenter=u.add(f)._divideBy(2);this._startDist=u.distanceTo(f);this._moved=!1;this._zooming=!0;this._centerOffset=e.subtract(this._startCenter);i._panAnim&&i._panAnim.stop();r.DomEvent.on(t,"touchmove",this._onTouchMove,this).on(t,"touchend",this._onTouchEnd,this);r.DomEvent.preventDefault(n)}},_onTouchMove:function(n){var t=this._map,i,u;n.touches&&n.touches.length===2&&this._zooming&&(i=t.mouseEventToLayerPoint(n.touches[0]),u=t.mouseEventToLayerPoint(n.touches[1]),this._scale=i.distanceTo(u)/this._startDist,this._delta=i._add(u)._divideBy(2)._subtract(this._startCenter),this._scale!==1)&&(!t.options.bounceAtZoomLimits&&(t.getZoom()===t.getMinZoom()&&this._scale<1||t.getZoom()===t.getMaxZoom()&&this._scale>1)||(this._moved||(r.DomUtil.addClass(t._mapPane,"leaflet-touching"),t.fire("movestart").fire("zoomstart"),this._moved=!0),r.Util.cancelAnimFrame(this._animRequest),this._animRequest=r.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),r.DomEvent.preventDefault(n)))},_updateOnMove:function(){var n=this._map,t=this._getScaleOrigin(),i=n.layerPointToLatLng(t),r=n.getScaleZoom(this._scale);n._animateZoom(i,r,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){var n;if(!this._moved||!this._zooming){this._zooming=!1;return}n=this._map;this._zooming=!1;r.DomUtil.removeClass(n._mapPane,"leaflet-touching");r.Util.cancelAnimFrame(this._animRequest);r.DomEvent.off(t,"touchmove",this._onTouchMove).off(t,"touchend",this._onTouchEnd);var u=this._getScaleOrigin(),o=n.layerPointToLatLng(u),f=n.getZoom(),i=n.getScaleZoom(this._scale)-f,s=i>0?Math.ceil(i):Math.floor(i),e=n._limitZoom(f+s),h=n.getZoomScale(e)/this._scale;n._animateZoom(o,e,u,h)},_getScaleOrigin:function(){var n=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(n)}});r.Map.addInitHook("addHandler","touchZoom",r.Map.TouchZoom);r.Map.mergeOptions({tap:!0,tapTolerance:15});r.Map.Tap=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){r.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(n.touches){if(r.DomEvent.preventDefault(n),this._fireClick=!0,n.touches.length>1){this._fireClick=!1;clearTimeout(this._holdTimeout);return}var i=n.touches[0],u=i.target;this._startPos=this._newPos=new r.Point(i.clientX,i.clientY);u.tagName&&u.tagName.toLowerCase()==="a"&&r.DomUtil.addClass(u,"leaflet-active");this._holdTimeout=setTimeout(r.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3);r.DomEvent.on(t,"touchmove",this._onMove,this).on(t,"touchend",this._onUp,this)}},_onUp:function(n){if(clearTimeout(this._holdTimeout),r.DomEvent.off(t,"touchmove",this._onMove,this).off(t,"touchend",this._onUp,this),this._fireClick&&n&&n.changedTouches){var u=n.changedTouches[0],i=u.target;i&&i.tagName&&i.tagName.toLowerCase()==="a"&&r.DomUtil.removeClass(i,"leaflet-active");this._isTapValid()&&this._simulateEvent("click",u)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(n){var t=n.touches[0];this._newPos=new r.Point(t.clientX,t.clientY)},_simulateEvent:function(i,r){var u=t.createEvent("MouseEvents");u._simulated=!0;r.target._simulatedClick=!0;u.initMouseEvent(i,!0,!0,n,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null);r.target.dispatchEvent(u)}});r.Browser.touch&&!r.Browser.pointer&&r.Map.addInitHook("addHandler","tap",r.Map.Tap);r.Map.mergeOptions({boxZoom:!0});r.Map.BoxZoom=r.Handler.extend({initialize:function(n){this._map=n;this._container=n._container;this._pane=n._panes.overlayPane;this._moved=!1},addHooks:function(){r.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){r.DomEvent.off(this._container,"mousedown",this._onMouseDown);this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(n){if(this._moved=!1,!n.shiftKey||n.which!==1&&n.button!==1)return!1;r.DomUtil.disableTextSelection();r.DomUtil.disableImageDrag();this._startLayerPoint=this._map.mouseEventToLayerPoint(n);r.DomEvent.on(t,"mousemove",this._onMouseMove,this).on(t,"mouseup",this._onMouseUp,this).on(t,"keydown",this._onKeyDown,this)},_onMouseMove:function(n){this._moved||(this._box=r.DomUtil.create("div","leaflet-zoom-box",this._pane),r.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var t=this._startLayerPoint,i=this._box,u=this._map.mouseEventToLayerPoint(n),f=u.subtract(t),e=new r.Point(Math.min(u.x,t.x),Math.min(u.y,t.y));r.DomUtil.setPosition(i,e);this._moved=!0;i.style.width=Math.max(0,Math.abs(f.x)-4)+"px";i.style.height=Math.max(0,Math.abs(f.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor="");r.DomUtil.enableTextSelection();r.DomUtil.enableImageDrag();r.DomEvent.off(t,"mousemove",this._onMouseMove).off(t,"mouseup",this._onMouseUp).off(t,"keydown",this._onKeyDown)},_onMouseUp:function(n){var t,i,u;(this._finish(),t=this._map,i=t.mouseEventToLayerPoint(n),this._startLayerPoint.equals(i))||(u=new r.LatLngBounds(t.layerPointToLatLng(this._startLayerPoint),t.layerPointToLatLng(i)),t.fitBounds(u),t.fire("boxzoomend",{boxZoomBounds:u}))},_onKeyDown:function(n){n.keyCode===27&&this._finish()}});r.Map.addInitHook("addHandler","boxZoom",r.Map.BoxZoom);r.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1});r.Map.Keyboard=r.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(n){this._map=n;this._setPanOffset(n.options.keyboardPanOffset);this._setZoomOffset(n.options.keyboardZoomOffset)},addHooks:function(){var n=this._map._container;n.tabIndex===-1&&(n.tabIndex="0");r.DomEvent.on(n,"focus",this._onFocus,this).on(n,"blur",this._onBlur,this).on(n,"mousedown",this._onMouseDown,this);this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var n=this._map._container;r.DomEvent.off(n,"focus",this._onFocus,this).off(n,"blur",this._onBlur,this).off(n,"mousedown",this._onMouseDown,this);this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var i=t.body,r=t.documentElement,u=i.scrollTop||r.scrollTop,f=i.scrollLeft||r.scrollLeft;this._map._container.focus();n.scrollTo(f,u)}},_onFocus:function(){this._focused=!0;this._map.fire("focus")},_onBlur:function(){this._focused=!1;this._map.fire("blur")},_setPanOffset:function(n){for(var u=this._panKeys={},i=this.keyCodes,t=0,r=i.left.length;t<r;t++)u[i.left[t]]=[-1*n,0];for(t=0,r=i.right.length;t<r;t++)u[i.right[t]]=[n,0];for(t=0,r=i.down.length;t<r;t++)u[i.down[t]]=[0,n];for(t=0,r=i.up.length;t<r;t++)u[i.up[t]]=[0,-1*n]},_setZoomOffset:function(n){for(var u=this._zoomKeys={},i=this.keyCodes,t=0,r=i.zoomIn.length;t<r;t++)u[i.zoomIn[t]]=n;for(t=0,r=i.zoomOut.length;t<r;t++)u[i.zoomOut[t]]=-n},_addHooks:function(){r.DomEvent.on(t,"keydown",this._onKeyDown,this)},_removeHooks:function(){r.DomEvent.off(t,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){var i=n.keyCode,t=this._map;if(i in this._panKeys){if(t._panAnim&&t._panAnim._inProgress)return;t.panBy(this._panKeys[i]);t.options.maxBounds&&t.panInsideBounds(t.options.maxBounds)}else if(i in this._zoomKeys)t.setZoom(t.getZoom()+this._zoomKeys[i]);else return;r.DomEvent.stop(n)}});r.Map.addInitHook("addHandler","keyboard",r.Map.Keyboard);r.Handler.MarkerDrag=r.Handler.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new r.Draggable(n,n));this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this);this._draggable.enable();r.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this);this._draggable.disable();r.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var n=this._marker,t=n._shadow,i=r.DomUtil.getPosition(n._icon),u=n._map.layerPointToLatLng(i);t&&r.DomUtil.setPosition(t,i);n._latlng=u;n.fire("move",{latlng:u}).fire("drag")},_onDragEnd:function(n){this._marker.fire("moveend").fire("dragend",n)}});r.Control=r.Class.extend({options:{position:"topright"},initialize:function(n){r.setOptions(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var t=this._map;return t&&t.removeControl(this),this.options.position=n,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this._map=n;var t=this._container=this.onAdd(n),u=this.getPosition(),i=n._controlCorners[u];return r.DomUtil.addClass(t,"leaflet-control"),u.indexOf("bottom")!==-1?i.insertBefore(t,i.firstChild):i.appendChild(t),this},removeFrom:function(n){var t=this.getPosition(),i=n._controlCorners[t];if(i.removeChild(this._container),this._map=null,this.onRemove)this.onRemove(n);return this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}});r.control=function(n){return new r.Control(n)};r.Map.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.removeFrom(this),this},_initControlPos:function(){function n(n,f){var e=t+n+" "+t+f;i[n+f]=r.DomUtil.create("div",e,u)}var i=this._controlCorners={},t="leaflet-",u=this._controlContainer=r.DomUtil.create("div",t+"control-container",this._container);n("top","left");n("top","right");n("bottom","left");n("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}});r.Control.Zoom=r.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(n){var t="leaflet-control-zoom",i=r.DomUtil.create("div",t+" leaflet-bar");this._map=n;this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,t+"-in",i,this._zoomIn,this);this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,t+"-out",i,this._zoomOut,this);this._updateDisabled();n.on("zoomend zoomlevelschange",this._updateDisabled,this);return i},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(n){this._map.zoomIn(n.shiftKey?3:1)},_zoomOut:function(n){this._map.zoomOut(n.shiftKey?3:1)},_createButton:function(n,t,i,u,f,e){var o=r.DomUtil.create("a",i,u),s;o.innerHTML=n;o.href="#";o.title=t;s=r.DomEvent.stopPropagation;r.DomEvent.on(o,"click",s).on(o,"mousedown",s).on(o,"dblclick",s).on(o,"click",r.DomEvent.preventDefault).on(o,"click",f,e).on(o,"click",this._refocusOnMap,e);return o},_updateDisabled:function(){var n=this._map,t="leaflet-disabled";r.DomUtil.removeClass(this._zoomInButton,t);r.DomUtil.removeClass(this._zoomOutButton,t);n._zoom===n.getMinZoom()&&r.DomUtil.addClass(this._zoomOutButton,t);n._zoom===n.getMaxZoom()&&r.DomUtil.addClass(this._zoomInButton,t)}});r.Map.mergeOptions({zoomControl:!0});r.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new r.Control.Zoom,this.addControl(this.zoomControl))});r.control.zoom=function(n){return new r.Control.Zoom(n)};r.Control.Attribution=r.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet<\/a>'},initialize:function(n){r.setOptions(this,n);this._attributions={}},onAdd:function(n){this._container=r.DomUtil.create("div","leaflet-control-attribution");r.DomEvent.disableClickPropagation(this._container);for(var t in n._layers)n._layers[t].getAttribution&&this.addAttribution(n._layers[t].getAttribution());n.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this);return this._update(),this._container},onRemove:function(n){n.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){if(n)return this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this},removeAttribution:function(n){if(n)return this._attributions[n]&&(this._attributions[n]--,this._update()),this},_update:function(){var n,i,t;if(this._map){n=[];for(i in this._attributions)this._attributions[i]&&n.push(i);t=[];this.options.prefix&&t.push(this.options.prefix);n.length&&t.push(n.join(", "));this._container.innerHTML=t.join(" | ")}},_onLayerAdd:function(n){n.layer.getAttribution&&this.addAttribution(n.layer.getAttribution())},_onLayerRemove:function(n){n.layer.getAttribution&&this.removeAttribution(n.layer.getAttribution())}});r.Map.mergeOptions({attributionControl:!0});r.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new r.Control.Attribution).addTo(this))});r.control.attribution=function(n){return new r.Control.Attribution(n)};r.Control.Scale=r.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(n){this._map=n;var t="leaflet-control-scale",i=r.DomUtil.create("div",t),u=this.options;this._addScales(u,t,i);n.on(u.updateWhenIdle?"moveend":"move",this._update,this);return n.whenReady(this._update,this),i},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,t,i){n.metric&&(this._mScale=r.DomUtil.create("div",t+"-line",i));n.imperial&&(this._iScale=r.DomUtil.create("div",t+"-line",i))},_update:function(){var n=this._map.getBounds(),u=n.getCenter().lat,f=6378137*Math.PI*Math.cos(u*Math.PI/180),e=f*(n.getNorthEast().lng-n.getSouthWest().lng)/180,t=this._map.getSize(),i=this.options,r=0;t.x>0&&(r=e*(i.maxWidth/t.x));this._updateScales(i,r)},_updateScales:function(n,t){n.metric&&t&&this._updateMetric(t);n.imperial&&t&&this._updateImperial(t)},_updateMetric:function(n){var t=this._getRoundNum(n);this._mScale.style.width=this._getScaleWidth(t/n)+"px";this._mScale.innerHTML=t<1e3?t+" m":t/1e3+" km"},_updateImperial:function(n){var t=n*3.2808399,i=this._iScale,r,u,f;t>5280?(r=t/5280,u=this._getRoundNum(r),i.style.width=this._getScaleWidth(u/r)+"px",i.innerHTML=u+" mi"):(f=this._getRoundNum(t),i.style.width=this._getScaleWidth(f/t)+"px",i.innerHTML=f+" ft")},_getScaleWidth:function(n){return Math.round(this.options.maxWidth*n)-10},_getRoundNum:function(n){var i=Math.pow(10,(Math.floor(n)+"").length-1),t=n/i;return t=t>=10?10:t>=5?5:t>=3?3:t>=2?2:1,i*t}});r.control.scale=function(n){return new r.Control.Scale(n)};r.Control.Layers=r.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(n,t,i){r.setOptions(this,i);this._layers={};this._lastZIndex=0;this._handlingClick=!1;for(var u in n)this._addLayer(n[u],u);for(u in t)this._addLayer(t[u],u,!0)},onAdd:function(n){this._initLayout();this._update();n.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this);return this._container},onRemove:function(n){n.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(n,t){return this._addLayer(n,t),this._update(),this},addOverlay:function(n,t){return this._addLayer(n,t,!0),this._update(),this},removeLayer:function(n){var t=r.stamp(n);return delete this._layers[t],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",n=this._container=r.DomUtil.create("div",t),i,u;if(n.setAttribute("aria-haspopup",!0),r.Browser.touch)r.DomEvent.on(n,"click",r.DomEvent.stopPropagation);else r.DomEvent.disableClickPropagation(n).disableScrollPropagation(n);if(i=this._form=r.DomUtil.create("form",t+"-list"),this.options.collapsed){if(!r.Browser.android)r.DomEvent.on(n,"mouseover",this._expand,this).on(n,"mouseout",this._collapse,this);if(u=this._layersLink=r.DomUtil.create("a",t+"-toggle",n),u.href="#",u.title="Layers",r.Browser.touch)r.DomEvent.on(u,"click",r.DomEvent.stop).on(u,"click",this._expand,this);else r.DomEvent.on(u,"focus",this._expand,this);r.DomEvent.on(i,"click",function(){setTimeout(r.bind(this._onInputClick,this),0)},this);this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=r.DomUtil.create("div",t+"-base",i);this._separator=r.DomUtil.create("div",t+"-separator",i);this._overlaysList=r.DomUtil.create("div",t+"-overlays",i);n.appendChild(i)},_addLayer:function(n,t,i){var u=r.stamp(n);this._layers[u]={layer:n,name:t,overlay:i};this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="";this._overlaysList.innerHTML="";var t=!1,i=!1,r,n;for(r in this._layers)n=this._layers[r],this._addItem(n),i=i||n.overlay,t=t||!n.overlay;this._separator.style.display=i&&t?"":"none"}},_onLayerChange:function(n){var t=this._layers[r.stamp(n.layer)],i;t&&(this._handlingClick||this._update(),i=t.overlay?n.type==="layeradd"?"overlayadd":"overlayremove":n.type==="layeradd"?"baselayerchange":null,i&&this._map.fire(i,t))},_createRadioElement:function(n,i){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"',u;return i&&(r+=' checked="checked"'),r+="/>",u=t.createElement("div"),u.innerHTML=r,u.firstChild},_addItem:function(n){var u=t.createElement("label"),i,e=this._map.hasLayer(n.layer),f,o;n.overlay?(i=t.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=e):i=this._createRadioElement("leaflet-base-layers",e);i.layerId=r.stamp(n.layer);r.DomEvent.on(i,"click",this._onInputClick,this);return f=t.createElement("span"),f.innerHTML=" "+n.name,u.appendChild(i),u.appendChild(f),o=n.overlay?this._overlaysList:this._baseLayersList,o.appendChild(u),u},_onInputClick:function(){var t,i,n,r=this._form.getElementsByTagName("input"),u=r.length;for(this._handlingClick=!0,t=0;t<u;t++)i=r[t],n=this._layers[i.layerId],i.checked&&!this._map.hasLayer(n.layer)?this._map.addLayer(n.layer):!i.checked&&this._map.hasLayer(n.layer)&&this._map.removeLayer(n.layer);this._handlingClick=!1;this._refocusOnMap()},_expand:function(){r.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}});r.control.layers=function(n,t,i){return new r.Control.Layers(n,t,i)};r.PosAnimation=r.Class.extend({includes:r.Mixin.Events,run:function(n,t,i,u){this.stop();this._el=n;this._inProgress=!0;this._newPos=t;this.fire("start");n.style[r.DomUtil.TRANSITION]="all "+(i||.25)+"s cubic-bezier(0,0,"+(u||.5)+",1)";r.DomEvent.on(n,r.DomUtil.TRANSITION_END,this._onTransitionEnd,this);r.DomUtil.setPosition(n,t);r.Util.falseFn(n.offsetWidth);this._stepTimer=setInterval(r.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(r.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),r.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var n=this._getPos();if(!n){this._onTransitionEnd();return}this._el._leaflet_pos=n;this.fire("step")},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var i,u,t,e=this._el,f=n.getComputedStyle(e);if(r.Browser.any3d){if(t=f[r.DomUtil.TRANSFORM].match(this._transformRe),!t)return;i=parseFloat(t[1]);u=parseFloat(t[2])}else i=parseFloat(f.left),u=parseFloat(f.top);return new r.Point(i,u,!0)},_onTransitionEnd:function(){(r.DomEvent.off(this._el,r.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress)&&(this._inProgress=!1,this._el.style[r.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}});r.Map.include({setView:function(n,t,u){if(t=t===i?this._zoom:this._limitZoom(t),n=this._limitCenter(r.latLng(n),t,this.options.maxBounds),u=u||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==i&&(u.zoom=r.extend({animate:u.animate},u.zoom),u.pan=r.extend({animate:u.animate},u.pan));var f=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,t,u.zoom):this._tryAnimatedPan(n,u.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(n,t),this},panBy:function(n,t){if(n=r.point(n).round(),t=t||{},!n.x&&!n.y)return this;if(!this._panAnim){this._panAnim=new r.PosAnimation;this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)}if(t.noMoveStart||this.fire("movestart"),t.animate!==!1){r.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(n);this._panAnim.run(this._mapPane,i,t.duration||.25,t.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){r.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_tryAnimatedPan:function(n,t){var i=this._getCenterOffset(n)._floor();return(t&&t.animate)!==!0&&!this.getSize().contains(i)?!1:(this.panBy(i,t),!0)}});r.PosAnimation=r.DomUtil.TRANSITION?r.PosAnimation:r.PosAnimation.extend({run:function(n,t,i,u){this.stop();this._el=n;this._inProgress=!0;this._duration=i||.25;this._easeOutPower=1/Math.max(u||.5,.2);this._startPos=r.DomUtil.getPosition(n);this._offset=t.subtract(this._startPos);this._startTime=+new Date;this.fire("start");this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=r.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(){var n=+new Date-this._startTime,t=this._duration*1e3;n<t?this._runFrame(this._easeOut(n/t)):(this._runFrame(1),this._complete())},_runFrame:function(n){var t=this._startPos.add(this._offset.multiplyBy(n));r.DomUtil.setPosition(this._el,t);this.fire("step")},_complete:function(){r.Util.cancelAnimFrame(this._animId);this._inProgress=!1;this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}});r.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});r.DomUtil.TRANSITION&&r.Map.addInitHook(function(){if(this._zoomAnimated=this.options.zoomAnimation&&r.DomUtil.TRANSITION&&r.Browser.any3d&&!r.Browser.android23&&!r.Browser.mobileOpera,this._zoomAnimated)r.DomEvent.on(this._mapPane,r.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)});r.Map.include(r.DomUtil.TRANSITION?{_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,t,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),u=this._getCenterOffset(n)._divideBy(1-1/r),f=this._getCenterLayerPoint()._add(u);return i.animate!==!0&&!this.getSize().contains(u)?!1:(this.fire("movestart").fire("zoomstart"),this._animateZoom(n,t,f,r,null,!0),!0)},_animateZoom:function(n,t,i,u,f,e,o){o||(this._animatingZoom=!0);r.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim");this._animateToCenter=n;this._animateToZoom=t;r.Draggable&&(r.Draggable._disabled=!0);r.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:n,zoom:t,origin:i,scale:u,delta:f,backwards:e});setTimeout(r.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,r.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),r.Draggable&&(r.Draggable._disabled=!1))}}:{});r.TileLayer.include({_animateZoom:function(n){this._animating||(this._animating=!0,this._prepareBgBuffer());var t=this._bgBuffer,i=r.DomUtil.TRANSFORM,u=n.delta?r.DomUtil.getTranslateString(n.delta):t.style[i],f=r.DomUtil.getScaleString(n.scale,n.origin);t.style[i]=n.backwards?f+" "+u:u+" "+f},_endZoomAnim:function(){var n=this._tileContainer,i=this._bgBuffer,t;n.style.visibility="";n.parentNode.appendChild(n);r.Util.falseFn(i.offsetWidth);t=this._map.getZoom();(t>this.options.maxZoom||t<this.options.minZoom)&&this._clearBgBuffer();this._animating=!1},_clearBgBuffer:function(){var n=this._map;!n||n._animatingZoom||n.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[r.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,n=this._bgBuffer,i=this._getLoadedTilesPercentage(n),u=this._getLoadedTilesPercentage(t);if(n&&i>.5&&u<.5){t.style.visibility="hidden";this._stopLoadingImages(t);return}n.style.visibility="hidden";n.style[r.DomUtil.TRANSFORM]="";this._tileContainer=n;n=this._bgBuffer=t;this._stopLoadingImages(n);clearTimeout(this._clearBgBufferTimer)},_getLoadedTilesPercentage:function(n){for(var r=n.getElementsByTagName("img"),u=0,t=0,i=r.length;t<i;t++)r[t].complete&&u++;return u/i},_stopLoadingImages:function(n){for(var u=Array.prototype.slice.call(n.getElementsByTagName("img")),t,i=0,f=u.length;i<f;i++)t=u[i],t.complete||(t.onload=r.Util.falseFn,t.onerror=r.Util.falseFn,t.src=r.Util.emptyImageUrl,t.parentNode.removeChild(t))}});r.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:Infinity,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(n){if(n=this._locateOptions=r.extend(this._defaultLocateOptions,n),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=r.bind(this._handleGeolocationResponse,this),i=r.bind(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,n):navigator.geolocation.getCurrentPosition(t,i,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){var t=n.code,i=n.message||(t===1?"permission denied":t===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld();this.fire("locationerror",{code:t,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(n){var t=n.coords.latitude,u=n.coords.longitude,o=new r.LatLng(t,u),f=180*n.coords.accuracy/40075017,s=f/Math.cos(r.LatLng.DEG_TO_RAD*t),h=r.latLngBounds([t-f,u-s],[t+f,u+s]),c=this._locateOptions,l,e,i;c.setView&&(l=Math.min(this.getBoundsZoom(h),c.maxZoom),this.setView(o,l));e={latlng:o,bounds:h,timestamp:n.timestamp};for(i in n.coords)typeof n.coords[i]=="number"&&(e[i]=n.coords[i]);this.fire("locationfound",e)}})}(window,document);
//! moment.js
//! version : 2.10.6
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function(n,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):n.moment=t()})(this,function(){"use strict";function i(){return ru.apply(null,arguments)}function eo(n){ru=n}function ui(n){return Object.prototype.toString.call(n)==="[object Array]"}function fi(n){return n instanceof Date||Object.prototype.toString.call(n)==="[object Date]"}function oo(n,t){for(var r=[],i=0;i<n.length;++i)r.push(t(n[i],i));return r}function ft(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function ei(n,t){for(var i in t)ft(t,i)&&(n[i]=t[i]);return ft(t,"toString")&&(n.toString=t.toString),ft(t,"valueOf")&&(n.valueOf=t.valueOf),n}function kt(n,t,i,r){return sf(n,t,i,r,!0).utc()}function so(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function e(n){return n._pf==null&&(n._pf=so()),n._pf}function uu(n){if(n._isValid==null){var t=e(n);n._isValid=!isNaN(n._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated;n._strict&&(n._isValid=n._isValid&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined)}return n._isValid}function fu(n){var t=kt(NaN);return n!=null?ei(e(t),n):e(t).userInvalidated=!0,t}function gi(n,t){var u,i,r;if(typeof t._isAMomentObject!="undefined"&&(n._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(n._i=t._i),typeof t._f!="undefined"&&(n._f=t._f),typeof t._l!="undefined"&&(n._l=t._l),typeof t._strict!="undefined"&&(n._strict=t._strict),typeof t._tzm!="undefined"&&(n._tzm=t._tzm),typeof t._isUTC!="undefined"&&(n._isUTC=t._isUTC),typeof t._offset!="undefined"&&(n._offset=t._offset),typeof t._pf!="undefined"&&(n._pf=e(t)),typeof t._locale!="undefined"&&(n._locale=t._locale),di.length>0)for(u in di)i=di[u],r=t[i],typeof r!="undefined"&&(n[i]=r);return n}function dt(n){gi(this,n);this._d=new Date(n._d!=null?n._d.getTime():NaN);nr===!1&&(nr=!0,i.updateOffset(this),nr=!1)}function tt(n){return n instanceof dt||n!=null&&n._isAMomentObject!=null}function v(n){return n<0?Math.ceil(n):Math.floor(n)}function s(n){var t=+n,i=0;return t!==0&&isFinite(t)&&(i=v(t)),i}function eu(n,t,i){for(var f=Math.min(n.length,t.length),e=Math.abs(n.length-t.length),u=0,r=0;r<f;r++)(i&&n[r]!==t[r]||!i&&s(n[r])!==s(t[r]))&&u++;return u+e}function ou(){}function su(n){return n?n.toLowerCase().replace("_","-"):n}function ho(n){for(var r=0,i,t,f,u;r<n.length;){for(u=su(n[r]).split("-"),i=u.length,t=su(n[r+1]),t=t?t.split("-"):null;i>0;){if(f=hu(u.slice(0,i).join("-")),f)return f;if(t&&t.length>=i&&eu(u,t,!0)>=i-1)break;i--}r++}return null}function hu(n){var t=null;if(!et[n]&&typeof module!="undefined"&&module&&module.exports)try{t=oi._abbr;require("./locale/"+n);gt(t)}catch(i){}return et[n]}function gt(n,t){var i;return n&&(i=typeof t=="undefined"?ot(n):cu(n,t),i&&(oi=i)),oi._abbr}function cu(n,t){return t!==null?(t.abbr=n,et[n]=et[n]||new ou,et[n].set(t),gt(n),et[n]):(delete et[n],null)}function ot(n){var t;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return oi;if(!ui(n)){if(t=hu(n),t)return t;n=[n]}return ho(n)}function l(n,t){var i=n.toLowerCase();ni[i]=ni[i+"s"]=ni[t]=n}function p(n){return typeof n=="string"?ni[n]||ni[n.toLowerCase()]:undefined}function lu(n){var r={},t;for(var i in n)ft(n,i)&&(t=p(i),t&&(r[t]=n[i]));return r}function pt(n,t){return function(r){return r!=null?(au(this,n,r),i.updateOffset(this,t),this):si(this,n)}}function si(n,t){return n._d["get"+(n._isUTC?"UTC":"")+t]()}function au(n,t,i){return n._d["set"+(n._isUTC?"UTC":"")+t](i)}function vu(n,t){var i;if(typeof n=="object")for(i in n)this.set(i,n[i]);else if(n=p(n),typeof this[n]=="function")return this[n](t);return this}function tr(n,t,i){var r=""+Math.abs(n),u=t-r.length,f=n>=0;return(f?i?"+":"":"-")+Math.pow(10,Math.max(0,u)).toString().substr(1)+r}function r(n,t,i,r){var u=r;typeof r=="string"&&(u=function(){return this[r]()});n&&(wt[n]=u);t&&(wt[t[0]]=function(){return tr(u.apply(this,arguments),t[1],t[2])});i&&(wt[i]=function(){return this.localeData().ordinal(u.apply(this,arguments),n)})}function co(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function lo(n){for(var i=n.match(yu),t=0,r=i.length;t<r;t++)i[t]=wt[i[t]]?wt[i[t]]:co(i[t]);return function(u){var f="";for(t=0;t<r;t++)f+=i[t]instanceof Function?i[t].call(u,n):i[t];return f}}function rr(n,t){return n.isValid()?(t=pu(t,n.localeData()),ir[t]=ir[t]||lo(t),ir[t](n)):n.localeData().invalidDate()}function pu(n,t){function r(n){return t.longDateFormat(n)||n}var i=5;for(hi.lastIndex=0;i>=0&&hi.test(n);)n=n.replace(hi,r),hi.lastIndex=0,i-=1;return n}function ao(n){return typeof n=="function"&&Object.prototype.toString.call(n)==="[object Function]"}function t(n,t,i){er[n]=ao(t)?t:function(n){return n&&i?i:t}}function vo(n,t){return ft(er,n)?er[n](t._strict,t._locale):new RegExp(yo(n))}function yo(n){return n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(n,t,i,r,u){return t||i||r||u}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function c(n,t){var i,r=t;for(typeof n=="string"&&(n=[n]),typeof t=="number"&&(r=function(n,i){i[t]=s(n)}),i=0;i<n.length;i++)or[n[i]]=r}function ii(n,t){c(n,function(n,i,r,u){r._w=r._w||{};t(n,r._w,r,u)})}function po(n,t,i){t!=null&&ft(or,n)&&or[n](t,i._a,i,n)}function sr(n,t){return new Date(Date.UTC(n,t+1,0)).getUTCDate()}function wo(n){return this._months[n.month()]}function bo(n){return this._monthsShort[n.month()]}function ko(n,t,i){var r,u,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++)if((u=kt([2e3,r]),i&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(u,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(u,"").replace(".","")+"$","i")),i||this._monthsParse[r]||(f="^"+this.months(u,"")+"|^"+this.monthsShort(u,""),this._monthsParse[r]=new RegExp(f.replace(".",""),"i")),i&&t==="MMMM"&&this._longMonthsParse[r].test(n))||i&&t==="MMM"&&this._shortMonthsParse[r].test(n)||!i&&this._monthsParse[r].test(n))return r}function gu(n,t){var i;return typeof t=="string"&&(t=n.localeData().monthsParse(t),typeof t!="number")?n:(i=Math.min(n.date(),sr(n.year(),t)),n._d["set"+(n._isUTC?"UTC":"")+"Month"](t,i),n)}function nf(n){return n!=null?(gu(this,n),i.updateOffset(this,!0),this):si(this,"Month")}function go(){return sr(this.year(),this.month())}function hr(n){var i,t=n._a;return t&&e(n).overflow===-2&&(i=t[g]<0||t[g]>11?g:t[k]<1||t[k]>sr(t[b],t[g])?k:t[a]<0||t[a]>24||t[a]===24&&(t[st]!==0||t[ht]!==0||t[ct]!==0)?a:t[st]<0||t[st]>59?st:t[ht]<0||t[ht]>59?ht:t[ct]<0||t[ct]>999?ct:-1,e(n)._overflowDayOfYear&&(i<b||i>k)&&(i=k),e(n).overflow=i),n}function tf(n){i.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+n)}function w(n,t){var i=!0;return ei(function(){return i&&(tf(n+"\n"+(new Error).stack),i=!1),t.apply(this,arguments)},t)}function ns(n,t){cr[n]||(tf(t),cr[n]=!0)}function rf(n){var t,i,r=n._i,u=ts.exec(r);if(u){for(e(n).iso=!0,t=0,i=lr.length;t<i;t++)if(lr[t][1].exec(r)){n._f=lr[t][0];break}for(t=0,i=ar.length;t<i;t++)if(ar[t][1].exec(r)){n._f+=(u[6]||" ")+ar[t][0];break}r.match(yi)&&(n._f+="Z");wr(n)}else n._isValid=!1}function rs(n){var t=is.exec(n._i);if(t!==null){n._d=new Date(+t[1]);return}rf(n);n._isValid===!1&&(delete n._isValid,i.createFromInputFallback(n))}function us(n,t,i,r,u,f,e){var o=new Date(n,t,i,r,u,f,e);return n<1970&&o.setFullYear(n),o}function vr(n){var t=new Date(Date.UTC.apply(null,arguments));return n<1970&&t.setUTCFullYear(n),t}function uf(n){return ff(n)?366:365}function ff(n){return n%4==0&&n%100!=0||n%400==0}function fs(){return ff(this.year())}function lt(n,t,i){var f=i-t,r=i-n.day(),u;return r>f&&(r-=7),r<f-7&&(r+=7),u=o(n).add(r,"d"),{week:Math.ceil(u.dayOfYear()/7),year:u.year()}}function es(n){return lt(n,this._week.dow,this._week.doy).week}function os(){return this._week.dow}function ss(){return this._week.doy}function hs(n){var t=this.localeData().week(this);return n==null?t:this.add((n-t)*7,"d")}function cs(n){var t=lt(this,1,4).week;return n==null?t:this.add((n-t)*7,"d")}function ls(n,t,i,r,u){var o=6+u-r,s=vr(n,0,1+o),e=s.getUTCDay(),f;return e<u&&(e+=7),i=i!=null?1*i:u,f=1+o+7*(t-1)-e+i,{year:f>0?n:n-1,dayOfYear:f>0?f:uf(n-1)+f}}function as(n){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return n==null?t:this.add(n-t,"d")}function bt(n,t,i){return n!=null?n:t!=null?t:i}function vs(n){var t=new Date;return n._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function pr(n){var t,i,r=[],u,f;if(!n._d){for(u=vs(n),n._w&&n._a[k]==null&&n._a[g]==null&&ys(n),n._dayOfYear&&(f=bt(n._a[b],u[b]),n._dayOfYear>uf(f)&&(e(n)._overflowDayOfYear=!0),i=vr(f,0,n._dayOfYear),n._a[g]=i.getUTCMonth(),n._a[k]=i.getUTCDate()),t=0;t<3&&n._a[t]==null;++t)n._a[t]=r[t]=u[t];for(;t<7;t++)n._a[t]=r[t]=n._a[t]==null?t===2?1:0:n._a[t];n._a[a]===24&&n._a[st]===0&&n._a[ht]===0&&n._a[ct]===0&&(n._nextDay=!0,n._a[a]=0);n._d=(n._useUTC?vr:us).apply(null,r);n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm);n._nextDay&&(n._a[a]=24)}}function ys(n){var t,e,u,r,i,f,s;t=n._w;t.GG!=null||t.W!=null||t.E!=null?(i=1,f=4,e=bt(t.GG,n._a[b],lt(o(),1,4).year),u=bt(t.W,1),r=bt(t.E,1)):(i=n._locale._week.dow,f=n._locale._week.doy,e=bt(t.gg,n._a[b],lt(o(),i,f).year),u=bt(t.w,1),t.d!=null?(r=t.d,r<i&&++u):r=t.e!=null?t.e+i:i);s=ls(e,u,r,f,i);n._a[b]=s.year;n._dayOfYear=s.dayOfYear}function wr(n){if(n._f===i.ISO_8601){rf(n);return}n._a=[];e(n).empty=!0;for(var t=""+n._i,r,u,s,c=t.length,h=0,o=pu(n._f,n._locale).match(yu)||[],f=0;f<o.length;f++)u=o[f],r=(t.match(vo(u,n))||[])[0],r&&(s=t.substr(0,t.indexOf(r)),s.length>0&&e(n).unusedInput.push(s),t=t.slice(t.indexOf(r)+r.length),h+=r.length),wt[u]?(r?e(n).empty=!1:e(n).unusedTokens.push(u),po(u,r,n)):n._strict&&!r&&e(n).unusedTokens.push(u);e(n).charsLeftOver=c-h;t.length>0&&e(n).unusedInput.push(t);e(n).bigHour===!0&&n._a[a]<=12&&n._a[a]>0&&(e(n).bigHour=undefined);n._a[a]=ps(n._locale,n._a[a],n._meridiem);pr(n);hr(n)}function ps(n,t,i){var r;return i==null?t:n.meridiemHour!=null?n.meridiemHour(t,i):n.isPM!=null?(r=n.isPM(i),r&&t<12&&(t+=12),r||t!==12||(t=0),t):t}function ws(n){var t,f,u,r,i;if(n._f.length===0){e(n).invalidFormat=!0;n._d=new Date(NaN);return}for(r=0;r<n._f.length;r++)(i=0,t=gi({},n),n._useUTC!=null&&(t._useUTC=n._useUTC),t._f=n._f[r],wr(t),uu(t))&&(i+=e(t).charsLeftOver,i+=e(t).unusedTokens.length*10,e(t).score=i,(u==null||i<u)&&(u=i,f=t));ei(n,f||t)}function bs(n){if(!n._d){var t=lu(n._i);n._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond];pr(n)}}function ks(n){var t=new dt(hr(of(n)));return t._nextDay&&(t.add(1,"d"),t._nextDay=undefined),t}function of(n){var t=n._i,i=n._f;return(n._locale=n._locale||ot(n._l),t===null||i===undefined&&t==="")?fu({nullInput:!0}):(typeof t=="string"&&(n._i=t=n._locale.preparse(t)),tt(t))?new dt(hr(t)):(ui(i)?ws(n):i?wr(n):fi(t)?n._d=t:ds(n),n)}function ds(n){var t=n._i;t===undefined?n._d=new Date:fi(t)?n._d=new Date(+t):typeof t=="string"?rs(n):ui(t)?(n._a=oo(t.slice(0),function(n){return parseInt(n,10)}),pr(n)):typeof t=="object"?bs(n):typeof t=="number"?n._d=new Date(t):i.createFromInputFallback(n)}function sf(n,t,i,r,u){var f={};return typeof i=="boolean"&&(r=i,i=undefined),f._isAMomentObject=!0,f._useUTC=f._isUTC=u,f._l=i,f._i=n,f._f=t,f._strict=r,ks(f)}function o(n,t,i,r){return sf(n,t,i,r,!1)}function lf(n,t){var r,i;if(t.length===1&&ui(t[0])&&(t=t[0]),!t.length)return o();for(r=t[0],i=1;i<t.length;++i)(!t[i].isValid()||t[i][n](r))&&(r=t[i]);return r}function gs(){var n=[].slice.call(arguments,0);return lf("isBefore",n)}function nh(){var n=[].slice.call(arguments,0);return lf("isAfter",n)}function pi(n){var t=lu(n),i=t.year||0,r=t.quarter||0,u=t.month||0,f=t.week||0,e=t.day||0,o=t.hour||0,s=t.minute||0,h=t.second||0,c=t.millisecond||0;this._milliseconds=+c+h*1e3+s*6e4+o*36e5;this._days=+e+f*7;this._months=+u+r*3+i*12;this._data={};this._locale=ot();this._bubble()}function br(n){return n instanceof pi}function af(n,t){r(n,0,0,function(){var n=this.utcOffset(),i="+";return n<0&&(n=-n,i="-"),i+tr(~~(n/60),2)+t+tr(~~n%60,2)})}function kr(n){var i=(n||"").match(yi)||[],u=i[i.length-1]||[],t=(u+"").match(vf)||["-",0,0],r=+(t[1]*60)+s(t[2]);return t[0]==="+"?r:-r}function dr(n,t){var r,u;return t._isUTC?(r=t.clone(),u=(tt(n)||fi(n)?+n:+o(n))-+r,r._d.setTime(+r._d+u),i.updateOffset(r,!1),r):o(n).local()}function gr(n){return-Math.round(n._d.getTimezoneOffset()/15)*15}function th(n,t){var r=this._offset||0,u;return n!=null?(typeof n=="string"&&(n=kr(n)),Math.abs(n)<16&&(n=n*60),!this._isUTC&&t&&(u=gr(this)),this._offset=n,this._isUTC=!0,u!=null&&this.add(u,"m"),r!==n&&(!t||this._changeInProgress?df(this,it(n-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:gr(this)}function ih(n,t){return n!=null?(typeof n!="string"&&(n=-n),this.utcOffset(n,t),this):-this.utcOffset()}function rh(n){return this.utcOffset(0,n)}function uh(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(gr(this),"m")),this}function fh(){return this._tzm?this.utcOffset(this._tzm):typeof this._i=="string"&&this.utcOffset(kr(this._i)),this}function eh(n){return n=n?o(n).utcOffset():0,(this.utcOffset()-n)%60==0}function oh(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function sh(){var n,t;return typeof this._isDSTShifted!="undefined"?this._isDSTShifted:(n={},gi(n,this),n=of(n),n._a?(t=n._isUTC?kt(n._a):o(n._a),this._isDSTShifted=this.isValid()&&eu(n._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted)}function hh(){return!this._isUTC}function ch(){return this._isUTC}function yf(){return this._isUTC&&this._offset===0}function it(n,t){var i=n,r=null,u,f,e;return br(n)?i={ms:n._milliseconds,d:n._days,M:n._months}:typeof n=="number"?(i={},t?i[t]=n:i.milliseconds=n):(r=pf.exec(n))?(u=r[1]==="-"?-1:1,i={y:0,d:s(r[k])*u,h:s(r[a])*u,m:s(r[st])*u,s:s(r[ht])*u,ms:s(r[ct])*u}):(r=wf.exec(n))?(u=r[1]==="-"?-1:1,i={y:at(r[2],u),M:at(r[3],u),d:at(r[4],u),h:at(r[5],u),m:at(r[6],u),s:at(r[7],u),w:at(r[8],u)}):i==null?i={}:typeof i=="object"&&("from"in i||"to"in i)&&(e=lh(o(i.from),o(i.to)),i={},i.ms=e.milliseconds,i.M=e.months),f=new pi(i),br(n)&&ft(n,"_locale")&&(f._locale=n._locale),f}function at(n,t){var i=n&&parseFloat(n.replace(",","."));return(isNaN(i)?0:i)*t}function bf(n,t){var i={milliseconds:0,months:0};return i.months=t.month()-n.month()+(t.year()-n.year())*12,n.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+n.clone().add(i.months,"M"),i}function lh(n,t){var i;return t=dr(t,n),n.isBefore(t)?i=bf(n,t):(i=bf(t,n),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function kf(n,t){return function(i,r){var u,f;return r===null||isNaN(+r)||(ns(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),f=i,i=r,r=f),i=typeof i=="string"?+i:i,u=it(i,r),df(this,u,n),this}}function df(n,t,r,u){var o=t._milliseconds,f=t._days,e=t._months;u=u==null?!0:u;o&&n._d.setTime(+n._d+o*r);f&&au(n,"Date",si(n,"Date")+f*r);e&&gu(n,si(n,"Month")+e*r);u&&i.updateOffset(n,f||e)}function ah(n,t){var r=n||o(),f=dr(r,this).startOf("day"),i=this.diff(f,"days",!0),u=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(t&&t[u]||this.localeData().calendar(u,this,o(r)))}function vh(){return new dt(this)}function yh(n,t){var i;return t=p(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(n=tt(n)?n:o(n),+this>+n):(i=tt(n)?+n:+o(n),i<+this.clone().startOf(t))}function ph(n,t){var i;return t=p(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(n=tt(n)?n:o(n),+this<+n):(i=tt(n)?+n:+o(n),+this.clone().endOf(t)<i)}function wh(n,t,i){return this.isAfter(n,i)&&this.isBefore(t,i)}function bh(n,t){var i;return t=p(t||"millisecond"),t==="millisecond"?(n=tt(n)?n:o(n),+this==+n):(i=+o(n),+this.clone().startOf(t)<=i&&i<=+this.clone().endOf(t))}function kh(n,t,i){var f=dr(n,this),e=(f.utcOffset()-this.utcOffset())*6e4,u,r;return t=p(t),t==="year"||t==="month"||t==="quarter"?(r=dh(this,f),t==="quarter"?r=r/3:t==="year"&&(r=r/12)):(u=this-f,r=t==="second"?u/1e3:t==="minute"?u/6e4:t==="hour"?u/36e5:t==="day"?(u-e)/864e5:t==="week"?(u-e)/6048e5:u),i?r:v(r)}function dh(n,t){var r=(t.year()-n.year())*12+(t.month()-n.month()),i=n.clone().add(r,"months"),u,f;return t-i<0?(u=n.clone().add(r-1,"months"),f=(t-i)/(i-u)):(u=n.clone().add(r+1,"months"),f=(t-i)/(u-i)),-(r+f)}function gh(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function te(){var n=this.clone().utc();return 0<n.year()&&n.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():rr(n,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):rr(n,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function nc(n){var t=rr(this,n||i.defaultFormat);return this.localeData().postformat(t)}function tc(n,t){return this.isValid()?it({to:this,from:n}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ic(n){return this.from(o(),n)}function rc(n,t){return this.isValid()?it({from:this,to:n}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function uc(n){return this.to(o(),n)}function ie(n){var t;return n===undefined?this._locale._abbr:(t=ot(n),t!=null&&(this._locale=t),this)}function re(){return this._locale}function fc(n){n=p(n);switch(n){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return n==="week"&&this.weekday(0),n==="isoWeek"&&this.isoWeekday(1),n==="quarter"&&this.month(Math.floor(this.month()/3)*3),this}function ec(n){return(n=p(n),n===undefined||n==="millisecond")?this:this.startOf(n).add(1,n==="isoWeek"?"week":n).subtract(1,"ms")}function oc(){return+this._d-(this._offset||0)*6e4}function sc(){return Math.floor(+this/1e3)}function hc(){return this._offset?new Date(+this):this._d}function cc(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function lc(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}}function ac(){return uu(this)}function vc(){return ei({},e(this))}function yc(){return e(this).overflow}function wi(n,t){r(0,[n,n.length],0,t)}function ue(n,t,i){return lt(o([n,11,31+t-i]),t,i).week}function pc(n){var t=lt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return n==null?t:this.add(n-t,"y")}function wc(n){var t=lt(this,1,4).year;return n==null?t:this.add(n-t,"y")}function bc(){return ue(this.year(),1,4)}function kc(){var n=this.localeData()._week;return ue(this.year(),n.dow,n.doy)}function dc(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)}function gc(n,t){return typeof n!="string"?n:isNaN(n)?(n=t.weekdaysParse(n),typeof n=="number")?n:null:parseInt(n,10)}function nl(n){return this._weekdays[n.day()]}function tl(n){return this._weekdaysShort[n.day()]}function il(n){return this._weekdaysMin[n.day()]}function rl(n){var t,i,r;for(this._weekdaysParse=this._weekdaysParse||[],t=0;t<7;t++)if(this._weekdaysParse[t]||(i=o([2e3,1]).day(t),r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(n))return t}function ul(n){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return n!=null?(n=gc(n,this.localeData()),this.add(n-t,"d")):t}function fl(n){var t=(this.day()+7-this.localeData()._week.dow)%7;return n==null?t:this.add(n-t,"d")}function el(n){return n==null?this.day()||7:this.day(this.day()%7?n:n-7)}function se(n,t){r(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function he(n,t){return t._meridiemParse}function ol(n){return(n+"").toLowerCase().charAt(0)==="p"}function sl(n,t,i){return n>11?i?"pm":"PM":i?"am":"AM"}function hl(n,t){t[ct]=s(("0."+n)*1e3)}function cl(){return this._isUTC?"UTC":""}function ll(){return this._isUTC?"Coordinated Universal Time":""}function al(n){return o(n*1e3)}function vl(){return o.apply(null,arguments).parseZone()}function yl(n,t,i){var r=this._calendar[n];return typeof r=="function"?r.call(t,i):r}function pl(n){var t=this._longDateFormat[n],i=this._longDateFormat[n.toUpperCase()];return t||!i?t:(this._longDateFormat[n]=i.replace(/MMMM|MM|DD|dddd/g,function(n){return n.slice(1)}),this._longDateFormat[n])}function wl(){return this._invalidDate}function bl(n){return this._ordinal.replace("%d",n)}function no(n){return n}function kl(n,t,i,r){var u=this._relativeTime[i];return typeof u=="function"?u(n,t,i,r):u.replace(/%d/i,n)}function dl(n,t){var i=this._relativeTime[n>0?"future":"past"];return typeof i=="function"?i(t):i.replace(/%s/i,t)}function gl(n){var t;for(var i in n)t=n[i],typeof t=="function"?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function io(n,t,i,r){var u=ot(),f=kt().set(r,t);return u[i](f,n)}function ri(n,t,i,r,u){if(typeof n=="number"&&(t=n,n=undefined),n=n||"",t!=null)return io(n,t,i,u);for(var e=[],f=0;f<r;f++)e[f]=io(n,f,i,u);return e}function na(n,t){return ri(n,t,"months",12,"month")}function ta(n,t){return ri(n,t,"monthsShort",12,"month")}function ia(n,t){return ri(n,t,"weekdays",7,"day")}function ra(n,t){return ri(n,t,"weekdaysShort",7,"day")}function ua(n,t){return ri(n,t,"weekdaysMin",7,"day")}function fa(){var n=this._data;return this._milliseconds=d(this._milliseconds),this._days=d(this._days),this._months=d(this._months),n.milliseconds=d(n.milliseconds),n.seconds=d(n.seconds),n.minutes=d(n.minutes),n.hours=d(n.hours),n.months=d(n.months),n.years=d(n.years),this}function ro(n,t,i,r){var u=it(t,i);return n._milliseconds+=r*u._milliseconds,n._days+=r*u._days,n._months+=r*u._months,n._bubble()}function ea(n,t){return ro(this,n,t,1)}function oa(n,t){return ro(this,n,t,-1)}function uo(n){return n<0?Math.floor(n):Math.ceil(n)}function sa(){var r=this._milliseconds,n=this._days,t=this._months,i=this._data,u,f,e,s,o;return r>=0&&n>=0&&t>=0||r<=0&&n<=0&&t<=0||(r+=uo(iu(t)+n)*864e5,n=0,t=0),i.milliseconds=r%1e3,u=v(r/1e3),i.seconds=u%60,f=v(u/60),i.minutes=f%60,e=v(f/60),i.hours=e%24,n+=v(e/24),o=v(fo(n)),t+=o,n-=uo(iu(o)),s=v(t/12),t%=12,i.days=n,i.months=t,i.years=s,this}function fo(n){return n*4800/146097}function iu(n){return n*146097/4800}function ha(n){var t,r,i=this._milliseconds;if(n=p(n),n==="month"||n==="year")return t=this._days+i/864e5,r=this._months+fo(t),n==="month"?r:r/12;t=this._days+Math.round(iu(this._months));switch(n){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return t*24+i/36e5;case"minute":return t*1440+i/6e4;case"second":return t*86400+i/1e3;case"millisecond":return Math.floor(t*864e5)+i;default:throw new Error("Unknown unit "+n);}}function ca(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+s(this._months/12)*31536e6}function ut(n){return function(){return this.as(n)}}function da(n){return n=p(n),this[n+"s"]()}function vt(n){return function(){return this._data[n]}}function ev(){return v(this.days()/7)}function ov(n,t,i,r,u){return u.relativeTime(t||1,!!i,n,r)}function sv(n,t,i){var r=it(n).abs(),h=yt(r.as("s")),f=yt(r.as("m")),e=yt(r.as("h")),o=yt(r.as("d")),s=yt(r.as("M")),c=yt(r.as("y")),u=h<nt.s&&["s",h]||f===1&&["m"]||f<nt.m&&["mm",f]||e===1&&["h"]||e<nt.h&&["hh",e]||o===1&&["d"]||o<nt.d&&["dd",o]||s===1&&["M"]||s<nt.M&&["MM",s]||c===1&&["y"]||["yy",c];return u[2]=t,u[3]=+n>0,u[4]=i,ov.apply(null,u)}function hv(n,t){return nt[n]===undefined?!1:t===undefined?nt[n]:(nt[n]=t,!0)}function cv(n){var t=this.localeData(),i=sv(this,!n,t);return n&&(i=t.pastFuture(+this,i)),t.postformat(i)}function ki(){var t=bi(this._milliseconds)/1e3,a=bi(this._days),i=bi(this._months),n,e,o;n=v(t/60);e=v(n/60);t%=60;n%=60;o=v(i/12);i%=12;var s=o,h=i,c=a,r=e,u=n,f=t,l=this.asSeconds();return l?(l<0?"-":"")+"P"+(s?s+"Y":"")+(h?h+"M":"")+(c?c+"D":"")+(r||u||f?"T":"")+(r?r+"H":"")+(u?u+"M":"")+(f?f+"S":""):"P0D"}var ru,di=i.momentProperties=[],nr=!1,et={},oi,ni={},yu=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,hi=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ir={},wt={},wu=/\d/,y=/\d\d/,bu=/\d{3}/,ur=/\d{4}/,ci=/[+-]?\d{6}/,h=/\d\d?/,li=/\d{1,3}/,fr=/\d{1,4}/,ai=/[+-]?\d{1,6}/,vi=/[+-]?\d+/,yi=/Z|[+-]\d\d:?\d\d/gi,ti=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,er={},or={},b=0,g=1,k=2,a=3,st=4,ht=5,ct=6,ku,du,cr,yr,ef,hf,cf,vf,pf,wf,gf,ne,nu,tu,fe,ee,oe,ce,le,ae,ve,rt,ye,n,pe,we,be,ke,de,ge,to,u,d,yt,nt,bi,f;r("M",["MM",2],"Mo",function(){return this.month()+1});r("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)});r("MMMM",0,0,function(n){return this.localeData().months(this,n)});l("month","M");t("M",h);t("MM",h,y);t("MMM",ti);t("MMMM",ti);c(["M","MM"],function(n,t){t[g]=s(n)-1});c(["MMM","MMMM"],function(n,t,i,r){var u=i._locale.monthsParse(n,r,i._strict);u!=null?t[g]=u:e(i).invalidMonth=n});ku="January_February_March_April_May_June_July_August_September_October_November_December".split("_");du="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");cr={};i.suppressDeprecationWarnings=!1;var ts=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,lr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ar=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],is=/^\/?Date\((\-?\d+)/i;for(i.createFromInputFallback=w("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))}),r(0,["YY",2],0,function(){return this.year()%100}),r(0,["YYYY",4],0,"year"),r(0,["YYYYY",5],0,"year"),r(0,["YYYYYY",6,!0],0,"year"),l("year","y"),t("Y",vi),t("YY",h,y),t("YYYY",fr,ur),t("YYYYY",ai,ci),t("YYYYYY",ai,ci),c(["YYYYY","YYYYYY"],b),c("YYYY",function(n,t){t[b]=n.length===2?i.parseTwoDigitYear(n):s(n)}),c("YY",function(n,t){t[b]=i.parseTwoDigitYear(n)}),i.parseTwoDigitYear=function(n){return s(n)+(s(n)>68?1900:2e3)},yr=pt("FullYear",!1),r("w",["ww",2],"wo","week"),r("W",["WW",2],"Wo","isoWeek"),l("week","w"),l("isoWeek","W"),t("w",h),t("ww",h,y),t("W",h),t("WW",h,y),ii(["w","ww","W","WW"],function(n,t,i,r){t[r.substr(0,1)]=s(n)}),ef={dow:0,doy:6},r("DDD",["DDDD",3],"DDDo","dayOfYear"),l("dayOfYear","DDD"),t("DDD",li),t("DDDD",bu),c(["DDD","DDDD"],function(n,t,i){i._dayOfYear=s(n)}),i.ISO_8601=function(){},hf=w("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var n=o.apply(null,arguments);return n<this?this:n}),cf=w("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var n=o.apply(null,arguments);return n>this?this:n}),af("Z",":"),af("ZZ",""),t("Z",yi),t("ZZ",yi),c(["Z","ZZ"],function(n,t,i){i._useUTC=!0;i._tzm=kr(n)}),vf=/([\+\-]|\d\d)/gi,i.updateOffset=function(){},pf=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,wf=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,it.fn=pi.prototype,gf=kf(1,"add"),ne=kf(-1,"subtract"),i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",nu=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return n===undefined?this.localeData():this.locale(n)}),r(0,["gg",2],0,function(){return this.weekYear()%100}),r(0,["GG",2],0,function(){return this.isoWeekYear()%100}),wi("gggg","weekYear"),wi("ggggg","weekYear"),wi("GGGG","isoWeekYear"),wi("GGGGG","isoWeekYear"),l("weekYear","gg"),l("isoWeekYear","GG"),t("G",vi),t("g",vi),t("GG",h,y),t("gg",h,y),t("GGGG",fr,ur),t("gggg",fr,ur),t("GGGGG",ai,ci),t("ggggg",ai,ci),ii(["gggg","ggggg","GGGG","GGGGG"],function(n,t,i,r){t[r.substr(0,2)]=s(n)}),ii(["gg","GG"],function(n,t,r,u){t[u]=i.parseTwoDigitYear(n)}),r("Q",0,0,"quarter"),l("quarter","Q"),t("Q",wu),c("Q",function(n,t){t[g]=(s(n)-1)*3}),r("D",["DD",2],"Do","date"),l("date","D"),t("D",h),t("DD",h,y),t("Do",function(n,t){return n?t._ordinalParse:t._ordinalParseLenient}),c(["D","DD"],k),c("Do",function(n,t){t[k]=s(n.match(h)[0],10)}),tu=pt("Date",!0),r("d",0,"do","day"),r("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)}),r("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)}),r("dddd",0,0,function(n){return this.localeData().weekdays(this,n)}),r("e",0,0,"weekday"),r("E",0,0,"isoWeekday"),l("day","d"),l("weekday","e"),l("isoWeekday","E"),t("d",h),t("e",h),t("E",h),t("dd",ti),t("ddd",ti),t("dddd",ti),ii(["dd","ddd","dddd"],function(n,t,i){var r=i._locale.weekdaysParse(n);r!=null?t.d=r:e(i).invalidWeekday=n}),ii(["d","e","E"],function(n,t,i,r){t[r]=s(n)}),fe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ee="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),oe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),r("H",["HH",2],0,"hour"),r("h",["hh",2],0,function(){return this.hours()%12||12}),se("a",!0),se("A",!1),l("hour","h"),t("a",he),t("A",he),t("H",h),t("h",h),t("HH",h,y),t("hh",h,y),c(["H","HH"],a),c(["a","A"],function(n,t,i){i._isPm=i._locale.isPM(n);i._meridiem=n}),c(["h","hh"],function(n,t,i){t[a]=s(n);e(i).bigHour=!0}),ce=/[ap]\.?m?\.?/i,le=pt("Hours",!0),r("m",["mm",2],0,"minute"),l("minute","m"),t("m",h),t("mm",h,y),c(["m","mm"],st),ae=pt("Minutes",!1),r("s",["ss",2],0,"second"),l("second","s"),t("s",h),t("ss",h,y),c(["s","ss"],ht),ve=pt("Seconds",!1),r("S",0,0,function(){return~~(this.millisecond()/100)}),r(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),r(0,["SSS",3],0,"millisecond"),r(0,["SSSS",4],0,function(){return this.millisecond()*10}),r(0,["SSSSS",5],0,function(){return this.millisecond()*100}),r(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),r(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),r(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),r(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),l("millisecond","ms"),t("S",li,wu),t("SS",li,y),t("SSS",li,bu),rt="SSSS";rt.length<=9;rt+="S")t(rt,/\d+/);for(rt="S";rt.length<=9;rt+="S")c(rt,hl);ye=pt("Milliseconds",!1);r("z",0,0,"zoneAbbr");r("zz",0,0,"zoneName");n=dt.prototype;n.add=gf;n.calendar=ah;n.clone=vh;n.diff=kh;n.endOf=ec;n.format=nc;n.from=tc;n.fromNow=ic;n.to=rc;n.toNow=uc;n.get=vu;n.invalidAt=yc;n.isAfter=yh;n.isBefore=ph;n.isBetween=wh;n.isSame=bh;n.isValid=ac;n.lang=nu;n.locale=ie;n.localeData=re;n.max=cf;n.min=hf;n.parsingFlags=vc;n.set=vu;n.startOf=fc;n.subtract=ne;n.toArray=cc;n.toObject=lc;n.toDate=hc;n.toISOString=te;n.toJSON=te;n.toString=gh;n.unix=sc;n.valueOf=oc;n.year=yr;n.isLeapYear=fs;n.weekYear=pc;n.isoWeekYear=wc;n.quarter=n.quarters=dc;n.month=nf;n.daysInMonth=go;n.week=n.weeks=hs;n.isoWeek=n.isoWeeks=cs;n.weeksInYear=kc;n.isoWeeksInYear=bc;n.date=tu;n.day=n.days=ul;n.weekday=fl;n.isoWeekday=el;n.dayOfYear=as;n.hour=n.hours=le;n.minute=n.minutes=ae;n.second=n.seconds=ve;n.millisecond=n.milliseconds=ye;n.utcOffset=th;n.utc=rh;n.local=uh;n.parseZone=fh;n.hasAlignedHourOffset=eh;n.isDST=oh;n.isDSTShifted=sh;n.isLocal=hh;n.isUtcOffset=ch;n.isUtc=yf;n.isUTC=yf;n.zoneAbbr=cl;n.zoneName=ll;n.dates=w("dates accessor is deprecated. Use date instead.",tu);n.months=w("months accessor is deprecated. Use month instead",nf);n.years=w("years accessor is deprecated. Use year instead",yr);n.zone=w("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",ih);pe=n;we={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};be={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};ke="Invalid date";de="%d";ge=/\d{1,2}/;to={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};u=ou.prototype;u._calendar=we;u.calendar=yl;u._longDateFormat=be;u.longDateFormat=pl;u._invalidDate=ke;u.invalidDate=wl;u._ordinal=de;u.ordinal=bl;u._ordinalParse=ge;u.preparse=no;u.postformat=no;u._relativeTime=to;u.relativeTime=kl;u.pastFuture=dl;u.set=gl;u.months=wo;u._months=ku;u.monthsShort=bo;u._monthsShort=du;u.monthsParse=ko;u.week=es;u._week=ef;u.firstDayOfYear=ss;u.firstDayOfWeek=os;u.weekdays=nl;u._weekdays=fe;u.weekdaysMin=il;u._weekdaysMin=oe;u.weekdaysShort=tl;u._weekdaysShort=ee;u.weekdaysParse=rl;u.isPM=ol;u._meridiemParse=ce;u.meridiem=sl;gt("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var t=n%10,i=s(n%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return n+i}});i.lang=w("moment.lang is deprecated. Use moment.locale instead.",gt);i.langData=w("moment.langData is deprecated. Use moment.localeData instead.",ot);d=Math.abs;var la=ut("ms"),aa=ut("s"),va=ut("m"),ya=ut("h"),pa=ut("d"),wa=ut("w"),ba=ut("M"),ka=ut("y");var ga=vt("milliseconds"),nv=vt("seconds"),tv=vt("minutes"),iv=vt("hours"),rv=vt("days"),uv=vt("months"),fv=vt("years");return yt=Math.round,nt={s:45,m:45,h:22,d:26,M:11},bi=Math.abs,f=pi.prototype,f.abs=fa,f.add=ea,f.subtract=oa,f.as=ha,f.asMilliseconds=la,f.asSeconds=aa,f.asMinutes=va,f.asHours=ya,f.asDays=pa,f.asWeeks=wa,f.asMonths=ba,f.asYears=ka,f.valueOf=ca,f._bubble=sa,f.get=da,f.milliseconds=ga,f.seconds=nv,f.minutes=tv,f.hours=iv,f.days=rv,f.weeks=ev,f.months=uv,f.years=fv,f.humanize=cv,f.toISOString=ki,f.toString=ki,f.toJSON=ki,f.locale=ie,f.localeData=re,f.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ki),f.lang=nu,r("X",0,0,"unix"),r("x",0,0,"valueOf"),t("x",vi),t("X",/[+-]?\d+(\.\d{1,3})?/),c("X",function(n,t,i){i._d=new Date(parseFloat(n,10)*1e3)}),c("x",function(n,t,i){i._d=new Date(s(n))}),i.version="2.10.6",eo(o),i.fn=pe,i.min=gs,i.max=nh,i.utc=kt,i.unix=al,i.months=na,i.isDate=fi,i.locale=gt,i.invalid=fu,i.duration=it,i.isMoment=tt,i.weekdays=ia,i.parseZone=vl,i.localeData=ot,i.isDuration=br,i.monthsShort=ta,i.weekdaysMin=ua,i.defineLocale=cu,i.weekdaysShort=ra,i.normalizeUnits=p,i.relativeTimeThreshold=hv,i}),function(){var c=this,tt=c._,r=Array.prototype,p=Object.prototype,it=Function.prototype,w=r.push,t=r.slice,l=r.concat,u=p.toString,b=p.hasOwnProperty,rt=Array.isArray,k=Object.keys,a=it.bind,n=function(t){if(t instanceof n)return t;if(!(this instanceof n))return new n(t);this._wrapped=t},i,v,e,f,o,s,nt,h;typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=n),exports._=n):c._=n;n.VERSION="1.7.0";i=function(n,t,i){if(t===void 0)return n;switch(i==null?3:i){case 1:return function(i){return n.call(t,i)};case 2:return function(i,r){return n.call(t,i,r)};case 3:return function(i,r,u){return n.call(t,i,r,u)};case 4:return function(i,r,u,f){return n.call(t,i,r,u,f)}}return function(){return n.apply(t,arguments)}};n.iteratee=function(t,r,u){return t==null?n.identity:n.isFunction(t)?i(t,r,u):n.isObject(t)?n.matches(t):n.property(t)};n.each=n.forEach=function(t,r,u){var f,e,o;if(t==null)return t;if(r=i(r,u),e=t.length,e===+e)for(f=0;f<e;f++)r(t[f],f,t);else for(o=n.keys(t),f=0,e=o.length;f<e;f++)r(t[o[f]],o[f],t);return t};n.map=n.collect=function(t,i,r){var u;if(t==null)return[];i=n.iteratee(i,r);var f=t.length!==+t.length&&n.keys(t),o=(f||t).length,s=Array(o),e;for(u=0;u<o;u++)e=f?f[u]:u,s[u]=i(t[e],e,t);return s};v="Reduce of empty array with no initial value";n.reduce=n.foldl=n.inject=function(t,r,u,f){t==null&&(t=[]);r=i(r,f,4);var o=t.length!==+t.length&&n.keys(t),h=(o||t).length,e=0,s;if(arguments.length<3){if(!h)throw new TypeError(v);u=t[o?o[e++]:e++]}for(;e<h;e++)s=o?o[e]:e,u=r(u,t[s],s,t);return u};n.reduceRight=n.foldr=function(t,r,u,f){t==null&&(t=[]);r=i(r,f,4);var o=t.length!==+t.length&&n.keys(t),e=(o||t).length,s;if(arguments.length<3){if(!e)throw new TypeError(v);u=t[o?o[--e]:--e]}while(e--)s=o?o[e]:e,u=r(u,t[s],s,t);return u};n.find=n.detect=function(t,i,r){var u;return i=n.iteratee(i,r),n.some(t,function(n,t,r){if(i(n,t,r))return u=n,!0}),u};n.filter=n.select=function(t,i,r){var u=[];return t==null?u:(i=n.iteratee(i,r),n.each(t,function(n,t,r){i(n,t,r)&&u.push(n)}),u)};n.reject=function(t,i,r){return n.filter(t,n.negate(n.iteratee(i)),r)};n.every=n.all=function(t,i,r){if(t==null)return!0;i=n.iteratee(i,r);for(var f=t.length!==+t.length&&n.keys(t),o=(f||t).length,e,u=0;u<o;u++)if(e=f?f[u]:u,!i(t[e],e,t))return!1;return!0};n.some=n.any=function(t,i,r){if(t==null)return!1;i=n.iteratee(i,r);for(var f=t.length!==+t.length&&n.keys(t),o=(f||t).length,e,u=0;u<o;u++)if(e=f?f[u]:u,i(t[e],e,t))return!0;return!1};n.contains=n.include=function(t,i){return t==null?!1:(t.length!==+t.length&&(t=n.values(t)),n.indexOf(t,i)>=0)};n.invoke=function(i,r){var u=t.call(arguments,2),f=n.isFunction(r);return n.map(i,function(n){return(f?r:n[r]).apply(n,u)})};n.pluck=function(t,i){return n.map(t,n.property(i))};n.where=function(t,i){return n.filter(t,n.matches(i))};n.findWhere=function(t,i){return n.find(t,n.matches(i))};n.max=function(t,i,r){var u=-Infinity,s=-Infinity,o,f,e,h;if(i==null&&t!=null)for(t=t.length===+t.length?t:n.values(t),e=0,h=t.length;e<h;e++)o=t[e],o>u&&(u=o);else i=n.iteratee(i,r),n.each(t,function(n,t,r){f=i(n,t,r);(f>s||f===-Infinity&&u===-Infinity)&&(u=n,s=f)});return u};n.min=function(t,i,r){var u=Infinity,s=Infinity,o,f,e,h;if(i==null&&t!=null)for(t=t.length===+t.length?t:n.values(t),e=0,h=t.length;e<h;e++)o=t[e],o<u&&(u=o);else i=n.iteratee(i,r),n.each(t,function(n,t,r){f=i(n,t,r);(f<s||f===Infinity&&u===Infinity)&&(u=n,s=f)});return u};n.shuffle=function(t){for(var f=t&&t.length===+t.length?t:n.values(t),e=f.length,r=Array(e),i=0,u;i<e;i++)u=n.random(0,i),u!==i&&(r[i]=r[u]),r[u]=f[i];return r};n.sample=function(t,i,r){return i==null||r?(t.length!==+t.length&&(t=n.values(t)),t[n.random(t.length-1)]):n.shuffle(t).slice(0,Math.max(0,i))};n.sortBy=function(t,i,r){return i=n.iteratee(i,r),n.pluck(n.map(t,function(n,t,r){return{value:n,index:t,criteria:i(n,t,r)}}).sort(function(n,t){var i=n.criteria,r=t.criteria;if(i!==r){if(i>r||i===void 0)return 1;if(i<r||r===void 0)return-1}return n.index-t.index}),"value")};e=function(t){return function(i,r,u){var f={};return r=n.iteratee(r,u),n.each(i,function(n,u){var e=r(n,u,i);t(f,n,e)}),f}};n.groupBy=e(function(t,i,r){n.has(t,r)?t[r].push(i):t[r]=[i]});n.indexBy=e(function(n,t,i){n[i]=t});n.countBy=e(function(t,i,r){n.has(t,r)?t[r]++:t[r]=1});n.sortedIndex=function(t,i,r,u){var e;r=n.iteratee(r,u,1);for(var s=r(i),f=0,o=t.length;f<o;)e=f+o>>>1,r(t[e])<s?f=e+1:o=e;return f};n.toArray=function(i){return i?n.isArray(i)?t.call(i):i.length===+i.length?n.map(i,n.identity):n.values(i):[]};n.size=function(t){return t==null?0:t.length===+t.length?t.length:n.keys(t).length};n.partition=function(t,i,r){i=n.iteratee(i,r);var u=[],f=[];return n.each(t,function(n,t,r){(i(n,t,r)?u:f).push(n)}),[u,f]};n.first=n.head=n.take=function(n,i,r){if(n!=null)return i==null||r?n[0]:i<0?[]:t.call(n,0,i)};n.initial=function(n,i,r){return t.call(n,0,Math.max(0,n.length-(i==null||r?1:i)))};n.last=function(n,i,r){if(n!=null)return i==null||r?n[n.length-1]:t.call(n,Math.max(n.length-i,0))};n.rest=n.tail=n.drop=function(n,i,r){return t.call(n,i==null||r?1:i)};n.compact=function(t){return n.filter(t,n.identity)};f=function(t,i,r,u){var o,s,e;if(i&&n.every(t,n.isArray))return l.apply(u,t);for(o=0,s=t.length;o<s;o++)e=t[o],n.isArray(e)||n.isArguments(e)?i?w.apply(u,e):f(e,i,r,u):r||u.push(e);return u};n.flatten=function(n,t){return f(n,t,!1,[])};n.without=function(i){return n.difference(i,t.call(arguments,1))};n.uniq=n.unique=function(t,i,r,u){var e,s,o,c,f,h;if(t==null)return[];for(n.isBoolean(i)||(u=r,r=i,i=!1),r!=null&&(r=n.iteratee(r,u)),e=[],s=[],o=0,c=t.length;o<c;o++)f=t[o],i?(o&&s===f||e.push(f),s=f):r?(h=r(f,o,t),n.indexOf(s,h)<0&&(s.push(h),e.push(f))):n.indexOf(e,f)<0&&e.push(f);return e};n.union=function(){return n.uniq(f(arguments,!0,!0,[]))};n.intersection=function(t){var r,e,u,o,f,i;if(t==null)return[];for(r=[],e=arguments.length,u=0,o=t.length;u<o;u++)if(f=t[u],!n.contains(r,f)){for(i=1;i<e;i++)if(!n.contains(arguments[i],f))break;i===e&&r.push(f)}return r};n.difference=function(i){var r=f(t.call(arguments,1),!0,!0,[]);return n.filter(i,function(t){return!n.contains(r,t)})};n.zip=function(t){var r,u,i;if(t==null)return[];for(r=n.max(arguments,"length").length,u=Array(r),i=0;i<r;i++)u[i]=n.pluck(arguments,i);return u};n.object=function(n,t){var r,i,u;if(n==null)return{};for(r={},i=0,u=n.length;i<u;i++)t?r[n[i]]=t[i]:r[n[i][0]]=n[i][1];return r};n.indexOf=function(t,i,r){if(t==null)return-1;var u=0,f=t.length;if(r)if(typeof r=="number")u=r<0?Math.max(0,f+r):r;else return u=n.sortedIndex(t,i),t[u]===i?u:-1;for(;u<f;u++)if(t[u]===i)return u;return-1};n.lastIndexOf=function(n,t,i){if(n==null)return-1;var r=n.length;for(typeof i=="number"&&(r=i<0?r+i+1:Math.min(r,i+1));--r>=0;)if(n[r]===t)return r;return-1};n.range=function(n,t,i){var u,f,r;for(arguments.length<=1&&(t=n||0,n=0),i=i||1,u=Math.max(Math.ceil((t-n)/i),0),f=Array(u),r=0;r<u;r++,n+=i)f[r]=n;return f};o=function(){};n.bind=function(i,r){var u,f;if(a&&i.bind===a)return a.apply(i,t.call(arguments,1));if(!n.isFunction(i))throw new TypeError("Bind must be called on a function");return u=t.call(arguments,2),f=function(){var e,s;return(this instanceof f)?(o.prototype=i.prototype,e=new o,o.prototype=null,s=i.apply(e,u.concat(t.call(arguments))),n.isObject(s))?s:e:i.apply(r,u.concat(t.call(arguments)))}};n.partial=function(i){var r=t.call(arguments,1);return function(){for(var f=0,t=r.slice(),u=0,e=t.length;u<e;u++)t[u]===n&&(t[u]=arguments[f++]);while(f<arguments.length)t.push(arguments[f++]);return i.apply(this,t)}};n.bindAll=function(t){var i,u=arguments.length,r;if(u<=1)throw new Error("bindAll must be passed function names");for(i=1;i<u;i++)r=arguments[i],t[r]=n.bind(t[r],t);return t};n.memoize=function(t,i){var r=function(u){var f=r.cache,e=i?i.apply(this,arguments):u;return n.has(f,e)||(f[e]=t.apply(this,arguments)),f[e]};return r.cache={},r};n.delay=function(n,i){var r=t.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},i)};n.defer=function(i){return n.delay.apply(n,[i,1].concat(t.call(arguments,1)))};n.throttle=function(t,i,r){var f,e,s,u=null,o=0,h;return r||(r={}),h=function(){o=r.leading===!1?0:n.now();u=null;s=t.apply(f,e);u||(f=e=null)},function(){var l=n.now(),c;return o||r.leading!==!1||(o=l),c=i-(l-o),f=this,e=arguments,c<=0||c>i?(clearTimeout(u),u=null,o=l,s=t.apply(f,e),u||(f=e=null)):u||r.trailing===!1||(u=setTimeout(h,c)),s}};n.debounce=function(t,i,r){var u,f,e,s,o,h=function(){var c=n.now()-s;c<i&&c>0?u=setTimeout(h,i-c):(u=null,r||(o=t.apply(e,f),u||(e=f=null)))};return function(){e=this;f=arguments;s=n.now();var c=r&&!u;return u||(u=setTimeout(h,i)),c&&(o=t.apply(e,f),e=f=null),o}};n.wrap=function(t,i){return n.partial(i,t)};n.negate=function(n){return function(){return!n.apply(this,arguments)}};n.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,i=n[t].apply(this,arguments);r--;)i=n[r].call(this,i);return i}};n.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}};n.before=function(n,t){var i;return function(){return--n>0?i=t.apply(this,arguments):t=null,i}};n.once=n.partial(n.before,2);n.keys=function(t){var i,r;if(!n.isObject(t))return[];if(k)return k(t);i=[];for(r in t)n.has(t,r)&&i.push(r);return i};n.values=function(t){for(var r=n.keys(t),u=r.length,f=Array(u),i=0;i<u;i++)f[i]=t[r[i]];return f};n.pairs=function(t){for(var r=n.keys(t),u=r.length,f=Array(u),i=0;i<u;i++)f[i]=[r[i],t[r[i]]];return f};n.invert=function(t){for(var u={},r=n.keys(t),i=0,f=r.length;i<f;i++)u[t[r[i]]]=r[i];return u};n.functions=n.methods=function(t){var i=[];for(var r in t)n.isFunction(t[r])&&i.push(r);return i.sort()};n.extend=function(t){var i,r,u,f;if(!n.isObject(t))return t;for(u=1,f=arguments.length;u<f;u++){i=arguments[u];for(r in i)b.call(i,r)&&(t[r]=i[r])}return t};n.pick=function(r,u,f){var o={},e,h,c,s,a;if(r==null)return o;if(n.isFunction(u)){u=i(u,f);for(e in r)h=r[e],u(h,e,r)&&(o[e]=h)}else for(c=l.apply([],t.call(arguments,1)),r=new Object(r),s=0,a=c.length;s<a;s++)e=c[s],e in r&&(o[e]=r[e]);return o};n.omit=function(i,r,u){if(n.isFunction(r))r=n.negate(r);else{var f=n.map(l.apply([],t.call(arguments,1)),String);r=function(t,i){return!n.contains(f,i)}}return n.pick(i,r,u)};n.defaults=function(t){var i,f,u,r;if(!n.isObject(t))return t;for(i=1,f=arguments.length;i<f;i++){u=arguments[i];for(r in u)t[r]===void 0&&(t[r]=u[r])}return t};n.clone=function(t){return n.isObject(t)?n.isArray(t)?t.slice():n.extend({},t):t};n.tap=function(n,t){return t(n),n};s=function(t,i,r,f){var l,a,h,c,e,o,y,v;if(t===i)return t!==0||1/t==1/i;if(t==null||i==null)return t===i;if(t instanceof n&&(t=t._wrapped),i instanceof n&&(i=i._wrapped),l=u.call(t),l!==u.call(i))return!1;switch(l){case"[object RegExp]":case"[object String]":return""+t==""+i;case"[object Number]":return+t!=+t?+i!=+i:+t==0?1/+t==1/i:+t==+i;case"[object Date]":case"[object Boolean]":return+t==+i}if(typeof t!="object"||typeof i!="object")return!1;for(a=r.length;a--;)if(r[a]===t)return f[a]===i;if(h=t.constructor,c=i.constructor,h!==c&&"constructor"in t&&"constructor"in i&&!(n.isFunction(h)&&h instanceof h&&n.isFunction(c)&&c instanceof c))return!1;if(r.push(t),f.push(i),l==="[object Array]"){if(e=t.length,o=e===i.length,o)while(e--)if(!(o=s(t[e],i[e],r,f)))break}else if(y=n.keys(t),e=y.length,o=n.keys(i).length===e,o)while(e--)if(v=y[e],!(o=n.has(i,v)&&s(t[v],i[v],r,f)))break;return r.pop(),f.pop(),o};n.isEqual=function(n,t){return s(n,t,[],[])};n.isEmpty=function(t){if(t==null)return!0;if(n.isArray(t)||n.isString(t)||n.isArguments(t))return t.length===0;for(var i in t)if(n.has(t,i))return!1;return!0};n.isElement=function(n){return!!(n&&n.nodeType===1)};n.isArray=rt||function(n){return u.call(n)==="[object Array]"};n.isObject=function(n){var t=typeof n;return t==="function"||t==="object"&&!!n};n.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){n["is"+t]=function(n){return u.call(n)==="[object "+t+"]"}});n.isArguments(arguments)||(n.isArguments=function(t){return n.has(t,"callee")});typeof/./!="function"&&(n.isFunction=function(n){return typeof n=="function"||!1});n.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))};n.isNaN=function(t){return n.isNumber(t)&&t!==+t};n.isBoolean=function(n){return n===!0||n===!1||u.call(n)==="[object Boolean]"};n.isNull=function(n){return n===null};n.isUndefined=function(n){return n===void 0};n.has=function(n,t){return n!=null&&b.call(n,t)};n.noConflict=function(){return c._=tt,this};n.identity=function(n){return n};n.constant=function(n){return function(){return n}};n.noop=function(){};n.property=function(n){return function(t){return t[n]}};n.matches=function(t){var i=n.pairs(t),r=i.length;return function(n){var t,u,f;if(n==null)return!r;for(n=new Object(n),t=0;t<r;t++)if(u=i[t],f=u[0],u[1]!==n[f]||!(f in n))return!1;return!0}};n.times=function(n,t,r){var f=Array(Math.max(0,n)),u;for(t=i(t,r,1),u=0;u<n;u++)f[u]=t(u);return f};n.random=function(n,t){return t==null&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};n.now=Date.now||function(){return(new Date).getTime()};var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ut=n.invert(d),g=function(t){var r=function(n){return t[n]},i="(?:"+n.keys(t).join("|")+")",u=RegExp(i),f=RegExp(i,"g");return function(n){return n=n==null?"":""+n,u.test(n)?n.replace(f,r):n}};n.escape=g(d);n.unescape=g(ut);n.result=function(t,i){if(t==null)return void 0;var r=t[i];return n.isFunction(r)?t[i]():r};nt=0;n.uniqueId=function(n){var t=++nt+"";return n?n+t:t};n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var y=/(.)^/,ft={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},et=/\\|'|\r|\n|\u2028|\u2029/g,ot=function(n){return"\\"+ft[n]};n.template=function(t,i,r){var o,f,h;!i&&r&&(i=r);i=n.defaults({},i,n.templateSettings);var c=RegExp([(i.escape||y).source,(i.interpolate||y).source,(i.evaluate||y).source].join("|")+"|$","g"),e=0,u="__p+='";t.replace(c,function(n,i,r,f,o){return u+=t.slice(e,o).replace(et,ot),e=o+n.length,i?u+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":r?u+="'+\n((__t=("+r+"))==null?'':__t)+\n'":f&&(u+="';\n"+f+"\n__p+='"),n});u+="';\n";i.variable||(u="with(obj||{}){\n"+u+"}\n");u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{o=new Function(i.variable||"obj","_",u)}catch(s){s.source=u;throw s;}return f=function(t){return o.call(this,t,n)},h=i.variable||"obj",f.source="function("+h+"){\n"+u+"}",f};n.chain=function(t){var i=n(t);return i._chain=!0,i};h=function(t){return this._chain?n(t).chain():t};n.mixin=function(t){n.each(n.functions(t),function(i){var r=n[i]=t[i];n.prototype[i]=function(){var t=[this._wrapped];return w.apply(t,arguments),h.call(this,r.apply(n,t))}})};n.mixin(n);n.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var i=r[t];n.prototype[t]=function(){var n=this._wrapped;return i.apply(n,arguments),(t==="shift"||t==="splice")&&n.length===0&&delete n[0],h.call(this,n)}});n.each(["concat","join","slice"],function(t){var i=r[t];n.prototype[t]=function(){return h.call(this,i.apply(this._wrapped,arguments))}});n.prototype.value=function(){return this._wrapped};typeof define=="function"&&define.amd&&define("underscore",[],function(){return n})}.call(this),function(n){var t=typeof self=="object"&&self.self==self&&self||typeof global=="object"&&global.global==global&&global,i,r;if(typeof define=="function"&&define.amd)define(["underscore","jquery","exports"],function(i,r,u){t.Backbone=n(t,u,i,r)});else if(typeof exports!="undefined"){i=require("underscore");try{r=require("jquery")}catch(u){}n(t,exports,i,r)}else t.Backbone=n(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(function(n,t,i,r){var ot=n.Backbone,y=Array.prototype.slice,h,k,d,c,g,l,o,nt,it,ut,et,v,s;t.VERSION="1.2.3";t.$=r;t.noConflict=function(){return n.Backbone=ot,this};t.emulateHTTP=!1;t.emulateJSON=!1;var st=function(n,t,r){switch(n){case 1:return function(){return i[t](this[r])};case 2:return function(n){return i[t](this[r],n)};case 3:return function(n,u){return i[t](this[r],w(n,this),u)};case 4:return function(n,u,f){return i[t](this[r],w(n,this),u,f)};default:return function(){var n=y.call(arguments);return n.unshift(this[r]),i[t].apply(i,n)}}},p=function(n,t,r){i.each(t,function(t,u){i[u]&&(n.prototype[u]=st(t,u,r))})},w=function(n,t){return i.isFunction(n)?n:i.isObject(n)&&!t._isModel(n)?ht(n):i.isString(n)?function(t){return t.get(n)}:n},ht=function(n){var t=i.matches(n);return function(n){return t(n.attributes)}},u=t.Events={},b=/\s+/,e=function(n,t,r,u,f){var o=0,s;if(r&&typeof r=="object")for(u!==void 0&&("context"in f)&&f.context===void 0&&(f.context=u),s=i.keys(r);o<s.length;o++)t=e(n,t,s[o],r[s[o]],f);else if(r&&b.test(r))for(s=r.split(b);o<s.length;o++)t=n(t,s[o],u,f);else t=n(t,r,u,f);return t};u.on=function(n,t,i){return h(this,n,t,i)};h=function(n,t,i,r,u){if(n._events=e(k,n._events||{},t,i,{context:r,ctx:n,listening:u}),u){var f=n._listeners||(n._listeners={});f[u.id]=u}return n};u.listenTo=function(n,t,r){var o;if(!n)return this;var u=n._listenId||(n._listenId=i.uniqueId("l")),f=this._listeningTo||(this._listeningTo={}),e=f[u];return e||(o=this._listenId||(this._listenId=i.uniqueId("l")),e=f[u]={obj:n,objId:u,id:o,listeningTo:f,count:0}),h(n,t,r,this,e),this};k=function(n,t,i,r){if(i){var e=n[t]||(n[t]=[]),f=r.context,o=r.ctx,u=r.listening;u&&u.count++;e.push({callback:i,context:f,ctx:f||o,listening:u})}return n};u.off=function(n,t,i){return this._events?(this._events=e(d,this._events,n,t,{context:i,listeners:this._listeners}),this):this};u.stopListening=function(n,t,r){var u=this._listeningTo,e,f,o;if(!u)return this;for(e=n?[n._listenId]:i.keys(u),f=0;f<e.length;f++){if(o=u[e[f]],!o)break;o.obj.off(t,r,this)}return i.isEmpty(u)&&(this._listeningTo=void 0),this};d=function(n,t,r,u){var v,y,h,c,l,o;if(n){var e=0,f,a=u.context,s=u.listeners;if(!t&&!r&&!a){for(v=i.keys(s);e<v.length;e++)f=s[v[e]],delete s[f.id],delete f.listeningTo[f.objId];return}for(y=t?[t]:i.keys(n);e<y.length;e++){if(t=y[e],h=n[t],!h)break;for(c=[],l=0;l<h.length;l++)o=h[l],r&&r!==o.callback&&r!==o.callback._callback||a&&a!==o.context?c.push(o):(f=o.listening,f&&--f.count==0&&(delete s[f.id],delete f.listeningTo[f.objId]));c.length?n[t]=c:delete n[t]}if(i.size(n))return n}};u.once=function(n,t,r){var u=e(c,{},n,t,i.bind(this.off,this));return this.on(u,void 0,r)};u.listenToOnce=function(n,t,r){var u=e(c,{},t,r,i.bind(this.stopListening,this,n));return this.listenTo(n,u)};c=function(n,t,r,u){if(r){var f=n[t]=i.once(function(){u(t,f);r.apply(this,arguments)});f._callback=r}return n};u.trigger=function(n){var i,r,t;if(!this._events)return this;for(i=Math.max(0,arguments.length-1),r=Array(i),t=0;t<i;t++)r[t]=arguments[t+1];return e(g,this._events,n,void 0,r),this};g=function(n,t,i,r){if(n){var f=n[t],u=n.all;f&&u&&(u=u.slice());f&&l(f,r);u&&l(u,[t].concat(r))}return n};l=function(n,t){var i,r=-1,u=n.length,f=t[0],e=t[1],o=t[2];switch(t.length){case 0:while(++r<u)(i=n[r]).callback.call(i.ctx);return;case 1:while(++r<u)(i=n[r]).callback.call(i.ctx,f);return;case 2:while(++r<u)(i=n[r]).callback.call(i.ctx,f,e);return;case 3:while(++r<u)(i=n[r]).callback.call(i.ctx,f,e,o);return;default:while(++r<u)(i=n[r]).callback.apply(i.ctx,t);return}};u.bind=u.on;u.unbind=u.off;i.extend(t,u);o=t.Model=function(n,t){var r=n||{};t||(t={});this.cid=i.uniqueId(this.cidPrefix);this.attributes={};t.collection&&(this.collection=t.collection);t.parse&&(r=this.parse(r,t)||{});r=i.defaults({},r,i.result(this,"defaults"));this.set(r,t);this.changed={};this.initialize.apply(this,arguments)};i.extend(o.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(n){return this.attributes[n]},escape:function(n){return i.escape(this.get(n))},has:function(n){return this.get(n)!=null},matches:function(n){return!!i.iteratee(n,this)(this.attributes)},set:function(n,t,r){var f,u,o;if(n==null)return this;if(typeof n=="object"?(f=n,r=t):(f={})[n]=t,r||(r={}),!this._validate(f,r))return!1;var a=r.unset,h=r.silent,e=[],c=this._changing;this._changing=!0;c||(this._previousAttributes=i.clone(this.attributes),this.changed={});var s=this.attributes,l=this.changed,v=this._previousAttributes;for(u in f)t=f[u],i.isEqual(s[u],t)||e.push(u),i.isEqual(v[u],t)?delete l[u]:l[u]=t,a?delete s[u]:s[u]=t;if(this.id=this.get(this.idAttribute),!h)for(e.length&&(this._pending=r),o=0;o<e.length;o++)this.trigger("change:"+e[o],this,s[e[o]],r);if(c)return this;if(!h)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(n,t){return this.set(n,void 0,i.extend({},t,{unset:!0}))},clear:function(n){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,i.extend({},n,{unset:!0}))},hasChanged:function(n){return n==null?!i.isEmpty(this.changed):i.has(this.changed,n)},changedAttributes:function(n){var f,t,r,u;if(!n)return this.hasChanged()?i.clone(this.changed):!1;f=this._changing?this._previousAttributes:this.attributes;t={};for(r in n)(u=n[r],i.isEqual(f[r],u))||(t[r]=u);return i.size(t)?t:!1},previous:function(n){return n==null||!this._previousAttributes?null:this._previousAttributes[n]},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(n){n=i.extend({parse:!0},n);var t=this,r=n.success;return n.success=function(i){var u=n.parse?t.parse(i,n):i;if(!t.set(u,n))return!1;r&&r.call(n.context,t,i,n);t.trigger("sync",t,i,n)},s(this,n),this.sync("read",this,n)},save:function(n,t,r){var u,e,h,l;if(n==null||typeof n=="object"?(u=n,r=t):(u={})[n]=t,r=i.extend({validate:!0,parse:!0},r),e=r.wait,u&&!e){if(!this.set(u,r))return!1}else if(!this._validate(u,r))return!1;var f=this,c=r.success,o=this.attributes;return r.success=function(n){f.attributes=o;var t=r.parse?f.parse(n,r):n;if(e&&(t=i.extend({},u,t)),t&&!f.set(t,r))return!1;c&&c.call(r.context,f,n,r);f.trigger("sync",f,n,r)},s(this,r),u&&e&&(this.attributes=i.extend({},o,u)),h=this.isNew()?"create":r.patch?"patch":"update",h!=="patch"||r.attrs||(r.attrs=u),l=this.sync(h,this,r),this.attributes=o,l},destroy:function(n){var r;n=n?i.clone(n):{};var t=this,u=n.success,f=n.wait,e=function(){t.stopListening();t.trigger("destroy",t,t.collection,n)};return n.success=function(i){f&&e();u&&u.call(n.context,t,i,n);t.isNew()||t.trigger("sync",t,i,n)},r=!1,this.isNew()?i.defer(n.success):(s(this,n),r=this.sync("delete",this,n)),f||e(),r},url:function(){var n=i.result(this,"urlRoot")||i.result(this.collection,"url")||v(),t;return this.isNew()?n:(t=this.get(this.idAttribute),n.replace(/[^\/]$/,"$&/")+encodeURIComponent(t))},parse:function(n){return n},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(n){return this._validate({},i.defaults({validate:!0},n))},_validate:function(n,t){if(!t.validate||!this.validate)return!0;n=i.extend({},this.attributes,n);var r=this.validationError=this.validate(n,t)||null;return r?(this.trigger("invalid",this,r,i.extend(t,{validationError:r})),!1):!0}});nt={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};p(o,nt,"attributes");var a=t.Collection=function(n,t){t||(t={});t.model&&(this.model=t.model);t.comparator!==void 0&&(this.comparator=t.comparator);this._reset();this.initialize.apply(this,arguments);n&&this.reset(n,i.extend({silent:!0},t))},ct={add:!0,remove:!0,merge:!0},lt={add:!0,remove:!1},tt=function(n,t,i){var u,f,r;for(i=Math.min(Math.max(i,0),n.length),u=Array(n.length-i),f=t.length,r=0;r<u.length;r++)u[r]=n[r+i];for(r=0;r<f;r++)n[r+i]=t[r];for(r=0;r<u.length;r++)n[r+f+i]=u[r]};i.extend(a.prototype,u,{model:o,initialize:function(){},toJSON:function(n){return this.map(function(t){return t.toJSON(n)})},sync:function(){return t.sync.apply(this,arguments)},add:function(n,t){return this.set(n,i.extend({merge:!1},t,lt))},remove:function(n,t){var u,r;return t=i.extend({},t),u=!i.isArray(n),n=u?[n]:i.clone(n),r=this._removeModels(n,t),!t.silent&&r&&this.trigger("update",this,t),u?r[0]:r},set:function(n,t){var v,f,u,e,a,p,k;if(n!=null){t=i.defaults({},t,ct);t.parse&&!this._isModel(n)&&(n=this.parse(n,t));v=!i.isArray(n);n=v?[n]:n.slice();f=t.at;f!=null&&(f=+f);f<0&&(f+=this.length+1);var o=[],s=[],c=[],l={},w=t.add,d=t.merge,b=t.remove,h=!1,y=this.comparator&&f==null&&t.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,r;for(u=0;u<n.length;u++)r=n[u],e=this.get(r),e?(d&&r!==e&&(a=this._isModel(r)?r.attributes:r,t.parse&&(a=e.parse(a,t)),e.set(a,t),y&&!h&&(h=e.hasChanged(g))),l[e.cid]||(l[e.cid]=!0,o.push(e)),n[u]=e):w&&(r=n[u]=this._prepareModel(r,t),r&&(s.push(r),this._addReference(r,t),l[r.cid]=!0,o.push(r)));if(b){for(u=0;u<this.length;u++)r=this.models[u],l[r.cid]||c.push(r);c.length&&this._removeModels(c,t)}if(p=!1,k=!y&&w&&b,o.length&&k?(p=this.length!=o.length||i.some(this.models,function(n,t){return n!==o[t]}),this.models.length=0,tt(this.models,o,0),this.length=this.models.length):s.length&&(y&&(h=!0),tt(this.models,s,f==null?this.length:f),this.length=this.models.length),h&&this.sort({silent:!0}),!t.silent){for(u=0;u<s.length;u++)f!=null&&(t.index=f+u),r=s[u],r.trigger("add",r,this,t);(h||p)&&this.trigger("sort",this,t);(s.length||c.length)&&this.trigger("update",this,t)}return v?n[0]:n}},reset:function(n,t){t=t?i.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),n=this.add(n,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),n},push:function(n,t){return this.add(n,i.extend({at:this.length},t))},pop:function(n){var t=this.at(this.length-1);return this.remove(t,n)},unshift:function(n,t){return this.add(n,i.extend({at:0},t))},shift:function(n){var t=this.at(0);return this.remove(t,n)},slice:function(){return y.apply(this.models,arguments)},get:function(n){if(n==null)return void 0;var t=this.modelId(this._isModel(n)?n.attributes:n);return this._byId[n]||this._byId[t]||this._byId[n.cid]},at:function(n){return n<0&&(n+=this.length),this.models[n]},where:function(n,t){return this[t?"find":"filter"](n)},findWhere:function(n){return this.where(n,!0)},sort:function(n){var t=this.comparator,r;if(!t)throw new Error("Cannot sort a set without a comparator");return n||(n={}),r=t.length,i.isFunction(t)&&(t=i.bind(t,this)),r===1||i.isString(t)?this.models=this.sortBy(t):this.models.sort(t),n.silent||this.trigger("sort",this,n),this},pluck:function(n){return i.invoke(this.models,"get",n)},fetch:function(n){n=i.extend({parse:!0},n);var r=n.success,t=this;return n.success=function(i){var u=n.reset?"reset":"set";t[u](i,n);r&&r.call(n.context,t,i,n);t.trigger("sync",t,i,n)},s(this,n),this.sync("read",this,n)},create:function(n,t){var r,f,u;return(t=t?i.clone(t):{},r=t.wait,n=this._prepareModel(n,t),!n)?!1:(r||this.add(n,t),f=this,u=t.success,t.success=function(n,t,i){r&&f.add(n,i);u&&u.call(i.context,n,t,i)},n.save(null,t),n)},parse:function(n){return n},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(n){return n[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(n,t){if(this._isModel(n))return n.collection||(n.collection=this),n;t=t?i.clone(t):{};t.collection=this;var r=new this.model(n,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(n,t){for(var i,f,r=[],u=0;u<n.length;u++)(i=this.get(n[u]),i)&&(f=this.indexOf(i),this.models.splice(f,1),this.length--,t.silent||(t.index=f,i.trigger("remove",i,this,t)),r.push(i),this._removeReference(i,t));return r.length?r:!1},_isModel:function(n){return n instanceof o},_addReference:function(n){this._byId[n.cid]=n;var t=this.modelId(n.attributes);t!=null&&(this._byId[t]=n);n.on("all",this._onModelEvent,this)},_removeReference:function(n){delete this._byId[n.cid];var t=this.modelId(n.attributes);t!=null&&delete this._byId[t];this===n.collection&&delete n.collection;n.off("all",this._onModelEvent,this)},_onModelEvent:function(n,t,i,r){if(n!=="add"&&n!=="remove"||i===this){if(n==="destroy"&&this.remove(t,r),n==="change"){var u=this.modelId(t.previousAttributes()),f=this.modelId(t.attributes);u!==f&&(u!=null&&delete this._byId[u],f!=null&&(this._byId[f]=t))}this.trigger.apply(this,arguments)}}});it={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};p(a,it,"models");var rt=t.View=function(n){this.cid=i.uniqueId("view");i.extend(this,i.pick(n,vt));this._ensureElement();this.initialize.apply(this,arguments)},at=/^(\S+)\s*(.*)$/,vt=["model","collection","el","id","attributes","className","tagName","events"];i.extend(rt.prototype,u,{tagName:"div",$:function(n){return this.$el.find(n)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(n){return this.undelegateEvents(),this._setElement(n),this.delegateEvents(),this},_setElement:function(n){this.$el=n instanceof t.$?n:t.$(n);this.el=this.$el[0]},delegateEvents:function(n){var r,t,u;if(n||(n=i.result(this,"events")),!n)return this;this.undelegateEvents();for(r in n)(t=n[r],i.isFunction(t)||(t=this[t]),t)&&(u=r.match(at),this.delegate(u[1],u[2],i.bind(t,this)));return this},delegate:function(n,t,i){this.$el.on(n+".delegateEvents"+this.cid,t,i);return this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(n,t,i){return this.$el.off(n+".delegateEvents"+this.cid,t,i),this},_createElement:function(n){return document.createElement(n)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var n=i.extend({},i.result(this,"attributes"));this.id&&(n.id=i.result(this,"id"));this.className&&(n["class"]=i.result(this,"className"));this.setElement(this._createElement(i.result(this,"tagName")));this._setAttributes(n)}},_setAttributes:function(n){this.$el.attr(n)}});t.sync=function(n,r,u){var e=ut[n],f,o,s,h;return i.defaults(u||(u={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON}),f={type:e,dataType:"json"},u.url||(f.url=i.result(r,"url")||v()),u.data==null&&r&&(n==="create"||n==="update"||n==="patch")&&(f.contentType="application/json",f.data=JSON.stringify(u.attrs||r.toJSON(u))),u.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),u.emulateHTTP&&(e==="PUT"||e==="DELETE"||e==="PATCH")&&(f.type="POST",u.emulateJSON&&(f.data._method=e),o=u.beforeSend,u.beforeSend=function(n){return n.setRequestHeader("X-HTTP-Method-Override",e),o?o.apply(this,arguments):void 0}),f.type==="GET"||u.emulateJSON||(f.processData=!1),s=u.error,u.error=function(n,t,i){u.textStatus=t;u.errorThrown=i;s&&s.call(u.context,n,t,i)},h=u.xhr=t.ajax(i.extend(f,u)),r.trigger("request",r,h,u),h};ut={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var ft=t.Router=function(n){n||(n={});n.routes&&(this.routes=n.routes);this._bindRoutes();this.initialize.apply(this,arguments)},yt=/\((.*?)\)/g,pt=/(\(\?)?:\w+/g,wt=/\*\w+/g,bt=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(ft.prototype,u,{initialize:function(){},route:function(n,r,u){i.isRegExp(n)||(n=this._routeToRegExp(n));i.isFunction(r)&&(u=r,r="");u||(u=this[r]);var f=this;return t.history.route(n,function(i){var e=f._extractParameters(n,i);f.execute(u,e,r)!==!1&&(f.trigger.apply(f,["route:"+r].concat(e)),f.trigger("route",r,e),t.history.trigger("route",f,r,e))}),this},execute:function(n,t){n&&n.apply(this,t)},navigate:function(n,i){return t.history.navigate(n,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var n,t=i.keys(this.routes);(n=t.pop())!=null;)this.route(n,this.routes[n])}},_routeToRegExp:function(n){return n=n.replace(bt,"\\$&").replace(yt,"(?:$1)?").replace(pt,function(n,t){return t?n:"([^/?]+)"}).replace(wt,"([^?]*?)"),new RegExp("^"+n+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(n,t){var r=n.exec(t).slice(1);return i.map(r,function(n,t){return t===r.length-1?n||null:n?decodeURIComponent(n):null})}});var f=t.History=function(){this.handlers=[];this.checkUrl=i.bind(this.checkUrl,this);typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},kt=/^[#\/]|\s+$/g,dt=/^\/+|\/+$/g,gt=/#.*$/;return f.started=!1,i.extend(f.prototype,u,{interval:50,atRoot:function(){var n=this.location.pathname.replace(/[^\/]$/,"$&/");return n===this.root&&!this.getSearch()},matchRoot:function(){var n=this.decodeFragment(this.location.pathname),t=n.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(n){return decodeURI(n.replace(/%25/g,"%2525"))},getSearch:function(){var n=this.location.href.replace(/#.*/,"").match(/\?.+/);return n?n[0]:""},getHash:function(n){var t=(n||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var n=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return n.charAt(0)==="/"?n.slice(1):n},getFragment:function(n){return n==null&&(n=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),n.replace(kt,"")},start:function(n){var e,r,t,u;if(f.started)throw new Error("Backbone.history has already been started");if(f.started=!0,this.options=i.extend({root:"/"},this.options,n),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(dt,"/"),this._wantsHashChange&&this._wantsPushState)if(this._hasPushState||this.atRoot())this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});else return e=this.root.slice(0,-1)||"/",this.location.replace(e+"#"+this.getPath()),!0;return this._hasHashChange||!this._wantsHashChange||this._usePushState||(this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1,r=document.body,t=r.insertBefore(this.iframe,r.firstChild).contentWindow,t.document.open(),t.document.close(),t.location.hash="#"+this.fragment),u=window.addEventListener||function(n,t){return attachEvent("on"+n,t)},this._usePushState?u("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?u("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var n=window.removeEventListener||function(n,t){return detachEvent("on"+n,t)};this._usePushState?n("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&n("hashchange",this.checkUrl,!1);this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);f.started=!1},route:function(n,t){this.handlers.unshift({route:n,callback:t})},checkUrl:function(){var n=this.getFragment();if(n===this.fragment&&this.iframe&&(n=this.getHash(this.iframe.contentWindow)),n===this.fragment)return!1;this.iframe&&this.navigate(n);this.loadUrl()},loadUrl:function(n){return this.matchRoot()?(n=this.fragment=this.getFragment(n),i.some(this.handlers,function(t){if(t.route.test(n))return t.callback(n),!0})):!1},navigate:function(n,t){var i,u,r;if(!f.started)return!1;if(t&&t!==!0||(t={trigger:!!t}),n=this.getFragment(n||""),i=this.root,(n===""||n.charAt(0)==="?")&&(i=i.slice(0,-1)||"/"),u=i+n,n=this.decodeFragment(n.replace(gt,"")),this.fragment!==n){if(this.fragment=n,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,u);else if(this._wantsHashChange)this._updateHash(this.location,n,t.replace),this.iframe&&n!==this.getHash(this.iframe.contentWindow)&&(r=this.iframe.contentWindow,t.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,n,t.replace));else return this.location.assign(u);if(t.trigger)return this.loadUrl(n)}},_updateHash:function(n,t,i){if(i){var r=n.href.replace(/(javascript:|#).*$/,"");n.replace(r+"#"+t)}else n.hash="#"+t}}),t.history=new f,et=function(n,t){var u=this,r,f;return r=n&&i.has(n,"constructor")?n.constructor:function(){return u.apply(this,arguments)},i.extend(r,u,t),f=function(){this.constructor=r},f.prototype=u.prototype,r.prototype=new f,n&&i.extend(r.prototype,n),r.__super__=u.prototype,r},o.extend=a.extend=ft.extend=rt.extend=f.extend=et,v=function(){throw new Error('A "url" property or function must be specified');},s=function(n,t){var i=t.error;t.error=function(r){i&&i.call(t.context,n,r,t);n.trigger("error",n,r,t)}},t});
/*!
  backgrid 0.3.5
  http://github.com/wyuenho/backgrid
  Copyright (c) 2014 Jimmy Yuen Ho Wong and contributors <wyuenho@gmail.com>
  Licensed under the MIT license.
*/
(function(n,t){typeof define=="function"&&define.amd?define(["underscore","backbone"],function(i,r){return n.Backgrid=t(i,r)}):typeof exports=="object"?module.exports=t(require("underscore"),require("backbone")):n.Backgrid=t(n._,n.Backbone)})(this,function(n,t){"use strict";function r(n,t,i){var r=t-(n+"").length,u,f;for(r=r<0?0:r,u="",f=0;f<r;f++)u=u+i;return u+n}var s="\t\n\x0b\f\r   ᠎             　\u2028\u2029﻿",g,nt,l,i,f,e,u,a,h,v,y,p;(!String.prototype.trim||s.trim())&&(s="["+s+"]",g=new RegExp("^"+s+s+"*"),nt=new RegExp(s+s+"*$"),String.prototype.trim=function(){if(this===undefined||this===null)throw new TypeError("can't convert "+this+" to object");return String(this).replace(g,"").replace(nt,"")});l=t.$;i={Extension:{},resolveNameToClass:function(t,r){if(n.isString(t)){var u=n.map(t.split("-"),function(n){return n.slice(0,1).toUpperCase()+n.slice(1)}).join("")+r,f=i[u]||i.Extension[u];if(n.isUndefined(f))throw new ReferenceError("Class '"+u+"' not found");return f}return t},callByNeed:function(){var t=arguments[0],r,i;return n.isFunction(t)?(r=arguments[1],i=[].slice.call(arguments,2),t.apply(r,!(i+"")?[]:i)):t}};n.extend(i,t.Events);f=i.Command=function(t){n.extend(this,{altKey:!!t.altKey,char:t.char,charCode:t.charCode,ctrlKey:!!t.ctrlKey,key:t.key,keyCode:t.keyCode,locale:t.locale,location:t.location,metaKey:!!t.metaKey,repeat:!!t.repeat,shiftKey:!!t.shiftKey,which:t.which})};n.extend(f.prototype,{moveUp:function(){return this.keyCode==38},moveDown:function(){return this.keyCode===40},moveLeft:function(){return this.shiftKey&&this.keyCode===9},moveRight:function(){return!this.shiftKey&&this.keyCode===9},save:function(){return this.keyCode===13},cancel:function(){return this.keyCode===27},passThru:function(){return!(this.moveUp()||this.moveDown()||this.moveLeft()||this.moveRight()||this.save()||this.cancel())}});e=i.CellFormatter=function(){};n.extend(e.prototype,{fromRaw:function(n){return n},toRaw:function(n){return n}});u=i.NumberFormatter=function(t){if(n.extend(this,this.defaults,t||{}),this.decimals<0||this.decimals>20)throw new RangeError("decimals must be between 0 and 20");};u.prototype=new e;n.extend(u.prototype,{defaults:{decimals:4,decimalSeparator:".",orderSeparator:","},HUMANIZED_NUM_RE:/(\d)(?=(?:\d{3})+$)/g,fromRaw:function(t){if(n.isNull(t)||n.isUndefined(t))return"";t=t.toFixed(~~this.decimals);var i=t.split("."),r=i[0],u=i[1]?(this.decimalSeparator||".")+i[1]:"";return r.replace(this.HUMANIZED_NUM_RE,"$1"+this.orderSeparator)+u},toRaw:function(t){var i,f,e,r,u;if(t=t.trim(),t==="")return null;for(i="",f=t.split(this.orderSeparator),r=0;r<f.length;r++)i+=f[r];for(e=i.split(this.decimalSeparator),i="",r=0;r<e.length;r++)i=i+e[r]+".";return i[i.length-1]==="."&&(i=i.slice(0,i.length-1)),u=(i*1).toFixed(~~this.decimals)*1,n.isNumber(u)&&!n.isNaN(u)?u:void 0}});a=i.PercentFormatter=function(){i.NumberFormatter.apply(this,arguments)};a.prototype=new i.NumberFormatter;n.extend(a.prototype,{defaults:n.extend({},u.prototype.defaults,{multiplier:1,symbol:"%"}),fromRaw:function(n){var t=[].slice.call(arguments,1);return t.unshift(n*this.multiplier),(u.prototype.fromRaw.apply(this,t)||"0")+this.symbol},toRaw:function(t){var i=t.split(this.symbol),r;if(i&&i[0]&&i[1]===""||i[1]==null)return(r=u.prototype.toRaw.call(this,i[0]),n.isUndefined(r))?r:r/this.multiplier}});h=i.DatetimeFormatter=function(t){if(n.extend(this,this.defaults,t||{}),!this.includeDate&&!this.includeTime)throw new Error("Either includeDate or includeTime must be true");};h.prototype=new e;n.extend(h.prototype,{defaults:{includeDate:!0,includeTime:!0,includeMilli:!1},DATE_RE:/^([+\-]?\d{4})-(\d{2})-(\d{2})$/,TIME_RE:/^(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?$/,ISO_SPLITTER_RE:/T|Z| +/,_convert:function(t,i){var s,h,e,c,o,u,f;if((t+"").trim()==="")return null;if(h=null,n.isNumber(t)?(u=new Date(t),s=r(u.getUTCFullYear(),4,0)+"-"+r(u.getUTCMonth()+1,2,0)+"-"+r(u.getUTCDate(),2,0),h=r(u.getUTCHours(),2,0)+":"+r(u.getUTCMinutes(),2,0)+":"+r(u.getUTCSeconds(),2,0)):(t=t.trim(),e=t.split(this.ISO_SPLITTER_RE)||[],s=this.DATE_RE.test(e[0])?e[0]:"",h=s&&e[1]?e[1]:this.TIME_RE.test(e[0])?e[0]:""),c=this.DATE_RE.exec(s)||[],o=this.TIME_RE.exec(h)||[],i){if(this.includeDate&&n.isUndefined(c[0]))return;if(this.includeTime&&n.isUndefined(o[0]))return;if(!this.includeDate&&s)return;if(!this.includeTime&&h)return}return u=new Date(Date.UTC(c[1]*1||0,c[2]*1-1||0,c[3]*1||0,o[1]*1||null,o[2]*1||null,o[3]*1||null,o[5]*1||null)),f="",this.includeDate&&(f=r(u.getUTCFullYear(),4,0)+"-"+r(u.getUTCMonth()+1,2,0)+"-"+r(u.getUTCDate(),2,0)),this.includeTime&&(f=f+(this.includeDate?"T":"")+r(u.getUTCHours(),2,0)+":"+r(u.getUTCMinutes(),2,0)+":"+r(u.getUTCSeconds(),2,0),this.includeMilli&&(f=f+"."+r(u.getUTCMilliseconds(),3,0))),this.includeDate&&this.includeTime&&(f+="Z"),f},fromRaw:function(t){return n.isNull(t)||n.isUndefined(t)?"":this._convert(t)},toRaw:function(n){return this._convert(n,!0)}});v=i.StringFormatter=function(){};v.prototype=new e;n.extend(v.prototype,{fromRaw:function(t){return n.isUndefined(t)||n.isNull(t)?"":t+""}});y=i.EmailFormatter=function(){};y.prototype=new e;n.extend(y.prototype,{toRaw:function(t){var i=t.trim().split("@");if(i.length===2&&n.all(i))return t}});p=i.SelectFormatter=function(){};p.prototype=new e;n.extend(p.prototype,{fromRaw:function(t){return n.isArray(t)?t:t!=null?[t]:[]}});var b=i.CellEditor=t.View.extend({initialize:function(n){this.formatter=n.formatter;this.column=n.column;this.column instanceof o||(this.column=new o(this.column));this.listenTo(this.model,"backgrid:editing",this.postRender)},postRender:function(n,t){return(t==null||t.get("name")==this.column.get("name"))&&this.$el.focus(),this}}),tt=i.InputCellEditor=b.extend({tagName:"input",attributes:{type:"text"},events:{blur:"saveOrCancel",keydown:"saveOrCancel"},initialize:function(n){tt.__super__.initialize.apply(this,arguments);n.placeholder&&this.$el.attr("placeholder",n.placeholder)},render:function(){var n=this.model;return this.$el.val(this.formatter.fromRaw(n.get(this.column.get("name")),n)),this},saveOrCancel:function(t){var s=this.formatter,i=this.model,u=this.column,r=new f(t),h=t.type==="blur",e,o;r.moveUp()||r.moveDown()||r.moveLeft()||r.moveRight()||r.save()||h?(t.preventDefault(),t.stopPropagation(),e=this.$el.val(),o=s.toRaw(e,i),n.isUndefined(o)?i.trigger("backgrid:error",i,u,e):(i.set(u.get("name"),o),i.trigger("backgrid:edited",i,u,r))):r.cancel()&&(t.stopPropagation(),i.trigger("backgrid:edited",i,u,r))},postRender:function(n,t){if(t==null||t.get("name")==this.column.get("name"))if(this.$el.css("text-align")==="right"){var i=this.$el.val();this.$el.focus().val(null).val(i)}else this.$el.focus();return this}}),c=i.Cell=t.View.extend({tagName:"td",formatter:e,editor:tt,events:{click:"enterEditMode"},initialize:function(t){this.column=t.column;this.column instanceof o||(this.column=new o(this.column));var r=this.column,u=this.model,f=this.$el,e=i.resolveNameToClass(r.get("formatter")||this.formatter,"Formatter");n.isFunction(e.fromRaw)||n.isFunction(e.toRaw)||(e=new e);this.formatter=e;this.editor=i.resolveNameToClass(this.editor,"CellEditor");this.listenTo(u,"change:"+r.get("name"),function(){f.hasClass("editor")||this.render()});this.listenTo(u,"backgrid:error",this.renderError);this.listenTo(r,"change:editable change:sortable change:renderable",function(n){var t=n.changedAttributes();for(var i in t)t.hasOwnProperty(i)&&f.toggleClass(i,t[i])});i.callByNeed(r.editable(),r,u)&&f.addClass("editable");i.callByNeed(r.sortable(),r,u)&&f.addClass("sortable");i.callByNeed(r.renderable(),r,u)&&f.addClass("renderable")},render:function(){this.$el.empty();var n=this.model;return this.$el.text(this.formatter.fromRaw(n.get(this.column.get("name")),n)),this.delegateEvents(),this},enterEditMode:function(){var n=this.model,t=this.column,r=i.callByNeed(t.editable(),t,n);r&&(this.currentEditor=new this.editor({column:this.column,model:this.model,formatter:this.formatter}),n.trigger("backgrid:edit",n,t,this,this.currentEditor),this.undelegateEvents(),this.$el.empty(),this.$el.append(this.currentEditor.$el),this.currentEditor.render(),this.$el.addClass("editor"),n.trigger("backgrid:editing",n,t,this,this.currentEditor))},renderError:function(n,t){(t==null||t.get("name")==this.column.get("name"))&&this.$el.addClass("error")},exitEditMode:function(){this.$el.removeClass("error");this.currentEditor.remove();this.stopListening(this.currentEditor);delete this.currentEditor;this.$el.removeClass("editor");this.render()},remove:function(){return this.currentEditor&&(this.currentEditor.remove.apply(this.currentEditor,arguments),delete this.currentEditor),c.__super__.remove.apply(this,arguments)}}),rt=i.StringCell=c.extend({className:"string-cell",formatter:v}),ut=i.UriCell=c.extend({className:"uri-cell",title:null,target:"_blank",initialize:function(n){ut.__super__.initialize.apply(this,arguments);this.title=n.title||this.title;this.target=n.target||this.target},render:function(){this.$el.empty();var n=this.model.get(this.column.get("name")),t=this.formatter.fromRaw(n,this.model);return this.$el.append(l("<a>",{tabIndex:-1,href:n,title:this.title||t,target:this.target}).text(t)),this.delegateEvents(),this}}),yt=i.EmailCell=rt.extend({className:"email-cell",formatter:y,render:function(){this.$el.empty();var t=this.model,n=this.formatter.fromRaw(t.get(this.column.get("name")),t);return this.$el.append(l("<a>",{tabIndex:-1,href:"mailto:"+n,title:n}).text(n)),this.delegateEvents(),this}}),k=i.NumberCell=c.extend({className:"number-cell",decimals:u.prototype.defaults.decimals,decimalSeparator:u.prototype.defaults.decimalSeparator,orderSeparator:u.prototype.defaults.orderSeparator,formatter:u,initialize:function(){k.__super__.initialize.apply(this,arguments);var n=this.formatter;n.decimals=this.decimals;n.decimalSeparator=this.decimalSeparator;n.orderSeparator=this.orderSeparator}}),pt=i.IntegerCell=k.extend({className:"integer-cell",decimals:0}),ft=i.PercentCell=k.extend({className:"percent-cell",multiplier:a.prototype.defaults.multiplier,symbol:a.prototype.defaults.symbol,formatter:a,initialize:function(){ft.__super__.initialize.apply(this,arguments);var n=this.formatter;n.multiplier=this.multiplier;n.symbol=this.symbol}}),d=i.DatetimeCell=c.extend({className:"datetime-cell",includeDate:h.prototype.defaults.includeDate,includeTime:h.prototype.defaults.includeTime,includeMilli:h.prototype.defaults.includeMilli,formatter:h,initialize:function(){var i,t;d.__super__.initialize.apply(this,arguments);i=this.formatter;i.includeDate=this.includeDate;i.includeTime=this.includeTime;i.includeMilli=this.includeMilli;t=this.includeDate?"YYYY-MM-DD":"";t+=this.includeDate&&this.includeTime?"T":"";t+=this.includeTime?"HH:mm:ss":"";t+=this.includeTime&&this.includeMilli?".SSS":"";this.editor=this.editor.extend({attributes:n.extend({},this.editor.prototype.attributes,this.editor.attributes,{placeholder:t})})}}),wt=i.DateCell=d.extend({className:"date-cell",includeTime:!1}),bt=i.TimeCell=d.extend({className:"time-cell",includeDate:!1}),et=i.BooleanCellEditor=b.extend({tagName:"input",attributes:{tabIndex:-1,type:"checkbox"},events:{mousedown:function(){this.mouseDown=!0},blur:"enterOrExitEditMode",mouseup:function(){this.mouseDown=!1},change:"saveOrCancel",keydown:"saveOrCancel"},render:function(){var n=this.model,t=this.formatter.fromRaw(n.get(this.column.get("name")),n);return this.$el.prop("checked",t),this},enterOrExitEditMode:function(n){if(!this.mouseDown){var t=this.model;t.trigger("backgrid:edited",t,this.column,new f(n))}},saveOrCancel:function(n){var i=this.model,r=this.column,o=this.formatter,t=new f(n),u,e;if(t.passThru()&&n.type!="change")return!0;t.cancel()&&(n.stopPropagation(),i.trigger("backgrid:edited",i,r,t));u=this.$el;t.save()||t.moveLeft()||t.moveRight()||t.moveUp()||t.moveDown()?(n.preventDefault(),n.stopPropagation(),e=o.toRaw(u.prop("checked"),i),i.set(r.get("name"),e),i.trigger("backgrid:edited",i,r,t)):n.type=="change"&&(e=o.toRaw(u.prop("checked"),i),i.set(r.get("name"),e),u.focus())}}),kt=i.BooleanCell=c.extend({className:"boolean-cell",editor:et,events:{click:"enterEditMode"},render:function(){this.$el.empty();var n=this.model,t=this.column,r=i.callByNeed(t.editable(),t,n);return this.$el.append(l("<input>",{tabIndex:-1,type:"checkbox",checked:this.formatter.fromRaw(n.get(t.get("name")),n),disabled:!r})),this.delegateEvents(),this}}),ot=i.SelectCellEditor=b.extend({tagName:"select",events:{change:"save",blur:"close",keydown:"close"},template:n.template('<option value="<%- value %>" <%= selected ? \'selected="selected"\' : "" %>><%- text %><\/option>',null,{variable:null}),setOptionValues:function(t){this.optionValues=t;this.optionValues=n.result(this,"optionValues")},setMultiple:function(n){this.multiple=n;this.$el.prop("multiple",n)},_renderOptions:function(t,i){for(var u="",r=0;r<t.length;r++)u=u+this.template({text:t[r][0],value:t[r][1],selected:n.indexOf(i,t[r][1])>-1});return u},render:function(){var i,t;this.$el.empty();var r=n.result(this,"optionValues"),f=this.model,e=this.formatter.fromRaw(f.get(this.column.get("name")),f);if(!n.isArray(r))throw new TypeError("optionValues must be an array");var t=null,o=null,t=null,s=null,u=null;for(i=0;i<r.length;i++)if(t=r[i],n.isArray(t))o=t[0],t=t[1],this.$el.append(this.template({text:o,value:t,selected:n.indexOf(e,t)>-1}));else if(n.isObject(t))s=t.name,u=l("<optgroup><\/optgroup>",{label:s}),u.append(this._renderOptions.call(this,t.values,e)),this.$el.append(u);else throw new TypeError("optionValues elements must be a name-value pair or an object hash of { name: 'optgroup label', value: [option name-value pairs] }");return this.delegateEvents(),this},save:function(){var n=this.model,t=this.column;n.set(t.get("name"),this.formatter.toRaw(this.$el.val(),n))},close:function(n){var i=this.model,r=this.column,t=new f(n);t.cancel()?(n.stopPropagation(),i.trigger("backgrid:edited",i,r,new f(n))):(t.save()||t.moveLeft()||t.moveRight()||t.moveUp()||t.moveDown()||n.type=="blur")&&(n.preventDefault(),n.stopPropagation(),this.save(n),i.trigger("backgrid:edited",i,r,new f(n)))}}),st=i.SelectCell=c.extend({className:"select-cell",editor:ot,multiple:!1,formatter:p,optionValues:undefined,delimiter:", ",initialize:function(){st.__super__.initialize.apply(this,arguments);this.listenTo(this.model,"backgrid:edit",function(n,t,i,r){t.get("name")==this.column.get("name")&&(r.setOptionValues(this.optionValues),r.setMultiple(this.multiple))})},render:function(){var r,o,u,a,t,s,f,h;this.$el.empty();var i=n.result(this,"optionValues"),c=this.model,l=this.formatter.fromRaw(c.get(this.column.get("name")),c),e=[];try{if(!n.isArray(i)||n.isEmpty(i))throw new TypeError;for(r=0;r<l.length;r++)for(o=l[r],u=0;u<i.length;u++)if(t=i[u],n.isArray(t))a=t[0],t=t[1],t==o&&e.push(a);else if(n.isObject(t))for(s=t.values,f=0;f<s.length;f++)h=s[f],h[1]==o&&e.push(h[0]);else throw new TypeError;this.$el.append(e.join(this.delimiter))}catch(v){if(v instanceof TypeError)throw new TypeError("'optionValues' must be of type {Array.<Array>|Array.<{name: string, values: Array.<Array>}>}");throw v;}return this.delegateEvents(),this}}),o=i.Column=t.Model.extend({defaults:{name:undefined,label:undefined,sortable:!0,editable:!0,renderable:!0,formatter:undefined,sortType:"cycle",sortValue:undefined,direction:null,cell:undefined,headerCell:undefined},initialize:function(){this.has("label")||this.set({label:this.get("name")},{silent:!0});var n=i.resolveNameToClass(this.get("headerCell"),"HeaderCell"),t=i.resolveNameToClass(this.get("cell"),"Cell");this.set({cell:t,headerCell:n},{silent:!0})},sortValue:function(){var t=this.get("sortValue");return n.isString(t)?this[t]:n.isFunction(t)?t:function(n,t){return n.get(t)}}});n.each(["sortable","renderable","editable"],function(t){o.prototype[t]=function(){var i=this.get(t);return n.isString(i)?this[i]:n.isFunction(i)?i:!!i}});var w=i.Columns=t.Collection.extend({model:o}),ht=i.Row=t.View.extend({tagName:"tr",initialize:function(n){var i=this.columns=n.columns,r,u;for(i instanceof t.Collection||(i=this.columns=new w(i)),r=this.cells=[],u=0;u<i.length;u++)r.push(this.makeCell(i.at(u),n));this.listenTo(i,"add",function(t,i){var u=i.indexOf(t),f=this.makeCell(t,n),e;r.splice(u,0,f);e=this.$el;u===0?e.prepend(f.render().$el):u===i.length-1?e.append(f.render().$el):e.children().eq(u).before(f.render().$el)});this.listenTo(i,"remove",function(n,t,i){r[i.index].remove();r.splice(i.index,1)})},makeCell:function(n){return new(n.get("cell"))({column:n,model:this.model})},render:function(){var t,n;for(this.$el.empty(),t=document.createDocumentFragment(),n=0;n<this.cells.length;n++)t.appendChild(this.cells[n].render().el);return this.el.appendChild(t),this.delegateEvents(),this},remove:function(){for(var i,n=0;n<this.cells.length;n++)i=this.cells[n],i.remove.apply(i,arguments);return t.View.prototype.remove.apply(this,arguments)}}),it=i.EmptyRow=t.View.extend({tagName:"tr",emptyText:null,initialize:function(n){this.emptyText=n.emptyText;this.columns=n.columns},render:function(){this.$el.empty();var t=document.createElement("td");return t.setAttribute("colspan",this.columns.length),t.appendChild(document.createTextNode(n.result(this,"emptyText"))),this.el.className="empty",this.el.appendChild(t),this}}),ct=i.HeaderCell=t.View.extend({tagName:"th",events:{"click a":"onClick"},initialize:function(n){this.column=n.column;this.column instanceof o||(this.column=new o(this.column));var t=this.column,r=this.collection,u=this.$el;this.listenTo(t,"change:editable change:sortable change:renderable",function(n){var t=n.changedAttributes();for(var i in t)t.hasOwnProperty(i)&&u.toggleClass(i,t[i])});this.listenTo(t,"change:direction",this.setCellDirection);this.listenTo(t,"change:name change:label",this.render);i.callByNeed(t.editable(),t,r)&&u.addClass("editable");i.callByNeed(t.sortable(),t,r)&&u.addClass("sortable");i.callByNeed(t.renderable(),t,r)&&u.addClass("renderable");this.listenTo(r.fullCollection||r,"sort",this.removeCellDirection)},removeCellDirection:function(){this.$el.removeClass("ascending").removeClass("descending");this.column.set("direction",null)},setCellDirection:function(n,t){this.$el.removeClass("ascending").removeClass("descending");n.cid==this.column.cid&&this.$el.addClass(t)},onClick:function(n){function o(n,i){t.get("direction")==="ascending"?r.trigger(u,i,"descending"):t.get("direction")==="descending"?r.trigger(u,i,null):r.trigger(u,i,"ascending")}function s(n,i){t.get("direction")==="ascending"?r.trigger(u,i,"descending"):r.trigger(u,i,"ascending")}var f,e;n.preventDefault();var t=this.column,r=this.collection,u="backgrid:sort";f=i.callByNeed(t.sortable(),t,this.collection);f&&(e=t.get("sortType"),e==="toggle"?s(this,t):o(this,t))},render:function(){this.$el.empty();var n=this.column,r=i.callByNeed(n.sortable(),n,this.collection),t;return t=r?l("<a>").text(n.get("label")).append("<b class='sort-caret'><\/b>"):document.createTextNode(n.get("label")),this.$el.append(t),this.$el.addClass(n.get("name")),this.$el.addClass(n.get("direction")),this.delegateEvents(),this}}),dt=i.HeaderRow=i.Row.extend({initialize:function(){i.Row.prototype.initialize.apply(this,arguments)},makeCell:function(n,t){var i=n.get("headerCell")||t.headerCell||ct;return new i({column:n,collection:this.collection})}}),lt=i.Header=t.View.extend({tagName:"thead",initialize:function(n){this.columns=n.columns;this.columns instanceof t.Collection||(this.columns=new w(this.columns));this.row=new i.HeaderRow({columns:this.columns,collection:this.collection})},render:function(){return this.$el.append(this.row.render().$el),this.delegateEvents(),this},remove:function(){return this.row.remove.apply(this.row,arguments),t.View.prototype.remove.apply(this,arguments)}}),at=i.Body=t.View.extend({tagName:"tbody",initialize:function(n){this.columns=n.columns;this.columns instanceof t.Collection||(this.columns=new w(this.columns));this.row=n.row||ht;this.rows=this.collection.map(function(n){return new this.row({columns:this.columns,model:n})},this);this.emptyText=n.emptyText;this._unshiftEmptyRowMayBe();var i=this.collection;this.listenTo(i,"add",this.insertRow);this.listenTo(i,"remove",this.removeRow);this.listenTo(i,"sort",this.refresh);this.listenTo(i,"reset",this.refresh);this.listenTo(i,"backgrid:sort",this.sort);this.listenTo(i,"backgrid:edited",this.moveToNextCell)},_unshiftEmptyRowMayBe:function(){if(this.rows.length===0&&this.emptyText!=null)return this.rows.unshift(new it({emptyText:this.emptyText,columns:this.columns})),!0},insertRow:function(n,i,r){var f,u;if(this.rows[0]instanceof it&&this.rows.pop().remove(),!(i instanceof t.Collection)&&!r){this.collection.add(n,r=i);return}f=new this.row({columns:this.columns,model:n});u=i.indexOf(n);this.rows.splice(u,0,f);var e=this.$el,o=e.children(),s=f.render().$el;return u>=o.length?e.append(s):o.eq(u).before(s),this},removeRow:function(t,i,r){if(!r){this.collection.remove(t,r=i);this._unshiftEmptyRowMayBe()&&this.render();return}return(n.isUndefined(r.render)||r.render)&&this.rows[r.index].remove(),this.rows.splice(r.index,1),this._unshiftEmptyRowMayBe()&&this.render(),this},refresh:function(){for(var n=0;n<this.rows.length;n++)this.rows[n].remove();return this.rows=this.collection.map(function(n){return new this.row({columns:this.columns,model:n})},this),this._unshiftEmptyRowMayBe(),this.render(),this.collection.trigger("backgrid:refresh",this),this},render:function(){var t,n,i;for(this.$el.empty(),t=document.createDocumentFragment(),n=0;n<this.rows.length;n++)i=this.rows[n],t.appendChild(i.render().el);return this.el.appendChild(t),this.delegateEvents(),this},remove:function(){for(var i,n=0;n<this.rows.length;n++)i=this.rows[n],i.remove.apply(i,arguments);return t.View.prototype.remove.apply(this,arguments)},sort:function(i,r){var u,f,e;if(!n.contains(["ascending","descending",null],r))throw new RangeError('direction must be one of "ascending", "descending" or `null`');return n.isString(i)&&(i=this.columns.findWhere({name:i})),u=this.collection,f=r==="ascending"?-1:r==="descending"?1:null,e=this.makeComparator(i.get("name"),f,f?i.sortValue():function(n){return n.cid.replace("c","")*1}),t.PageableCollection&&u instanceof t.PageableCollection?(u.setSorting(f&&i.get("name"),f,{sortValue:i.sortValue()}),u.fullCollection?(u.fullCollection.comparator==null&&(u.fullCollection.comparator=e),u.fullCollection.sort(),u.trigger("backgrid:sorted",i,r,u)):u.fetch({reset:!0,success:function(){u.trigger("backgrid:sorted",i,r,u)}})):(u.comparator=e,u.sort(),u.trigger("backgrid:sorted",i,r,u)),i.set("direction",r),this},makeComparator:function(n,t,i){return function(r,u){var f=i(r,n),e=i(u,n),o;return(t===1&&(o=f,f=e,e=o),f===e)?0:f<e?-1:1}},moveToNextCell:function(n,t,r){var h=this.collection.indexOf(n),s=this.columns.indexOf(t),u,y,p,e,c,o,l,a,v,f;if(s===-1)return this;if(this.rows[h].cells[s].exitEditMode(),r.moveUp()||r.moveDown()||r.moveLeft()||r.moveRight()||r.save())if(o=this.columns.length,l=o*this.collection.length,r.moveUp()||r.moveDown())e=h+(r.moveUp()?-1:1),a=this.rows[e],a?(u=a.cells[s],i.callByNeed(u.column.editable(),u.column,n)&&(u.enterEditMode(),n.trigger("backgrid:next",e,s,!1))):n.trigger("backgrid:next",e,s,!0);else if(r.moveLeft()||r.moveRight()){for(v=r.moveRight(),f=h*o+s+(v?1:-1);f>=0&&f<l;v?f++:f--)if(e=~~(f/o),c=f-e*o,u=this.rows[e].cells[c],y=i.callByNeed(u.column.renderable(),u.column,u.model),p=i.callByNeed(u.column.editable(),u.column,n),y&&p){u.enterEditMode();n.trigger("backgrid:next",e,c,!1);break}f==l&&n.trigger("backgrid:next",~~(f/o),f-e*o,!0)}return this}}),gt=i.Footer=t.View.extend({tagName:"tfoot",initialize:function(n){this.columns=n.columns;this.columns instanceof t.Collection||(this.columns=new i.Columns(this.columns))}}),ni=i.Grid=t.View.extend({tagName:"table",className:"backgrid",header:lt,body:at,footer:null,initialize:function(i){i.columns instanceof t.Collection||(i.columns=new w(i.columns||this.columns));this.columns=i.columns;var r=n.omit(i,["el","id","attributes","className","tagName","events"]);this.body=i.body||this.body;this.body=new this.body(r);this.header=i.header||this.header;this.header&&(this.header=new this.header(r));this.footer=i.footer||this.footer;this.footer&&(this.footer=new this.footer(r));this.listenTo(this.columns,"reset",function(){this.header&&(this.header=new(this.header.remove().constructor)(r));this.body=new(this.body.remove().constructor)(r);this.footer&&(this.footer=new(this.footer.remove().constructor)(r));this.render()})},insertRow:function(){return this.body.insertRow.apply(this.body,arguments),this},removeRow:function(){return this.body.removeRow.apply(this.body,arguments),this},insertColumn:function(){return this.columns.add.apply(this.columns,arguments),this},removeColumn:function(){return this.columns.remove.apply(this.columns,arguments),this},sort:function(){return this.body.sort.apply(this.body,arguments),this},render:function(){return this.$el.empty(),this.header&&this.$el.append(this.header.render().$el),this.footer&&this.$el.append(this.footer.render().$el),this.$el.append(this.body.render().$el),this.delegateEvents(),this.trigger("backgrid:rendered",this),this},remove:function(){return this.header&&this.header.remove.apply(this.header,arguments),this.body.remove.apply(this.body,arguments),this.footer&&this.footer.remove.apply(this.footer,arguments),t.View.prototype.remove.apply(this,arguments)}});return i});
/*
  backgrid-moment-cell
  http://github.com/wyuenho/backgrid
  Copyright (c) 2013 Jimmy Yuen Ho Wong and contributors
  Licensed under the MIT @license.
*/
(function(n,t){typeof define=="function"&&define.amd?define(["underscore","backgrid","moment"],t):typeof exports=="object"?module.exports=t(require("underscore"),require("backgrid"),require("moment")):t(n._,n.Backgrid,n.moment)})(this,function(n,t,i){var r=t.Extension.MomentFormatter=function(t){n.extend(this,this.defaults,t)},u;r.prototype=new t.CellFormatter;n.extend(r.prototype,{defaults:{modelInUnixOffset:!1,modelInUnixTimestamp:!1,modelInUTC:!0,modelLang:i.locale(),modelFormat:i.defaultFormat,displayInUnixOffset:!1,displayInUnixTimestamp:!1,displayInUTC:!0,displayLang:i.locale(),displayFormat:i.defaultFormat},fromRaw:function(n){if(n==null)return"";var t=this.modelInUnixOffset?i(n):this.modelInUnixTimestamp?i.unix(n):this.modelInUTC?i.utc(n,this.modelFormat,this.modelLang):i(n,this.modelFormat,this.modelLang);return this.displayInUnixOffset?+t:this.displayInUnixTimestamp?t.unix():(this.displayLang&&t.lang(this.displayLang),this.displayInUTC?t.utc():t.local(),t.format(this.displayFormat))},toRaw:function(n){var t=this.displayInUnixOffset?i(+n):this.displayInUnixTimestamp?i.unix(+n):this.displayInUTC?i.utc(n,this.displayFormat,this.displayLang):i(n,this.displayFormat,this.displayLang);if(t&&t.isValid())return this.modelInUnixOffset?+t:this.modelInUnixTimestamp?t.unix():(this.modelLang&&t.lang(this.modelLang),this.modelInUTC?t.utc():t.local(),t.format(this.modelFormat))}});u=t.Extension.MomentCell=t.Cell.extend({editor:t.InputCellEditor,className:"moment-cell",formatter:r,initialize:function(t){u.__super__.initialize.apply(this,arguments);var i=r.prototype.defaults,f=n.keys(i),e=n.pick(this,f),o=n.pick(t,f);n.extend(this.formatter,i,e,o);this.editor=this.editor.extend({attributes:n.extend({},this.editor.prototype.attributes||this.editor.attributes||{},{placeholder:this.formatter.displayFormat})})}});n.extend(u.prototype,r.prototype.defaults)});
/*!
 * Bootstrap v3.3.5 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under the MIT license
 */
if(typeof jQuery=="undefined")throw new Error("Bootstrap's JavaScript requires jQuery");+function(n){"use strict";var t=n.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||t[0]==1&&t[1]==9&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher");}(jQuery);+function(n){"use strict";function t(){var i=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(i.style[t]!==undefined)return{end:n[t]};return!1}n.fn.emulateTransitionEnd=function(t){var i=!1,u=this,r;n(this).one("bsTransitionEnd",function(){i=!0});return r=function(){i||n(u).trigger(n.support.transition.end)},setTimeout(r,t),this};n(function(){(n.support.transition=t(),n.support.transition)&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery);+function(n){"use strict";function u(i){return this.each(function(){var r=n(this),u=r.data("bs.alert");u||r.data("bs.alert",u=new t(this));typeof i=="string"&&u[i].call(r)})}var i='[data-dismiss="alert"]',t=function(t){n(t).on("click",i,this.close)},r;t.VERSION="3.3.5";t.TRANSITION_DURATION=150;t.prototype.close=function(i){function e(){r.detach().trigger("closed.bs.alert").remove()}var f=n(this),u=f.attr("data-target"),r;(u||(u=f.attr("href"),u=u&&u.replace(/.*(?=#[^\s]*$)/,"")),r=n(u),i&&i.preventDefault(),r.length||(r=f.closest(".alert")),r.trigger(i=n.Event("close.bs.alert")),i.isDefaultPrevented())||(r.removeClass("in"),n.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e())};r=n.fn.alert;n.fn.alert=u;n.fn.alert.Constructor=t;n.fn.alert.noConflict=function(){return n.fn.alert=r,this};n(document).on("click.bs.alert.data-api",i,t.prototype.close)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.button"),f=typeof i=="object"&&i;r||u.data("bs.button",r=new t(this,f));i=="toggle"?r.toggle():i&&r.setState(i)})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.isLoading=!1},r;t.VERSION="3.3.5";t.DEFAULTS={loadingText:"loading..."};t.prototype.setState=function(t){var r="disabled",i=this.$element,f=i.is("input")?"val":"html",u=i.data();t+="Text";u.resetText==null&&i.data("resetText",i[f]());setTimeout(n.proxy(function(){i[f](u[t]==null?this.options[t]:u[t]);t=="loadingText"?(this.isLoading=!0,i.addClass(r).attr(r,r)):this.isLoading&&(this.isLoading=!1,i.removeClass(r).removeAttr(r))},this),0)};t.prototype.toggle=function(){var t=!0,i=this.$element.closest('[data-toggle="buttons"]'),n;i.length?(n=this.$element.find("input"),n.prop("type")=="radio"?(n.prop("checked")&&(t=!1),i.find(".active").removeClass("active"),this.$element.addClass("active")):n.prop("type")=="checkbox"&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")):(this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active"))};r=n.fn.button;n.fn.button=i;n.fn.button.Constructor=t;n.fn.button.noConflict=function(){return n.fn.button=r,this};n(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=n(t.target);r.hasClass("btn")||(r=r.closest(".btn"));i.call(r,"toggle");n(t.target).is('input[type="radio"]')||n(t.target).is('input[type="checkbox"]')||t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){n(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.carousel"),f=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i),e=typeof i=="string"?i:f.slide;r||u.data("bs.carousel",r=new t(this,f));typeof i=="number"?r.to(i):e?r[e]():f.interval&&r.pause().cycle()})}var t=function(t,i){this.$element=n(t);this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",n.proxy(this.keydown,this));this.options.pause!="hover"||"ontouchstart"in document.documentElement||this.$element.on("mouseenter.bs.carousel",n.proxy(this.pause,this)).on("mouseleave.bs.carousel",n.proxy(this.cycle,this))},u,r;t.VERSION="3.3.5";t.TRANSITION_DURATION=600;t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0};t.prototype.keydown=function(n){if(!/input|textarea/i.test(n.target.tagName)){switch(n.which){case 37:this.prev();break;case 39:this.next();break;default:return}n.preventDefault()}};t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(n.proxy(this.next,this),this.options.interval)),this};t.prototype.getItemIndex=function(n){return this.$items=n.parent().children(".item"),this.$items.index(n||this.$active)};t.prototype.getItemForDirection=function(n,t){var i=this.getItemIndex(t),f=n=="prev"&&i===0||n=="next"&&i==this.$items.length-1,r,u;return f&&!this.options.wrap?t:(r=n=="prev"?-1:1,u=(i+r)%this.$items.length,this.$items.eq(u))};t.prototype.to=function(n){var i=this,t=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(n>this.$items.length-1)&&!(n<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(n)}):t==n?this.pause().cycle():this.slide(n>t?"next":"prev",this.$items.eq(n))};t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&n.support.transition&&(this.$element.trigger(n.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};t.prototype.next=function(){if(!this.sliding)return this.slide("next")};t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};t.prototype.slide=function(i,r){var e=this.$element.find(".item.active"),u=r||this.getItemForDirection(i,e),l=this.interval,f=i=="next"?"left":"right",a=this,o,s,h,c;return u.hasClass("active")?this.sliding=!1:(o=u[0],s=n.Event("slide.bs.carousel",{relatedTarget:o,direction:f}),this.$element.trigger(s),s.isDefaultPrevented())?void 0:(this.sliding=!0,l&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),h=n(this.$indicators.children()[this.getItemIndex(u)]),h&&h.addClass("active")),c=n.Event("slid.bs.carousel",{relatedTarget:o,direction:f}),n.support.transition&&this.$element.hasClass("slide")?(u.addClass(i),u[0].offsetWidth,e.addClass(f),u.addClass(f),e.one("bsTransitionEnd",function(){u.removeClass([i,f].join(" ")).addClass("active");e.removeClass(["active",f].join(" "));a.sliding=!1;setTimeout(function(){a.$element.trigger(c)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(e.removeClass("active"),u.addClass("active"),this.sliding=!1,this.$element.trigger(c)),l&&this.cycle(),this)};u=n.fn.carousel;n.fn.carousel=i;n.fn.carousel.Constructor=t;n.fn.carousel.noConflict=function(){return n.fn.carousel=u,this};r=function(t){var o,r=n(this),u=n(r.attr("data-target")||(o=r.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")),e,f;u.hasClass("carousel")&&(e=n.extend({},u.data(),r.data()),f=r.attr("data-slide-to"),f&&(e.interval=!1),i.call(u,e),f&&u.data("bs.carousel").to(f),t.preventDefault())};n(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r);n(window).on("load",function(){n('[data-ride="carousel"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function r(t){var i,r=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return n(r)}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.collapse"),f=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i);!r&&f.toggle&&/show|hide/.test(i)&&(f.toggle=!1);r||u.data("bs.collapse",r=new t(this,f));typeof i=="string"&&r[i]()})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.$trigger=n('[data-toggle="collapse"][href="#'+i.id+'"],[data-toggle="collapse"][data-target="#'+i.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()},u;t.VERSION="3.3.5";t.TRANSITION_DURATION=350;t.DEFAULTS={toggle:!0};t.prototype.dimension=function(){var n=this.$element.hasClass("width");return n?"width":"height"};t.prototype.show=function(){var f,r,e,u,o,s;if(!this.transitioning&&!this.$element.hasClass("in")&&(r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing"),!r||!r.length||(f=r.data("bs.collapse"),!f||!f.transitioning))&&(e=n.Event("show.bs.collapse"),this.$element.trigger(e),!e.isDefaultPrevented())){if(r&&r.length&&(i.call(r,"hide"),f||r.data("bs.collapse",null)),u=this.dimension(),this.$element.removeClass("collapse").addClass("collapsing")[u](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[u]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")},!n.support.transition)return o.call(this);s=n.camelCase(["scroll",u].join("-"));this.$element.one("bsTransitionEnd",n.proxy(o,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[u](this.$element[0][s])}};t.prototype.hide=function(){var r,i,u;if(!this.transitioning&&this.$element.hasClass("in")&&(r=n.Event("hide.bs.collapse"),this.$element.trigger(r),!r.isDefaultPrevented())){if(i=this.dimension(),this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,u=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")},!n.support.transition)return u.call(this);this.$element[i](0).one("bsTransitionEnd",n.proxy(u,this)).emulateTransitionEnd(t.TRANSITION_DURATION)}};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};t.prototype.getParent=function(){return n(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(n.proxy(function(t,i){var u=n(i);this.addAriaAndCollapsedClass(r(u),u)},this)).end()};t.prototype.addAriaAndCollapsedClass=function(n,t){var i=n.hasClass("in");n.attr("aria-expanded",i);t.toggleClass("collapsed",!i).attr("aria-expanded",i)};u=n.fn.collapse;n.fn.collapse=i;n.fn.collapse.Constructor=t;n.fn.collapse.noConflict=function(){return n.fn.collapse=u,this};n(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var u=n(this);u.attr("data-target")||t.preventDefault();var f=r(u),e=f.data("bs.collapse"),o=e?"toggle":u.data();i.call(f,o)})}(jQuery);+function(n){"use strict";function r(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=i&&n(i),r&&r.length?r:t.parent()}function u(t){t&&t.which===3||(n(e).remove(),n(i).each(function(){var u=n(this),i=r(u),f={relatedTarget:this};i.hasClass("open")&&(t&&t.type=="click"&&/input|textarea/i.test(t.target.tagName)&&n.contains(i[0],t.target)||(i.trigger(t=n.Event("hide.bs.dropdown",f)),t.isDefaultPrevented())||(u.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function o(i){return this.each(function(){var r=n(this),u=r.data("bs.dropdown");u||r.data("bs.dropdown",u=new t(this));typeof i=="string"&&u[i].call(r)})}var e=".dropdown-backdrop",i='[data-toggle="dropdown"]',t=function(t){n(t).on("click.bs.dropdown",this.toggle)},f;t.VERSION="3.3.5";t.prototype.toggle=function(t){var f=n(this),i,o,e;if(!f.is(".disabled, :disabled")){if(i=r(f),o=i.hasClass("open"),u(),!o){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length)n(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(n(this)).on("click",u);if(e={relatedTarget:this},i.trigger(t=n.Event("show.bs.dropdown",e)),t.isDefaultPrevented())return;f.trigger("focus").attr("aria-expanded","true");i.toggleClass("open").trigger("shown.bs.dropdown",e)}return!1}};t.prototype.keydown=function(t){var e,o,s,h,f,u;if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)&&(e=n(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(o=r(e),s=o.hasClass("open"),!s&&t.which!=27||s&&t.which==27)return t.which==27&&o.find(i).trigger("focus"),e.trigger("click");(h=" li:not(.disabled):visible a",f=o.find(".dropdown-menu"+h),f.length)&&(u=f.index(t.target),t.which==38&&u>0&&u--,t.which==40&&u<f.length-1&&u++,~u||(u=0),f.eq(u).trigger("focus"))}};f=n.fn.dropdown;n.fn.dropdown=o;n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).on("click.bs.dropdown.data-api",u).on("click.bs.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.bs.dropdown.data-api",i,t.prototype.toggle).on("keydown.bs.dropdown.data-api",i,t.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",t.prototype.keydown)}(jQuery);+function(n){"use strict";function i(i,r){return this.each(function(){var f=n(this),u=f.data("bs.modal"),e=n.extend({},t.DEFAULTS,f.data(),typeof i=="object"&&i);u||f.data("bs.modal",u=new t(this,e));typeof i=="string"?u[i](r):e.show&&u.show(r)})}var t=function(t,i){this.options=i;this.$body=n(document.body);this.$element=n(t);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=!1;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,n.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))},r;t.VERSION="3.3.5";t.TRANSITION_DURATION=300;t.BACKDROP_TRANSITION_DURATION=150;t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};t.prototype.toggle=function(n){return this.isShown?this.hide():this.show(n)};t.prototype.show=function(i){var r=this,u=n.Event("show.bs.modal",{relatedTarget:i});if(this.$element.trigger(u),!this.isShown&&!u.isDefaultPrevented()){this.isShown=!0;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',n.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){n(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})});this.backdrop(function(){var f=n.support.transition&&r.$element.hasClass("fade"),u;r.$element.parent().length||r.$element.appendTo(r.$body);r.$element.show().scrollTop(0);r.adjustDialog();f&&r.$element[0].offsetWidth;r.$element.addClass("in");r.enforceFocus();u=n.Event("shown.bs.modal",{relatedTarget:i});f?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(u)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(u)})}};t.prototype.hide=function(i){(i&&i.preventDefault(),i=n.Event("hide.bs.modal"),this.$element.trigger(i),this.isShown&&!i.isDefaultPrevented())&&(this.isShown=!1,this.escape(),this.resize(),n(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),n.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",n.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())};t.prototype.enforceFocus=function(){n(document).off("focusin.bs.modal").on("focusin.bs.modal",n.proxy(function(n){this.$element[0]===n.target||this.$element.has(n.target).length||this.$element.trigger("focus")},this))};t.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keydown.dismiss.bs.modal",n.proxy(function(n){n.which==27&&this.hide()},this));else this.isShown||this.$element.off("keydown.dismiss.bs.modal")};t.prototype.resize=function(){if(this.isShown)n(window).on("resize.bs.modal",n.proxy(this.handleUpdate,this));else n(window).off("resize.bs.modal")};t.prototype.hideModal=function(){var n=this;this.$element.hide();this.backdrop(function(){n.$body.removeClass("modal-open");n.resetAdjustments();n.resetScrollbar();n.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(i){var e=this,f=this.$element.hasClass("fade")?"fade":"",r,u;if(this.isShown&&this.options.backdrop){r=n.support.transition&&f;this.$backdrop=n(document.createElement("div")).addClass("modal-backdrop "+f).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",n.proxy(function(n){if(this.ignoreBackdropClick){this.ignoreBackdropClick=!1;return}n.target===n.currentTarget&&(this.options.backdrop=="static"?this.$element[0].focus():this.hide())},this));if(r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!i)return;r?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):i()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),u=function(){e.removeBackdrop();i&&i()},n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",u).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):u()):i&&i()};t.prototype.handleUpdate=function(){this.adjustDialog()};t.prototype.adjustDialog=function(){var n=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&n?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!n?this.scrollbarWidth:""})};t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};t.prototype.checkScrollbar=function(){var n=window.innerWidth,t;n||(t=document.documentElement.getBoundingClientRect(),n=t.right-Math.abs(t.left));this.bodyIsOverflowing=document.body.clientWidth<n;this.scrollbarWidth=this.measureScrollbar()};t.prototype.setScrollbar=function(){var n=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";this.bodyIsOverflowing&&this.$body.css("padding-right",n+this.scrollbarWidth)};t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};t.prototype.measureScrollbar=function(){var n=document.createElement("div"),t;return n.className="modal-scrollbar-measure",this.$body.append(n),t=n.offsetWidth-n.clientWidth,this.$body[0].removeChild(n),t};r=n.fn.modal;n.fn.modal=i;n.fn.modal.Constructor=t;n.fn.modal.noConflict=function(){return n.fn.modal=r,this};n(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=n(this),f=r.attr("href"),u=n(r.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,"")),e=u.data("bs.modal")?"toggle":n.extend({remote:!/#/.test(f)&&f},u.data(),r.data());r.is("a")&&t.preventDefault();u.one("show.bs.modal",function(n){if(!n.isDefaultPrevented())u.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})});i.call(u,e,this)})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tooltip"),f=typeof i=="object"&&i;(r||!/destroy|hide/.test(i))&&(r||u.data("bs.tooltip",r=new t(this,f)),typeof i=="string"&&r[i]())})}var t=function(n,t){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",n,t)},i;t.VERSION="3.3.5";t.TRANSITION_DURATION=150;t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};t.prototype.init=function(t,i,r){var f,e,u,o,s;if(this.enabled=!0,this.type=t,this.$element=n(i),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&n(n.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(f=this.options.trigger.split(" "),e=f.length;e--;)if(u=f[e],u=="click")this.$element.on("click."+this.type,this.options.selector,n.proxy(this.toggle,this));else if(u!="manual"){o=u=="hover"?"mouseenter":"focusin";s=u=="hover"?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,n.proxy(this.enter,this));this.$element.on(s+"."+this.type,this.options.selector,n.proxy(this.leave,this))}this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){return t=n.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t};t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&n.each(this._options,function(n,r){i[n]!=r&&(t[n]=r)}),t};t.prototype.enter=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),t instanceof n.Event&&(i.inState[t.type=="focusin"?"focus":"hover"]=!0),i.tip().hasClass("in")||i.hoverState=="in"){i.hoverState="in";return}if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)};t.prototype.isInStateTrue=function(){for(var n in this.inState)if(this.inState[n])return!0;return!1};t.prototype.leave=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),t instanceof n.Event&&(i.inState[t.type=="focusout"?"focus":"hover"]=!1),!i.isInStateTrue()){if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){i.hoverState=="out"&&i.hide()},i.options.delay.hide)}};t.prototype.show=function(){var c=n.Event("show.bs."+this.type),l,p,e,w,h;if(this.hasContent()&&this.enabled){if(this.$element.trigger(c),l=n.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),c.isDefaultPrevented()||!l)return;var u=this,r=this.tip(),a=this.getUID(this.type);this.setContent();r.attr("id",a);this.$element.attr("aria-describedby",a);this.options.animation&&r.addClass("fade");var i=typeof this.options.placement=="function"?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,v=/\s?auto?\s?/i,y=v.test(i);y&&(i=i.replace(v,"")||"top");r.detach().css({top:0,left:0,display:"block"}).addClass(i).data("bs."+this.type,this);this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var f=this.getPosition(),o=r[0].offsetWidth,s=r[0].offsetHeight;y&&(p=i,e=this.getPosition(this.$viewport),i=i=="bottom"&&f.bottom+s>e.bottom?"top":i=="top"&&f.top-s<e.top?"bottom":i=="right"&&f.right+o>e.width?"left":i=="left"&&f.left-o<e.left?"right":i,r.removeClass(p).addClass(i));w=this.getCalculatedOffset(i,f,o,s);this.applyPlacement(w,i);h=function(){var n=u.hoverState;u.$element.trigger("shown.bs."+u.type);u.hoverState=null;n=="out"&&u.leave(u)};n.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",h).emulateTransitionEnd(t.TRANSITION_DURATION):h()}};t.prototype.applyPlacement=function(t,i){var r=this.tip(),l=r[0].offsetWidth,e=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10),h,f,u;isNaN(o)&&(o=0);isNaN(s)&&(s=0);t.top+=o;t.left+=s;n.offset.setOffset(r[0],n.extend({using:function(n){r.css({top:Math.round(n.top),left:Math.round(n.left)})}},t),0);r.addClass("in");h=r[0].offsetWidth;f=r[0].offsetHeight;i=="top"&&f!=e&&(t.top=t.top+e-f);u=this.getViewportAdjustedDelta(i,t,h,f);u.left?t.left+=u.left:t.top+=u.top;var c=/top|bottom/.test(i),a=c?u.left*2-l+h:u.top*2-e+f,v=c?"offsetWidth":"offsetHeight";r.offset(t);this.replaceArrow(a,r[0][v],c)};t.prototype.replaceArrow=function(n,t,i){this.arrow().css(i?"left":"top",50*(1-n/t)+"%").css(i?"top":"left","")};t.prototype.setContent=function(){var n=this.tip(),t=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](t);n.removeClass("fade in top bottom left right")};t.prototype.hide=function(i){function e(){u.hoverState!="in"&&r.detach();u.$element.removeAttr("aria-describedby").trigger("hidden.bs."+u.type);i&&i()}var u=this,r=n(this.$tip),f=n.Event("hide.bs."+this.type);if(this.$element.trigger(f),!f.isDefaultPrevented())return r.removeClass("in"),n.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e(),this.hoverState=null,this};t.prototype.fixTitle=function(){var n=this.$element;(n.attr("title")||typeof n.attr("data-original-title")!="string")&&n.attr("data-original-title",n.attr("title")||"").attr("title","")};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(t){t=t||this.$element;var u=t[0],r=u.tagName=="BODY",i=u.getBoundingClientRect();i.width==null&&(i=n.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var f=r?{top:0,left:0}:t.offset(),e={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},o=r?{width:n(window).width(),height:n(window).height()}:null;return n.extend({},i,e,o,f)};t.prototype.getCalculatedOffset=function(n,t,i,r){return n=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-i/2}:n=="top"?{top:t.top-r,left:t.left+t.width/2-i/2}:n=="left"?{top:t.top+t.height/2-r/2,left:t.left-i}:{top:t.top+t.height/2-r/2,left:t.left+t.width}};t.prototype.getViewportAdjustedDelta=function(n,t,i,r){var f={top:0,left:0},e,u,o,s,h,c;return this.$viewport?(e=this.options.viewport&&this.options.viewport.padding||0,u=this.getPosition(this.$viewport),/right|left/.test(n)?(o=t.top-e-u.scroll,s=t.top+e-u.scroll+r,o<u.top?f.top=u.top-o:s>u.top+u.height&&(f.top=u.top+u.height-s)):(h=t.left-e,c=t.left+e+i,h<u.left?f.left=u.left-h:c>u.right&&(f.left=u.left+u.width-c)),f):f};t.prototype.getTitle=function(){var t=this.$element,n=this.options;return t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title)};t.prototype.getUID=function(n){do n+=~~(Math.random()*1e6);while(document.getElementById(n));return n};t.prototype.tip=function(){if(!this.$tip&&(this.$tip=n(this.options.template),this.$tip.length!=1))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.enable=function(){this.enabled=!0};t.prototype.disable=function(){this.enabled=!1};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var i=this;t&&(i=n(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)));t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)};t.prototype.destroy=function(){var n=this;clearTimeout(this.timeout);this.hide(function(){n.$element.off("."+n.type).removeData("bs."+n.type);n.$tip&&n.$tip.detach();n.$tip=null;n.$arrow=null;n.$viewport=null})};i=n.fn.tooltip;n.fn.tooltip=r;n.fn.tooltip.Constructor=t;n.fn.tooltip.noConflict=function(){return n.fn.tooltip=i,this}}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.popover"),f=typeof i=="object"&&i;(r||!/destroy|hide/.test(i))&&(r||u.data("bs.popover",r=new t(this,f)),typeof i=="string"&&r[i]())})}var t=function(n,t){this.init("popover",n,t)},i;if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.5";t.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'});t.prototype=n.extend({},n.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var n=this.tip(),i=this.getTitle(),t=this.getContent();n.find(".popover-title")[this.options.html?"html":"text"](i);n.find(".popover-content").children().detach().end()[this.options.html?typeof t=="string"?"html":"append":"text"](t);n.removeClass("fade top bottom left right in");n.find(".popover-title").html()||n.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var t=this.$element,n=this.options;return t.attr("data-content")||(typeof n.content=="function"?n.content.call(t[0]):n.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};i=n.fn.popover;n.fn.popover=r;n.fn.popover.Constructor=t;n.fn.popover.noConflict=function(){return n.fn.popover=i,this}}(jQuery);+function(n){"use strict";function t(i,r){this.$body=n(document.body);this.$scrollElement=n(i).is(document.body)?n(window):n(i);this.options=n.extend({},t.DEFAULTS,r);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",n.proxy(this.process,this));this.refresh();this.process()}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.scrollspy"),f=typeof i=="object"&&i;r||u.data("bs.scrollspy",r=new t(this,f));typeof i=="string"&&r[i]()})}t.VERSION="3.3.5";t.DEFAULTS={offset:10};t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};t.prototype.refresh=function(){var t=this,i="offset",r=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();n.isWindow(this.$scrollElement[0])||(i="position",r=this.$scrollElement.scrollTop());this.$body.find(this.selector).map(function(){var f=n(this),u=f.data("target")||f.attr("href"),t=/^#./.test(u)&&n(u);return t&&t.length&&t.is(":visible")&&[[t[i]().top+r,u]]||null}).sort(function(n,t){return n[0]-t[0]}).each(function(){t.offsets.push(this[0]);t.targets.push(this[1])})};t.prototype.process=function(){var i=this.$scrollElement.scrollTop()+this.options.offset,f=this.getScrollHeight(),e=this.options.offset+f-this.$scrollElement.height(),t=this.offsets,r=this.targets,u=this.activeTarget,n;if(this.scrollHeight!=f&&this.refresh(),i>=e)return u!=(n=r[r.length-1])&&this.activate(n);if(u&&i<t[0])return this.activeTarget=null,this.clear();for(n=t.length;n--;)u!=r[n]&&i>=t[n]&&(t[n+1]===undefined||i<t[n+1])&&this.activate(r[n])};t.prototype.activate=function(t){this.activeTarget=t;this.clear();var r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=n(r).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active"));i.trigger("activate.bs.scrollspy")};t.prototype.clear=function(){n(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=n.fn.scrollspy;n.fn.scrollspy=i;n.fn.scrollspy.Constructor=t;n.fn.scrollspy.noConflict=function(){return n.fn.scrollspy=r,this};n(window).on("load.bs.scrollspy.data-api",function(){n('[data-spy="scroll"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tab");r||u.data("bs.tab",r=new t(this));typeof i=="string"&&r[i]()})}var t=function(t){this.element=n(t)},u,i;t.VERSION="3.3.5";t.TRANSITION_DURATION=150;t.prototype.show=function(){var t=this.element,f=t.closest("ul:not(.dropdown-menu)"),i=t.data("target"),u;if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=f.find(".active:last a"),e=n.Event("hide.bs.tab",{relatedTarget:t[0]}),o=n.Event("show.bs.tab",{relatedTarget:r[0]});(r.trigger(e),t.trigger(o),o.isDefaultPrevented()||e.isDefaultPrevented())||(u=n(i),this.activate(t.closest("li"),f),this.activate(u,u.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]});t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})}))}};t.prototype.activate=function(i,r,u){function o(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1);i.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0);e?(i[0].offsetWidth,i.addClass("in")):i.removeClass("fade");i.parent(".dropdown-menu").length&&i.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0);u&&u()}var f=r.find("> .active"),e=u&&n.support.transition&&(f.length&&f.hasClass("fade")||!!r.find("> .fade").length);f.length&&e?f.one("bsTransitionEnd",o).emulateTransitionEnd(t.TRANSITION_DURATION):o();f.removeClass("in")};u=n.fn.tab;n.fn.tab=r;n.fn.tab.Constructor=t;n.fn.tab.noConflict=function(){return n.fn.tab=u,this};i=function(t){t.preventDefault();r.call(n(this),"show")};n(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.affix"),f=typeof i=="object"&&i;r||u.data("bs.affix",r=new t(this,f));typeof i=="string"&&r[i]()})}var t=function(i,r){this.options=n.extend({},t.DEFAULTS,r);this.$target=n(this.options.target).on("scroll.bs.affix.data-api",n.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",n.proxy(this.checkPositionWithEventLoop,this));this.$element=n(i);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()},r;t.VERSION="3.3.5";t.RESET="affix affix-top affix-bottom";t.DEFAULTS={offset:0,target:window};t.prototype.getState=function(n,t,i,r){var u=this.$target.scrollTop(),f=this.$element.offset(),e=this.$target.height();if(i!=null&&this.affixed=="top")return u<i?"top":!1;if(this.affixed=="bottom")return i!=null?u+this.unpin<=f.top?!1:"bottom":u+e<=n-r?!1:"bottom";var o=this.affixed==null,s=o?u:f.top,h=o?e:t;return i!=null&&u<=i?"top":r!=null&&s+h>=n-r?"bottom":!1};t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var n=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-n};t.prototype.checkPositionWithEventLoop=function(){setTimeout(n.proxy(this.checkPosition,this),1)};t.prototype.checkPosition=function(){var i,e,o;if(this.$element.is(":visible")){var s=this.$element.height(),r=this.options.offset,f=r.top,u=r.bottom,h=Math.max(n(document).height(),n(document.body).height());if(typeof r!="object"&&(u=f=r),typeof f=="function"&&(f=r.top(this.$element)),typeof u=="function"&&(u=r.bottom(this.$element)),i=this.getState(h,s,f,u),this.affixed!=i){if(this.unpin!=null&&this.$element.css("top",""),e="affix"+(i?"-"+i:""),o=n.Event(e+".bs.affix"),this.$element.trigger(o),o.isDefaultPrevented())return;this.affixed=i;this.unpin=i=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(t.RESET).addClass(e).trigger(e.replace("affix","affixed")+".bs.affix")}i=="bottom"&&this.$element.offset({top:h-s-u})}};r=n.fn.affix;n.fn.affix=i;n.fn.affix.Constructor=t;n.fn.affix.noConflict=function(){return n.fn.affix=r,this};n(window).on("load",function(){n('[data-spy="affix"]').each(function(){var r=n(this),t=r.data();t.offset=t.offset||{};t.offsetBottom!=null&&(t.offset.bottom=t.offsetBottom);t.offsetTop!=null&&(t.offset.top=t.offsetTop);i.call(r,t)})})}(jQuery),function(n){function t(n){this.init(n)}t.prototype={value:0,size:100,startAngle:-Math.PI,thickness:"auto",fill:{gradient:["#3aeabb","#fdd250"]},emptyFill:"rgba(0, 0, 0, .1)",animation:{duration:1200,easing:"circleProgressEasing"},animationStartValue:0,reverse:!1,lineCap:"butt",constructor:t,el:null,canvas:null,ctx:null,radius:0,arcFill:null,lastFrameValue:0,init:function(t){n.extend(this,t);this.radius=this.size/2;this.initWidget();this.initFill();this.draw()},initWidget:function(){var t=this.canvas=this.canvas||n("<canvas>").prependTo(this.el)[0];t.width=this.size;t.height=this.size;this.ctx=t.getContext("2d")},initFill:function(){function a(){var t=n("<canvas>")[0];t.width=r.size;t.height=r.size;t.getContext("2d").drawImage(e,0,0,u,u);r.arcFill=r.ctx.createPattern(t,"no-repeat");r.drawFrame(r.lastFrameValue)}var r=this,t=this.fill,c=this.ctx,u=this.size,i,o,f,h,e;if(!t)throw Error("The fill is not specified!");if(t.color&&(this.arcFill=t.color),t.gradient)if(i=t.gradient,i.length==1)this.arcFill=i[0];else if(i.length>1){var s=t.gradientAngle||0,v=t.gradientDirection||[u/2*(1-Math.cos(s)),u/2*(1+Math.sin(s)),u/2*(1+Math.cos(s)),u/2*(1-Math.sin(s))],l=c.createLinearGradient.apply(c,v);for(o=0;o<i.length;o++)f=i[o],h=o/(i.length-1),n.isArray(f)&&(h=f[1],f=f[0]),l.addColorStop(h,f);this.arcFill=l}t.image&&(t.image instanceof Image?e=t.image:(e=new Image,e.src=t.image),e.complete?a():e.onload=a)},draw:function(){this.animation?this.drawAnimated(this.value):this.drawFrame(this.value)},drawFrame:function(n){this.lastFrameValue=n;this.ctx.clearRect(0,0,this.size,this.size);this.drawEmptyArc(n);this.drawArc(n)},drawArc:function(n){var t=this.ctx,i=this.radius,u=this.getThickness(),r=this.startAngle;t.save();t.beginPath();this.reverse?t.arc(i,i,i-u/2,r-Math.PI*2*n,r):t.arc(i,i,i-u/2,r,r+Math.PI*2*n);t.lineWidth=u;t.lineCap=this.lineCap;t.strokeStyle=this.arcFill;t.stroke();t.restore()},drawEmptyArc:function(n){var t=this.ctx,i=this.radius,r=this.getThickness(),u=this.startAngle;n<1&&(t.save(),t.beginPath(),n<=0?t.arc(i,i,i-r/2,0,Math.PI*2):this.reverse?t.arc(i,i,i-r/2,u,u-Math.PI*2*n):t.arc(i,i,i-r/2,u+Math.PI*2*n,u),t.lineWidth=r,t.strokeStyle=this.emptyFill,t.stroke(),t.restore())},drawAnimated:function(t){var r=this,i=this.el,u=n(this.canvas);u.stop(!0,!1);i.trigger("circle-animation-start");u.css({animationProgress:0}).animate({animationProgress:1},n.extend({},this.animation,{step:function(n){var u=r.animationStartValue*(1-n)+t*n;r.drawFrame(u);i.trigger("circle-animation-progress",[n,u])}})).promise().always(function(){i.trigger("circle-animation-end")})},getThickness:function(){return n.isNumeric(this.thickness)?this.thickness:this.size/14},getValue:function(){return this.value},setValue:function(n){this.animation&&(this.animationStartValue=this.lastFrameValue);this.value=n;this.draw()}};n.circleProgress={defaults:t.prototype};n.easing.circleProgressEasing=function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t+i:r/2*((t-=2)*t*t+2)+i};n.fn.circleProgress=function(i,r){var u="circle-progress",f=this.data(u),e;if(i=="widget"){if(!f)throw Error('Calling "widget" method on not initialized instance is forbidden');return f.canvas}if(i=="value"){if(!f)throw Error('Calling "value" method on not initialized instance is forbidden');return typeof r=="undefined"?f.getValue():(e=arguments[1],this.each(function(){n(this).data(u).setValue(e)}))}return this.each(function(){var e=n(this),o=e.data(u),f=n.isPlainObject(i)?i:{},r;o?o.init(f):(r=n.extend({},e.data()),typeof r.fill=="string"&&(r.fill=JSON.parse(r.fill)),typeof r.animation=="string"&&(r.animation=JSON.parse(r.animation)),f=n.extend(r,f),f.el=e,o=new t(f),e.data(u,o))})}}(jQuery);
/*! Hammer.JS - v2.0.4 - 2014-09-28
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2014 Jorik Tangelder;
 * Licensed under the MIT license */
!function(n,t,i,r){"use strict";function si(n,t,i){return setTimeout(ci(n,i),t)}function tt(n,t,i){return Array.isArray(n)?(v(n,i[t],i),!0):!1}function v(n,t,i){var u;if(n)if(n.forEach)n.forEach(t,i);else if(n.length!==r)for(u=0;u<n.length;)t.call(i,n[u],u,n),u++;else for(u in n)n.hasOwnProperty(u)&&t.call(i,n[u],u,n)}function k(n,t,i){for(var f=Object.keys(t),u=0;u<f.length;)(!i||i&&n[f[u]]===r)&&(n[f[u]]=t[f[u]]),u++;return n}function hi(n,t){return k(n,t,!0)}function o(n,t,i){var r,u=t.prototype;r=n.prototype=Object.create(u);r.constructor=n;r._super=u;i&&k(r,i)}function ci(n,t){return function(){return n.apply(t,arguments)}}function li(n,t){return typeof n==pr?n.apply(t?t[0]||r:r,t):n}function ur(n,t){return n===r?t:n}function pt(n,t,i){v(bt(t),function(t){n.addEventListener(t,i,!1)})}function wt(n,t,i){v(bt(t),function(t){n.removeEventListener(t,i,!1)})}function fr(n,t){for(;n;){if(n==t)return!0;n=n.parentNode}return!1}function d(n,t){return n.indexOf(t)>-1}function bt(n){return n.trim().split(/\s+/g)}function it(n,t,i){if(n.indexOf&&!i)return n.indexOf(t);for(var r=0;r<n.length;){if(i&&n[r][i]==t||!i&&n[r]===t)return r;r++}return-1}function kt(n){return Array.prototype.slice.call(n,0)}function er(n,t,i){for(var f,u=[],e=[],r=0;r<n.length;)f=t?n[r][t]:n[r],it(e,f)<0&&u.push(n[r]),e[r]=f,r++;return i&&(u=t?u.sort(function(n,i){return n[t]>i[t]}):u.sort()),u}function dt(n,t){for(var i,u,e=t[0].toUpperCase()+t.slice(1),f=0;f<yr.length;){if(i=yr[f],u=i?i+e:t,u in n)return u;f++}return r}function ou(){return tf++}function or(n){var t=n.ownerDocument;return t.defaultView||t.parentWindow}function s(n,t){var i=this;this.manager=n;this.callback=t;this.element=n.element;this.target=n.options.inputTarget;this.domHandler=function(t){li(n.options.enable,[n])&&i.handler(t)};this.init()}function su(n){var i,t=n.options.inputClass;return new(i=t?t:rf?vi:uf?ti:wr?yi:ni)(n,hu)}function hu(n,t,i){var r=i.pointers.length,o=i.changedPointers.length,s=t&f&&r-o==0,h=t&(u|e)&&r-o==0;i.isFirst=!!s;i.isFinal=!!h;s&&(n.session={});i.eventType=t;cu(n,i);n.emit("hammer.input",i);n.recognize(i);n.session.prevInput=i}function cu(n,t){var i=n.session,u=t.pointers,e=u.length,f;i.firstInput||(i.firstInput=sr(t));e>1&&!i.firstMultiple?i.firstMultiple=sr(t):1===e&&(i.firstMultiple=!1);var o=i.firstInput,r=i.firstMultiple,s=r?r.center:o.center,h=t.center=hr(u);t.timeStamp=nr();t.deltaTime=t.timeStamp-o.timeStamp;t.angle=ai(s,h);t.distance=gt(s,h);lu(i,t);t.offsetDirection=cr(t.deltaX,t.deltaY);t.scale=r?pu(r.pointers,u):1;t.rotation=r?yu(r.pointers,u):0;au(i,t);f=n.element;fr(t.srcEvent.target,f)&&(f=t.srcEvent.target);t.target=f}function lu(n,t){var i=t.center,r=n.offsetDelta||{},e=n.prevDelta||{},o=n.prevInput||{};(t.eventType===f||o.eventType===u)&&(e=n.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=n.offsetDelta={x:i.x,y:i.y});t.deltaX=e.x+(i.x-r.x);t.deltaY=e.y+(i.y-r.y)}function au(n,t){var f,o,s,h,i=n.lastInterval||t,c=t.timeStamp-i.timeStamp;if(t.eventType!=e&&(c>ff||i.velocity===r)){var l=i.deltaX-t.deltaX,a=i.deltaY-t.deltaY,u=vu(c,l,a);o=u.x;s=u.y;f=ft(u.x)>ft(u.y)?u.x:u.y;h=cr(l,a);n.lastInterval=t}else f=i.velocity,o=i.velocityX,s=i.velocityY,h=i.direction;t.velocity=f;t.velocityX=o;t.velocityY=s;t.direction=h}function sr(n){for(var i=[],t=0;t<n.pointers.length;)i[t]={clientX:rt(n.pointers[t].clientX),clientY:rt(n.pointers[t].clientY)},t++;return{timeStamp:nr(),pointers:i,center:hr(i),deltaX:n.deltaX,deltaY:n.deltaY}}function hr(n){var t=n.length;if(1===t)return{x:rt(n[0].clientX),y:rt(n[0].clientY)};for(var r=0,u=0,i=0;t>i;)r+=n[i].clientX,u+=n[i].clientY,i++;return{x:rt(r/t),y:rt(u/t)}}function vu(n,t,i){return{x:t/n||0,y:i/n||0}}function cr(n,t){return n===t?fi:ft(n)>=ft(t)?n>0?ot:st:t>0?ht:ct}function gt(n,t,i){i||(i=kr);var r=t[i[0]]-n[i[0]],u=t[i[1]]-n[i[1]];return Math.sqrt(r*r+u*u)}function ai(n,t,i){i||(i=kr);var r=t[i[0]]-n[i[0]],u=t[i[1]]-n[i[1]];return 180*Math.atan2(u,r)/Math.PI}function yu(n,t){return ai(t[1],t[0],ei)-ai(n[1],n[0],ei)}function pu(n,t){return gt(t[0],t[1],ei)/gt(n[0],n[1],ei)}function ni(){this.evEl=of;this.evWin=sf;this.allow=!0;this.pressed=!1;s.apply(this,arguments)}function vi(){this.evEl=dr;this.evWin=gr;s.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function lr(){this.evTarget=af;this.evWin=vf;this.started=!1;s.apply(this,arguments)}function wu(n,t){var i=kt(n.touches),r=kt(n.changedTouches);return t&(u|e)&&(i=er(i.concat(r),"identifier",!0)),[i,r]}function ti(){this.evTarget=tu;this.targetIds={};s.apply(this,arguments)}function bu(n,t){var r=kt(n.touches),o=this.targetIds;if(t&(f|g)&&1===r.length)return o[r[0].identifier]=!0,[r,r];var i,s,h=kt(n.changedTouches),c=[],l=this.target;if(s=r.filter(function(n){return fr(n.target,l)}),t===f)for(i=0;i<s.length;)o[s[i].identifier]=!0,i++;for(i=0;i<h.length;)o[h[i].identifier]&&c.push(h[i]),t&(u|e)&&delete o[h[i].identifier],i++;if(c.length)return[er(s.concat(c),"identifier",!0),c]}function yi(){s.apply(this,arguments);var n=ci(this.handler,this);this.touch=new ti(this.manager,n);this.mouse=new ni(this.manager,n)}function pi(n,t){this.manager=n;this.set(t)}function ku(n){if(d(n,lt))return lt;var t=d(n,at),i=d(n,vt);return t&&i?at+" "+vt:t||i?t?at:vt:d(n,ir)?ir:fu}function y(n){this.id=ou();this.manager=null;this.options=hi(n||{},this.defaults);this.options.enable=ur(this.options.enable,!0);this.state=oi;this.simultaneous={};this.requireFail=[]}function du(n){return n&yt?"cancel":n&b?"end":n&ut?"move":n&h?"start":""}function ar(n){return n==ct?"down":n==ht?"up":n==ot?"left":n==st?"right":""}function ii(n,t){var i=t.manager;return i?i.get(n):n}function c(){y.apply(this,arguments)}function ri(){c.apply(this,arguments);this.pX=null;this.pY=null}function wi(){c.apply(this,arguments)}function bi(){y.apply(this,arguments);this._timer=null;this._input=null}function ki(){c.apply(this,arguments)}function di(){c.apply(this,arguments)}function ui(){y.apply(this,arguments);this.pTime=!1;this.pCenter=!1;this._timer=null;this._input=null;this.count=0}function w(n,t){return t=t||{},t.recognizers=ur(t.recognizers,w.defaults.preset),new gi(n,t)}function gi(n,t){t=t||{};this.options=hi(t,w.defaults);this.options.inputTarget=this.options.inputTarget||n;this.handlers={};this.session={};this.recognizers=[];this.element=n;this.input=su(this);this.touchAction=new pi(this,this.options.touchAction);vr(this,!0);v(t.recognizers,function(n){var t=this.add(new n[0](n[1]));n[2]&&t.recognizeWith(n[2]);n[3]&&t.requireFailure(n[3])},this)}function vr(n,t){var i=n.element;v(n.options.cssProps,function(n,r){i.style[dt(i.style,r)]=t?n:""})}function gu(n,i){var r=t.createEvent("Event");r.initEvent(n,!0,!0);r.gesture=i;i.target.dispatchEvent(r)}var yr=["","webkit","moz","MS","ms","o"],nf=t.createElement("div"),pr="function",rt=Math.round,ft=Math.abs,nr=Date.now,tf=1,wr="ontouchstart"in n,rf=dt(n,"PointerEvent")!==r,uf=wr&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),et="touch",tr="mouse",ff=25,f=1,g=2,u=4,e=8,fi=1,ot=2,st=4,ht=8,ct=16,l=ot|st,nt=ht|ct,br=l|nt,kr=["x","y"],ei=["clientX","clientY"],nu,tu,eu,rr;s.prototype={handler:function(){},init:function(){this.evEl&&pt(this.element,this.evEl,this.domHandler);this.evTarget&&pt(this.target,this.evTarget,this.domHandler);this.evWin&&pt(or(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&wt(this.element,this.evEl,this.domHandler);this.evTarget&&wt(this.target,this.evTarget,this.domHandler);this.evWin&&wt(or(this.element),this.evWin,this.domHandler)}};var ef={mousedown:f,mousemove:g,mouseup:u},of="mousedown",sf="mousemove mouseup";o(ni,s,{handler:function(n){var t=ef[n.type];t&f&&0===n.button&&(this.pressed=!0);t&g&&1!==n.which&&(t=u);this.pressed&&this.allow&&(t&u&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[n],changedPointers:[n],pointerType:tr,srcEvent:n}))}});var hf={pointerdown:f,pointermove:g,pointerup:u,pointercancel:e,pointerout:e},cf={2:et,3:"pen",4:tr,5:"kinect"},dr="pointerdown",gr="pointermove pointerup pointercancel";n.MSPointerEvent&&(dr="MSPointerDown",gr="MSPointerMove MSPointerUp MSPointerCancel");o(vi,s,{handler:function(n){var t=this.store,o=!1,h=n.type.toLowerCase().replace("ms",""),r=hf[h],s=cf[n.pointerType]||n.pointerType,c=s==et,i=it(t,n.pointerId,"pointerId");r&f&&(0===n.button||c)?0>i&&(t.push(n),i=t.length-1):r&(u|e)&&(o=!0);0>i||(t[i]=n,this.callback(this.manager,r,{pointers:t,changedPointers:[n],pointerType:s,srcEvent:n}),o&&t.splice(i,1))}});var lf={touchstart:f,touchmove:g,touchend:u,touchcancel:e},af="touchstart",vf="touchstart touchmove touchend touchcancel";o(lr,s,{handler:function(n){var i=lf[n.type],t;(i===f&&(this.started=!0),this.started)&&(t=wu.call(this,n,i),i&(u|e)&&t[0].length-t[1].length==0&&(this.started=!1),this.callback(this.manager,i,{pointers:t[0],changedPointers:t[1],pointerType:et,srcEvent:n}))}});nu={touchstart:f,touchmove:g,touchend:u,touchcancel:e};tu="touchstart touchmove touchend touchcancel";o(ti,s,{handler:function(n){var i=nu[n.type],t=bu.call(this,n,i);t&&this.callback(this.manager,i,{pointers:t[0],changedPointers:t[1],pointerType:et,srcEvent:n})}});o(yi,s,{handler:function(n,t,i){var r=i.pointerType==et,f=i.pointerType==tr;if(r)this.mouse.allow=!1;else if(f&&!this.mouse.allow)return;t&(u|e)&&(this.mouse.allow=!0);this.callback(n,t,i)},destroy:function(){this.touch.destroy();this.mouse.destroy()}});var iu=dt(nf.style,"touchAction"),ru=iu!==r,uu="compute",fu="auto",ir="manipulation",lt="none",at="pan-x",vt="pan-y";pi.prototype={set:function(n){n==uu&&(n=this.compute());ru&&(this.manager.element.style[iu]=n);this.actions=n.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var n=[];return v(this.manager.recognizers,function(t){li(t.options.enable,[t])&&(n=n.concat(t.getTouchAction()))}),ku(n.join(" "))},preventDefaults:function(n){var t,i;if(!ru){if(t=n.srcEvent,i=n.offsetDirection,this.manager.session.prevented)return void t.preventDefault();var r=this.actions,u=d(r,lt),f=d(r,vt),e=d(r,at);return u||f&&i&l||e&&i&nt?this.preventSrc(t):void 0}},preventSrc:function(n){this.manager.session.prevented=!0;n.preventDefault()}};var oi=1,h=2,ut=4,b=8,p=b,yt=16,a=32;y.prototype={defaults:{},set:function(n){return k(this.options,n),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(n){if(tt(n,"recognizeWith",this))return this;var t=this.simultaneous;return n=ii(n,this),t[n.id]||(t[n.id]=n,n.recognizeWith(this)),this},dropRecognizeWith:function(n){return tt(n,"dropRecognizeWith",this)?this:(n=ii(n,this),delete this.simultaneous[n.id],this)},requireFailure:function(n){if(tt(n,"requireFailure",this))return this;var t=this.requireFail;return n=ii(n,this),-1===it(t,n)&&(t.push(n),n.requireFailure(this)),this},dropRequireFailure:function(n){if(tt(n,"dropRequireFailure",this))return this;n=ii(n,this);var t=it(this.requireFail,n);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(n){return!!this.simultaneous[n.id]},emit:function(n){function t(t){r.manager.emit(r.options.event+(t?du(i):""),n)}var r=this,i=this.state;b>i&&t(!0);t();i>=b&&t(!0)},tryEmit:function(n){return this.canEmit()?this.emit(n):void(this.state=a)},canEmit:function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(a|oi)))return!1;n++}return!0},recognize:function(n){var t=k({},n);return li(this.options.enable,[this,t])?(this.state&(p|yt|a)&&(this.state=oi),this.state=this.process(t),void(this.state&(h|ut|b|yt)&&this.tryEmit(t))):(this.reset(),void(this.state=a))},process:function(){},getTouchAction:function(){},reset:function(){}};o(c,y,{defaults:{pointers:1},attrTest:function(n){var t=this.options.pointers;return 0===t||n.pointers.length===t},process:function(n){var t=this.state,i=n.eventType,r=t&(h|ut),f=this.attrTest(n);return r&&(i&e||!f)?t|yt:r||f?i&u?t|b:t&h?t|ut:h:a}});o(ri,c,{defaults:{event:"pan",threshold:10,pointers:1,direction:br},getTouchAction:function(){var t=this.options.direction,n=[];return t&l&&n.push(vt),t&nt&&n.push(at),n},directionTest:function(n){var i=this.options,r=!0,u=n.distance,t=n.direction,f=n.deltaX,e=n.deltaY;return t&i.direction||(i.direction&l?(t=0===f?fi:0>f?ot:st,r=f!=this.pX,u=Math.abs(n.deltaX)):(t=0===e?fi:0>e?ht:ct,r=e!=this.pY,u=Math.abs(n.deltaY))),n.direction=t,r&&u>i.threshold&&t&i.direction},attrTest:function(n){return c.prototype.attrTest.call(this,n)&&(this.state&h||!(this.state&h)&&this.directionTest(n))},emit:function(n){this.pX=n.deltaX;this.pY=n.deltaY;var t=ar(n.direction);t&&this.manager.emit(this.options.event+t,n);this._super.emit.call(this,n)}});o(wi,c,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[lt]},attrTest:function(n){return this._super.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||this.state&h)},emit:function(n){if(this._super.emit.call(this,n),1!==n.scale){var t=n.scale<1?"in":"out";this.manager.emit(this.options.event+t,n)}}});o(bi,y,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[fu]},process:function(n){var t=this.options,i=n.pointers.length===t.pointers,r=n.distance<t.threshold,o=n.deltaTime>t.time;if(this._input=n,!r||!i||n.eventType&(u|e)&&!o)this.reset();else if(n.eventType&f)this.reset(),this._timer=si(function(){this.state=p;this.tryEmit()},t.time,this);else if(n.eventType&u)return p;return a},reset:function(){clearTimeout(this._timer)},emit:function(n){this.state===p&&(n&&n.eventType&u?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=nr(),this.manager.emit(this.options.event,this._input)))}});o(ki,c,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[lt]},attrTest:function(n){return this._super.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||this.state&h)}});o(di,c,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:l|nt,pointers:1},getTouchAction:function(){return ri.prototype.getTouchAction.call(this)},attrTest:function(n){var t,i=this.options.direction;return i&(l|nt)?t=n.velocity:i&l?t=n.velocityX:i&nt&&(t=n.velocityY),this._super.attrTest.call(this,n)&&i&n.direction&&n.distance>this.options.threshold&&ft(t)>this.options.velocity&&n.eventType&u},emit:function(n){var t=ar(n.direction);t&&this.manager.emit(this.options.event+t,n);this.manager.emit(this.options.event,n)}});o(ui,y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ir]},process:function(n){var t=this.options,o=n.pointers.length===t.pointers,s=n.distance<t.threshold,c=n.deltaTime<t.time,i,r,e;if(this.reset(),n.eventType&f&&0===this.count)return this.failTimeout();if(s&&c&&o){if(n.eventType!=u)return this.failTimeout();if(i=this.pTime?n.timeStamp-this.pTime<t.interval:!0,r=!this.pCenter||gt(this.pCenter,n.center)<t.posThreshold,this.pTime=n.timeStamp,this.pCenter=n.center,r&&i?this.count+=1:this.count=1,this._input=n,e=this.count%t.taps,0===e)return this.hasRequireFailures()?(this._timer=si(function(){this.state=p;this.tryEmit()},t.interval,this),h):p}return a},failTimeout:function(){return this._timer=si(function(){this.state=a},this.options.interval,this),a},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==p&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});w.VERSION="2.0.4";w.defaults={domEvents:!1,touchAction:uu,enable:!0,inputTarget:null,inputClass:null,preset:[[ki,{enable:!1}],[wi,{enable:!1},["rotate"]],[di,{direction:l}],[ri,{direction:l},["swipe"]],[ui],[ui,{event:"doubletap",taps:2},["tap"]],[bi]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};eu=1;rr=2;gi.prototype={set:function(n){return k(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},stop:function(n){this.session.stopped=n?rr:eu},recognize:function(n){var r=this.session,i,f,t,u;if(!r.stopped)for(this.touchAction.preventDefaults(n),f=this.recognizers,t=r.curRecognizer,(!t||t&&t.state&p)&&(t=r.curRecognizer=null),u=0;u<f.length;)i=f[u],r.stopped===rr||t&&i!=t&&!i.canRecognizeWith(t)?i.reset():i.recognize(n),!t&&i.state&(h|ut|b)&&(t=r.curRecognizer=i),u++},get:function(n){if(n instanceof y)return n;for(var i=this.recognizers,t=0;t<i.length;t++)if(i[t].options.event==n)return i[t];return null},add:function(n){if(tt(n,"add",this))return this;var t=this.get(n.options.event);return t&&this.remove(t),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},remove:function(n){if(tt(n,"remove",this))return this;var t=this.recognizers;return n=this.get(n),t.splice(it(t,n),1),this.touchAction.update(),this},on:function(n,t){var i=this.handlers;return v(bt(n),function(n){i[n]=i[n]||[];i[n].push(t)}),this},off:function(n,t){var i=this.handlers;return v(bt(n),function(n){t?i[n].splice(it(i[n],t),1):delete i[n]}),this},emit:function(n,t){var i,r;if(this.options.domEvents&&gu(n,t),i=this.handlers[n]&&this.handlers[n].slice(),i&&i.length)for(t.type=n,t.preventDefault=function(){t.srcEvent.preventDefault()},r=0;r<i.length;)i[r](t),r++},destroy:function(){this.element&&vr(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};k(w,{INPUT_START:f,INPUT_MOVE:g,INPUT_END:u,INPUT_CANCEL:e,STATE_POSSIBLE:oi,STATE_BEGAN:h,STATE_CHANGED:ut,STATE_ENDED:b,STATE_RECOGNIZED:p,STATE_CANCELLED:yt,STATE_FAILED:a,DIRECTION_NONE:fi,DIRECTION_LEFT:ot,DIRECTION_RIGHT:st,DIRECTION_UP:ht,DIRECTION_DOWN:ct,DIRECTION_HORIZONTAL:l,DIRECTION_VERTICAL:nt,DIRECTION_ALL:br,Manager:gi,Input:s,TouchAction:pi,TouchInput:ti,MouseInput:ni,PointerEventInput:vi,TouchMouseInput:yi,SingleTouchInput:lr,Recognizer:y,AttrRecognizer:c,Tap:ui,Pan:ri,Swipe:di,Pinch:wi,Rotate:ki,Press:bi,on:pt,off:wt,each:v,merge:hi,extend:k,inherit:o,bindFn:ci,prefixed:dt});typeof define==pr&&define.amd?define(function(){return w}):"undefined"!=typeof module&&module.exports?module.exports=w:n[i]=w}(window,document,"Hammer");
/*! CoverflowJS - v3.0.1 - 2014-03-06
* Copyright (c) 2014 Paul Baukus, Addy Osmani, Sebastian Sauer, Brandon Belvin, April Barrett; Licensed MIT */
/*! jQuery UI - v1.10.4 - 2014-01-17
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.effect.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
(function(n,t){function i(t,i){var u,f,e,o=t.nodeName.toLowerCase();return"area"===o?(u=t.parentNode,f=u.name,!t.href||!f||u.nodeName.toLowerCase()!=="map")?!1:(e=n("img[usemap=#"+f+"]")[0],!!e&&r(e)):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&r(t)}function r(t){return n.expr.filters.visible(t)&&!n(t).parents().addBack().filter(function(){return n.css(this,"visibility")==="hidden"}).length}var u=0,f=/^ui-id-\d+$/;n.ui=n.ui||{};n.extend(n.ui,{version:"@VERSION",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});n.fn.extend({focus:function(t){return function(i,r){return typeof i=="number"?this.each(function(){var t=this;setTimeout(function(){n(t).focus();r&&r.call(t)},i)}):t.apply(this,arguments)}}(n.fn.focus),scrollParent:function(){var t;return t=n.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(n.css(this,"position"))&&/(auto|scroll)/.test(n.css(this,"overflow")+n.css(this,"overflow-y")+n.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(n.css(this,"overflow")+n.css(this,"overflow-y")+n.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?n(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var r=n(this[0]),u,f;r.length&&r[0]!==document;){if(u=r.css("position"),(u==="absolute"||u==="relative"||u==="fixed")&&(f=parseInt(r.css("zIndex"),10),!isNaN(f)&&f!==0))return f;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++u)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&n(this).removeAttr("id")})}});n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(i){return!!n.data(i,t)}}):function(t,i,r){return!!n.data(t,r[3])},focusable:function(t){return i(t,!isNaN(n.attr(t,"tabindex")))},tabbable:function(t){var r=n.attr(t,"tabindex"),u=isNaN(r);return(u||r>=0)&&i(t,!u)}});n("<a>").outerWidth(1).jquery||n.each(["Width","Height"],function(i,r){function e(t,i,r,u){return n.each(o,function(){i-=parseFloat(n.css(t,"padding"+this))||0;r&&(i-=parseFloat(n.css(t,"border"+this+"Width"))||0);u&&(i-=parseFloat(n.css(t,"margin"+this))||0)}),i}var o=r==="Width"?["Left","Right"]:["Top","Bottom"],u=r.toLowerCase(),f={innerWidth:n.fn.innerWidth,innerHeight:n.fn.innerHeight,outerWidth:n.fn.outerWidth,outerHeight:n.fn.outerHeight};n.fn["inner"+r]=function(i){return i===t?f["inner"+r].call(this):this.each(function(){n(this).css(u,e(this,i)+"px")})};n.fn["outer"+r]=function(t,i){return typeof t!="number"?f["outer"+r].call(this,t):this.each(function(){n(this).css(u,e(this,t,!0,i)+"px")})}});n.fn.addBack||(n.fn.addBack=function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))});n("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(n.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,n.camelCase(i)):t.call(this)}}(n.fn.removeData));n.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());n.support.selectstart="onselectstart"in document.createElement("div");n.fn.extend({disableSelection:function(){return this.bind((n.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(n){n.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});n.extend(n.ui,{plugin:{add:function(t,i,r){var u,f=n.ui[t].prototype;for(u in r)f.plugins[u]=f.plugins[u]||[],f.plugins[u].push([i,r[u]])},call:function(n,t,i){var r,u=n.plugins[t];if(u&&n.element[0].parentNode&&n.element[0].parentNode.nodeType!==11)for(r=0;r<u.length;r++)n.options[u[r][0]]&&u[r][1].apply(n.element,i)}},hasScroll:function(t,i){if(n(t).css("overflow")==="hidden")return!1;var r=i&&i==="left"?"scrollLeft":"scrollTop",u=!1;return t[r]>0?!0:(t[r]=1,u=t[r]>0,t[r]=0,u)}})})(jQuery),function(n,t){var r=0,i=Array.prototype.slice,u=n.cleanData;n.cleanData=function(t){for(var i=0,r;(r=t[i])!=null;i++)try{n(r).triggerHandler("remove")}catch(f){}u(t)};n.widget=function(t,i,r){var s,f,u,o,h={},e=t.split(".")[0];t=t.split(".")[1];s=e+"-"+t;r||(r=i,i=n.Widget);n.expr[":"][s.toLowerCase()]=function(t){return!!n.data(t,s)};n[e]=n[e]||{};f=n[e][t];u=n[e][t]=function(n,t){if(!this._createWidget)return new u(n,t);arguments.length&&this._createWidget(n,t)};n.extend(u,f,{version:r.version,_proto:n.extend({},r),_childConstructors:[]});o=new i;o.options=n.widget.extend({},o.options);n.each(r,function(t,r){if(!n.isFunction(r)){h[t]=r;return}h[t]=function(){var n=function(){return i.prototype[t].apply(this,arguments)},u=function(n){return i.prototype[t].apply(this,n)};return function(){var i=this._super,f=this._superApply,t;return this._super=n,this._superApply=u,t=r.apply(this,arguments),this._super=i,this._superApply=f,t}}()});u.prototype=n.widget.extend(o,{widgetEventPrefix:f?o.widgetEventPrefix||t:t},h,{constructor:u,namespace:e,widgetName:t,widgetFullName:s});f?(n.each(f._childConstructors,function(t,i){var r=i.prototype;n.widget(r.namespace+"."+r.widgetName,u,i._proto)}),delete f._childConstructors):i._childConstructors.push(u);n.widget.bridge(t,u)};n.widget.extend=function(r){for(var o=i.call(arguments,1),e=0,s=o.length,u,f;e<s;e++)for(u in o[e])f=o[e][u],o[e].hasOwnProperty(u)&&f!==t&&(r[u]=n.isPlainObject(f)?n.isPlainObject(r[u])?n.widget.extend({},r[u],f):n.widget.extend({},f):f);return r};n.widget.bridge=function(r,u){var f=u.prototype.widgetFullName||r;n.fn[r]=function(e){var h=typeof e=="string",o=i.call(arguments,1),s=this;return e=!h&&o.length?n.widget.extend.apply(null,[e].concat(o)):e,h?this.each(function(){var i,u=n.data(this,f);return u?!n.isFunction(u[e])||e.charAt(0)==="_"?n.error("no such method '"+e+"' for "+r+" widget instance"):(i=u[e].apply(u,o),i!==u&&i!==t?(s=i&&i.jquery?s.pushStack(i.get()):i,!1):void 0):n.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+e+"'")}):this.each(function(){var t=n.data(this,f);t?t.option(e||{})._init():n.data(this,f,new u(e,this))}),s}};n.Widget=function(){};n.Widget._childConstructors=[];n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=n(i||this.defaultElement||this)[0];this.element=n(i);this.uuid=r++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=n.widget.extend({},this.options,this._getCreateOptions(),t);this.bindings=n();this.hoverable=n();this.focusable=n();i!==this&&(n.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(n){n.target===i&&this.destroy()}}),this.document=n(i.style?i.ownerDocument:i.document||i),this.window=n(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:n.noop,_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(n.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:n.noop,widget:function(){return this.element},option:function(i,r){var o=i,u,f,e;if(arguments.length===0)return n.widget.extend({},this.options);if(typeof i=="string")if(o={},u=i.split("."),i=u.shift(),u.length){for(f=o[i]=n.widget.extend({},this.options[i]),e=0;e<u.length-1;e++)f[u[e]]=f[u[e]]||{},f=f[u[e]];if(i=u.pop(),arguments.length===1)return f[i]===t?null:f[i];f[i]=r}else{if(arguments.length===1)return this.options[i]===t?null:this.options[i];o[i]=r}return this._setOptions(o),this},_setOptions:function(n){for(var t in n)this._setOption(t,n[t]);return this},_setOption:function(n,t){return this.options[n]=t,n==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,r){var f,u=this;typeof t!="boolean"&&(r=i,i=t,t=!1);r?(i=f=n(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,f=this.widget());n.each(r,function(r,e){function o(){if(t||u.options.disabled!==!0&&!n(this).hasClass("ui-state-disabled"))return(typeof e=="string"?u[e]:e).apply(u,arguments)}typeof e!="string"&&(o.guid=e.guid=e.guid||o.guid||n.guid++);var s=r.match(/^(\w+)\s*(.*)$/),h=s[1]+u.eventNamespace,c=s[2];c?f.delegate(c,h,o):i.bind(h,o)})},_off:function(n,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;n.unbind(t).undelegate(t)},_delay:function(n,t){function r(){return(typeof n=="string"?i[n]:n).apply(i,arguments)}var i=this;return setTimeout(r,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){n(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){n(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){n(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){n(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,r){var u,f,e=this.options[t];if(r=r||{},i=n.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],f=i.originalEvent,f)for(u in f)u in i||(i[u]=f[u]);return this.element.trigger(i,r),!(n.isFunction(e)&&e.apply(this.element[0],[i].concat(r))===!1||i.isDefaultPrevented())}};n.each({show:"fadeIn",hide:"fadeOut"},function(t,i){n.Widget.prototype["_"+t]=function(r,u,f){typeof u=="string"&&(u={effect:u});var o,e=u?u===!0||typeof u=="number"?i:u.effect||i:t;u=u||{};typeof u=="number"&&(u={duration:u});o=!n.isEmptyObject(u);u.complete=f;u.delay&&r.delay(u.delay);o&&n.effects&&n.effects.effect[e]?r[t](u):e!==t&&r[e]?r[e](u.duration,u.easing,f):r.queue(function(i){n(this)[t]();f&&f.call(r[0]);i()})}})}(jQuery),function(n,t){var i="ui-effects-";n.effects={effect:{}};
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
(function(n,t){function e(n,t,i){var r=s[t.type]||{};return n==null?i||!t.def?null:t.def:(n=r.floor?~~n:parseFloat(n),isNaN(n))?t.def:r.mod?(n+r.mod)%r.mod:0>n?0:r.max<n?r.max:n}function l(t){var e=i(),o=e._rgba=[];return(t=t.toLowerCase(),r(v,function(n,i){var r,s=i.re.exec(t),h=s&&i.parse(s),f=i.space||"rgba";if(h)return r=e[f](h),e[u[f].cache]=r[u[f].cache],o=e._rgba=r._rgba,!1}),o.length)?(o.join()==="0,0,0,0"&&n.extend(o,f.transparent),e):f[t]}function o(n,t,i){return(i=(i+1)%1,i*6<1)?n+(t-n)*i*6:i*2<1?t:i*3<2?n+(t-n)*(2/3-i)*6:n}var a=/^([\-+])=\s*(\d+\.?\d*)/,v=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1],n[2],n[3],n[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1]*2.55,n[2]*2.55,n[3]*2.55,n[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(n){return[n[1],n[2]/100,n[3]/100,n[4]]}}],i=n.Color=function(t,i,r,u){return new n.Color.fn.parse(t,i,r,u)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},s={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=i.support={},c=n("<p>")[0],f,r=n.each;c.style.cssText="background-color:rgba(1,1,1,.5)";h.rgba=c.style.backgroundColor.indexOf("rgba")>-1;r(u,function(n,t){t.cache="_"+n;t.props.alpha={idx:3,type:"percent",def:1}});i.fn=n.extend(i.prototype,{parse:function(o,s,h,c){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=n(o).css(s),s=t);var a=this,v=n.type(o),y=this._rgba=[];return(s!==t&&(o=[o,s,h,c],v="array"),v==="string")?this.parse(l(o)||f._default):v==="array"?(r(u.rgba.props,function(n,t){y[t.idx]=e(o[t.idx],t)}),this):v==="object"?(o instanceof i?r(u,function(n,t){o[t.cache]&&(a[t.cache]=o[t.cache].slice())}):r(u,function(t,i){var u=i.cache;r(i.props,function(n,t){if(!a[u]&&i.to){if(n==="alpha"||o[n]==null)return;a[u]=i.to(a._rgba)}a[u][t.idx]=e(o[n],t,!0)});a[u]&&n.inArray(null,a[u].slice(0,3))<0&&(a[u][3]=1,i.from&&(a._rgba=i.from(a[u])))}),this):void 0},is:function(n){var e=i(n),t=!0,f=this;return r(u,function(n,i){var o,u=e[i.cache];return u&&(o=f[i.cache]||i.to&&i.to(f._rgba)||[],r(i.props,function(n,i){if(u[i.idx]!=null)return t=u[i.idx]===o[i.idx]})),t}),t},_space:function(){var n=[],t=this;return r(u,function(i,r){t[r.cache]&&n.push(i)}),n.pop()},transition:function(n,t){var f=i(n),c=f._space(),o=u[c],l=this.alpha()===0?i("transparent"):this,a=l[o.cache]||o.to(l._rgba),h=a.slice();return f=f[o.cache],r(o.props,function(n,i){var c=i.idx,r=a[c],u=f[c],o=s[i.type]||{};u!==null&&(r===null?h[c]=u:(o.mod&&(u-r>o.mod/2?r+=o.mod:r-u>o.mod/2&&(r-=o.mod)),h[c]=e((u-r)*t+r,i)))}),this[c](h)},blend:function(t){if(this._rgba[3]===1)return this;var r=this._rgba.slice(),u=r.pop(),f=i(t)._rgba;return i(n.map(r,function(n,t){return(1-u)*f[t]+u*n}))},toRgbaString:function(){var i="rgba(",t=n.map(this._rgba,function(n,t){return n==null?t>2?1:0:n});return t[3]===1&&(t.pop(),i="rgb("),i+t.join()+")"},toHslaString:function(){var i="hsla(",t=n.map(this.hsla(),function(n,t){return n==null&&(n=t>2?1:0),t&&t<3&&(n=Math.round(n*100)+"%"),n});return t[3]===1&&(t.pop(),i="hsl("),i+t.join()+")"},toHexString:function(t){var i=this._rgba.slice(),r=i.pop();return t&&i.push(~~(r*255)),"#"+n.map(i,function(n){return n=(n||0).toString(16),n.length===1?"0"+n:n}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});i.fn.parse.prototype=i.fn;u.hsla.to=function(n){if(n[0]==null||n[1]==null||n[2]==null)return[null,null,null,n[3]];var i=n[0]/255,r=n[1]/255,f=n[2]/255,s=n[3],u=Math.max(i,r,f),e=Math.min(i,r,f),t=u-e,o=u+e,h=o*.5,c,l;return c=e===u?0:i===u?60*(r-f)/t+360:r===u?60*(f-i)/t+120:60*(i-r)/t+240,l=t===0?0:h<=.5?t/o:t/(2-o),[Math.round(c)%360,l,h,s==null?1:s]};u.hsla.from=function(n){if(n[0]==null||n[1]==null||n[2]==null)return[null,null,null,n[3]];var r=n[0]/360,u=n[1],t=n[2],e=n[3],i=t<=.5?t*(1+u):t+u-t*u,f=2*t-i;return[Math.round(o(f,i,r+1/3)*255),Math.round(o(f,i,r)*255),Math.round(o(f,i,r-1/3)*255),e]};r(u,function(u,f){var s=f.props,o=f.cache,h=f.to,c=f.from;i.fn[u]=function(u){if(h&&!this[o]&&(this[o]=h(this._rgba)),u===t)return this[o].slice();var l,a=n.type(u),v=a==="array"||a==="object"?u:arguments,f=this[o].slice();return r(s,function(n,t){var i=v[a==="object"?n:t.idx];i==null&&(i=f[t.idx]);f[t.idx]=e(i,t)}),c?(l=i(c(f)),l[o]=f,l):i(f)};r(s,function(t,r){i.fn[t]||(i.fn[t]=function(i){var f=n.type(i),h=t==="alpha"?this._hsla?"hsla":"rgba":u,o=this[h](),s=o[r.idx],e;return f==="undefined"?s:(f==="function"&&(i=i.call(this,s),f=n.type(i)),i==null&&r.empty)?this:(f==="string"&&(e=a.exec(i),e&&(i=s+parseFloat(e[2])*(e[1]==="+"?1:-1))),o[r.idx]=i,this[h](o))})})});i.hook=function(t){var u=t.split(" ");r(u,function(t,r){n.cssHooks[r]={set:function(t,u){var o,f,e="";if(u!=="transparent"&&(n.type(u)!=="string"||(o=l(u)))){if(u=i(o||u),!h.rgba&&u._rgba[3]!==1){for(f=r==="backgroundColor"?t.parentNode:t;(e===""||e==="transparent")&&f&&f.style;)try{e=n.css(f,"backgroundColor");f=f.parentNode}catch(s){}u=u.blend(e&&e!=="transparent"?e:"_default")}u=u.toRgbaString()}try{t.style[r]=u}catch(s){}}};n.fx.step[r]=function(t){t.colorInit||(t.start=i(t.elem,r),t.end=i(t.end),t.colorInit=!0);n.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}})};i.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");n.cssHooks.borderColor={expand:function(n){var t={};return r(["Top","Right","Bottom","Left"],function(i,r){t["border"+r+"Color"]=n}),t}};f=n.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery),function(){function i(t){var r,u,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,f={};if(i&&i.length&&i[0]&&i[i[0]])for(u=i.length;u--;)r=i[u],typeof i[r]=="string"&&(f[n.camelCase(r)]=i[r]);else for(r in i)typeof i[r]=="string"&&(f[r]=i[r]);return f}function f(t,i){var e={},r,f;for(r in i)f=i[r],t[r]!==f&&(u[r]||(n.fx.step[r]||!isNaN(parseFloat(f)))&&(e[r]=f));return e}var r=["add","remove","toggle"],u={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};n.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){n.fx.step[i]=function(n){(n.end==="none"||n.setAttr)&&(n.pos!==1||n.setAttr)||(jQuery.style(n.elem,i,n.end),n.setAttr=!0)}});n.fn.addBack||(n.fn.addBack=function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))});n.effects.animateClass=function(t,u,e,o){var s=n.speed(u,e,o);return this.queue(function(){var e=n(this),h=e.attr("class")||"",o,u=s.children?e.find("*").addBack():e;u=u.map(function(){var t=n(this);return{el:t,start:i(this)}});o=function(){n.each(r,function(n,i){t[i]&&e[i+"Class"](t[i])})};o();u=u.map(function(){return this.end=i(this.el[0]),this.diff=f(this.start,this.end),this});e.attr("class",h);u=u.map(function(){var i=this,t=n.Deferred(),r=n.extend({},s,{queue:!1,complete:function(){t.resolve(i)}});return this.el.animate(this.diff,r),t.promise()});n.when.apply(n,u.get()).done(function(){o();n.each(arguments,function(){var t=this.el;n.each(this.diff,function(n){t.css(n,"")})});s.complete.call(e[0])})})};n.fn.extend({addClass:function(t){return function(i,r,u,f){return r?n.effects.animateClass.call(this,{add:i},r,u,f):t.apply(this,arguments)}}(n.fn.addClass),removeClass:function(t){return function(i,r,u,f){return arguments.length>1?n.effects.animateClass.call(this,{remove:i},r,u,f):t.apply(this,arguments)}}(n.fn.removeClass),toggleClass:function(i){return function(r,u,f,e,o){return typeof u=="boolean"||u===t?f?n.effects.animateClass.call(this,u?{add:r}:{remove:r},f,e,o):i.apply(this,arguments):n.effects.animateClass.call(this,{toggle:r},u,f,e)}}(n.fn.toggleClass),switchClass:function(t,i,r,u,f){return n.effects.animateClass.call(this,{add:i,remove:t},r,u,f)}})}(),function(){function r(t,i,r,u){return n.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},i==null&&(i={}),n.isFunction(i)&&(u=i,r=null,i={}),(typeof i=="number"||n.fx.speeds[i])&&(u=r,r=i,i={}),n.isFunction(r)&&(u=r,r=null),i&&n.extend(t,i),r=r||i.duration,t.duration=n.fx.off?0:typeof r=="number"?r:r in n.fx.speeds?n.fx.speeds[r]:n.fx.speeds._default,t.complete=u||i.complete,t}function u(t){return!t||typeof t=="number"||n.fx.speeds[t]?!0:typeof t=="string"&&!n.effects.effect[t]?!0:n.isFunction(t)?!0:typeof t=="object"&&!t.effect?!0:!1}n.extend(n.effects,{version:"@VERSION",save:function(n,t){for(var r=0;r<t.length;r++)t[r]!==null&&n.data(i+t[r],n[0].style[t[r]])},restore:function(n,r){for(var f,u=0;u<r.length;u++)r[u]!==null&&(f=n.data(i+r[u]),f===t&&(f=""),n.css(r[u],f))},setMode:function(n,t){return t==="toggle"&&(t=n.is(":hidden")?"show":"hide"),t},getBaseline:function(n,t){var i,r;switch(n[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=n[0]/t.height}switch(n[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=n[1]/t.width}return{x:r,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},u=n("<div><\/div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),f={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}return t.wrap(u),(t[0]===r||n.contains(t[0],r))&&n(r).focus(),u=t.parent(),t.css("position")==="static"?(u.css({position:"relative"}),t.css({position:"relative"})):(n.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),n.each(["top","left","bottom","right"],function(n,r){i[r]=t.css(r);isNaN(parseInt(i[r],10))&&(i[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(f),u.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||n.contains(t[0],i))&&n(i).focus()),t},setTransition:function(t,i,r,u){return u=u||{},n.each(i,function(n,i){var f=t.cssUnit(i);f[0]>0&&(u[i]=f[0]*r+f[1])}),u}});n.fn.extend({effect:function(){function e(i){function o(){n.isFunction(e)&&e.call(r[0]);n.isFunction(i)&&i()}var r=n(this),e=t.complete,u=t.mode;(r.is(":hidden")?u==="hide":u==="show")?(r[u](),o()):f.call(r[0],t,o)}var t=r.apply(this,arguments),i=t.mode,u=t.queue,f=n.effects.effect[t.effect];return n.fx.off||!f?i?this[i](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):u===!1?this.each(e):this.queue(u||"fx",e)},show:function(n){return function(t){if(u(t))return n.apply(this,arguments);var i=r.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(n.fn.show),hide:function(n){return function(t){if(u(t))return n.apply(this,arguments);var i=r.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(n.fn.hide),toggle:function(n){return function(t){if(u(t)||typeof t=="boolean")return n.apply(this,arguments);var i=r.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(n.fn.toggle),cssUnit:function(t){var i=this.css(t),r=[];return n.each(["em","px","%","pt"],function(n,t){i.indexOf(t)>0&&(r=[parseFloat(i),t])}),r}})}(),function(){var t={};n.each(["Quad","Cubic","Quart","Quint","Expo"],function(n,i){t[i]=function(t){return Math.pow(t,n+2)}});n.extend(t,{Sine:function(n){return 1-Math.cos(n*Math.PI/2)},Circ:function(n){return 1-Math.sqrt(1-n*n)},Elastic:function(n){return n===0||n===1?n:-Math.pow(2,8*(n-1))*Math.sin(((n-1)*80-7.5)*Math.PI/15)},Back:function(n){return n*n*(3*n-2)},Bounce:function(n){for(var t,i=4;n<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((t*3-2)/22-n,2)}});n.each(t,function(t,i){n.easing["easeIn"+t]=i;n.easing["easeOut"+t]=function(n){return 1-i(1-n)};n.easing["easeInOut"+t]=function(n){return n<.5?i(n*2)/2:1-i(n*-2+2)/2}})}()}(jQuery),function(n,t,i,r){function v(n,t,i,r){var u=this;u.widget=n;u.element=t;u.items=i;u.options=r}function y(n){return parseFloat((n*.017453).toFixed(6))}function p(){n.coverflow.renderer.Classic.apply(this,arguments)}function f(n,t){return typeof n===t}function ht(n,t){return!!~(""+n).indexOf(t)}function ct(n,t){var u,i;for(u in n)if(i=n[u],!ht(i,"-")&&ut[i]!==r)return t==="pfx"?i:!0;return!1}function lt(t,i,u){var o,e;for(o in t)if(e=i[t[o]],e!==r)return u===!1?t[o]:f(e,"function")?n.proxy(e,u||i):e;return!1}function at(n,t,i){var r=n.charAt(0).toUpperCase()+n.slice(1),u=(n+" "+ft.join(r+" ")+r).split(" ");return f(t,"string")||f(t,"undefined")?ct(u,t):(u=(n+" "+et.join(r+" ")+r).split(" "),lt(u,t,i))}function vt(n,t){var i;return function(){var r=this,u=arguments;i&&clearTimeout(i);i=setTimeout(function(){n.apply(r,u);i=null},t)}}n.coverflow={renderer:{},support:{}};v.prototype={cssClass:"classic",itemMargin:0,initialize:function(){var t=this,u=t.options,i={},r=t.items.eq(t.widget.currentIndex);t.itemSize=r.width();t.outerWidth=t.element.parent().outerWidth(!1);t.itemMargin=-Math.floor(u.overlap/2*r.innerWidth());t.items.css({marginLeft:t.itemMargin,marginRight:t.itemMargin});i.width=t.items.width()*t.items.length;n.extend(i,t._getCenterPosition());t.element.css(i)},_getCenterPosition:function(){var t=this,n,r=t.itemSize,i=t.widget.currentIndex;return n=(t.outerWidth-r)/2,n-=i*t.itemSize/2,n+=parseInt(t.element.css("paddingLeft"),10)||0,n-=i*t.itemMargin*2,n-=t.itemMargin,n=Math.round(n),{left:n}},select:function(){return this._getCenterPosition()},getElementTransitionStyles:function(t){var i=n.coverflow.transition[t.easing]||n.coverflow.transition.easeOutQuint;return n.extend(this._getCenterPosition(),{transition:"left "+t.duration+"ms "+i})},refresh:function(t,i,r){var u=this,e=u.options,s=u.items.length,f=u.itemSize,o=u.itemMargin;this.items.each(function(h){var l=h===r&&i-r<0||h-r>0?"left":"right",a=h===r?1-t:h===i?t:1,c={zIndex:s+(l==="left"?r-h:h-r)+10},v=1-a*(1-e.scale),y=[v,a*(l==="right"?-.15:.15),0,v,0,0];c.left=-h*(f/2)+(l==="right"?-f/2+f/2*e.overlap:f/2-f/2*e.overlap)*a;n.coverflow.isOldie&&(h===r?(c.left+=o,c.top=0):c.top=Math.ceil(-o/2));u._transform(this,c,y);n(this).css(c)})},_transform:function(){var t=this;if(n.coverflow.support.transform){t._matrixTransform.apply(t,arguments);return}n.coverflow.isOldie&&t._fallbackTransform.apply(t,arguments)},_matrixTransform:function(n,t,i){t.transform="matrix("+i.join(",")+")"},_fallbackTransform:function(n,t,i){n.filters["DXImageTransform.Microsoft.Matrix"]||(n.style.filter=(n.style.filter?"":" ")+'progid:DXImageTransform.Microsoft.Matrix(sizingMethod="auto expand")');var r=n.filters["DXImageTransform.Microsoft.Matrix"];r.M11=i[0];r.M12=i[2];r.M21=i[1];r.M22=i[3]}};n.extend(n.coverflow.renderer,{Classic:v});p.prototype={cssClass:"3d",initialize:function(){var t=this,i={};t.itemSize=t.items.eq(t.widget.currentIndex).outerWidth(!0);t.outerWidth=t.element.parent().outerWidth(!1);i.width=t.itemSize*t.items.length;n.extend(i,t._getCenterPosition(),t._getPerspectiveOrigin());t.element.css(i)},getItemRenderedWidth:function(){var n=this.options;return Math.cos(y(n.angle))*this.itemSize*n.scale},_getPerspectiveOrigin:function(){var n=this,t=n.options;return{perspectiveOrigin:Math.round(n.itemSize/2+n.widget.currentIndex*n.getItemRenderedWidth()*(1-t.overlap))+"px "+t.perspectiveY+"%"}},_getCenterPosition:function(){var t=this,n,i=t.getItemRenderedWidth(),r=t.widget.currentIndex;return n=(t.outerWidth-t.itemSize)/2,n-=r*i,n+=r*i*t.options.overlap,n-=parseInt(t.element.css("paddingLeft"),10)||0,n=Math.round(n),{left:n}},select:function(){return n.extend({},this._getCenterPosition(),this._getPerspectiveOrigin())},getElementTransitionStyles:function(t){var i=this,r=n.coverflow.transition[t.easing]||n.coverflow.transition.easeOutQuint,u={transitionProperty:"left",transitionDuration:t.duration+"ms",transitionTimingFunction:r,transitionDelay:"initial"};return n.extend(u,i._getCenterPosition(),i._getPerspectiveOrigin())},refresh:function(t,i,r){var f=this,u=f.options,o=f.items.length,s=f.itemSize,e=f.getItemRenderedWidth();this.items.each(function(f){var a=f===r&&i-r<0||f-r>0?"left":"right",c=f===r?1-t:f===i?t:1,l={zIndex:o+(a==="left"?r-f:f-r)+10},v=1-c*(1-u.scale),h=a==="right"?u.angle:-u.angle,p;h=y(c*h);l.left=Math.round(-f*s+c*f*e*(1-u.overlap)+(1-c)*f*e*(1-u.overlap));p=[(v*Math.cos(h)).toFixed(6),0,Math.sin(-h).toFixed(6),0,0,v,0,0,Math.sin(h).toFixed(6),0,(v*Math.cos(h)).toFixed(6),0,0,0,0,1];l.transform="matrix3d("+p.join(", ")+")";l.transformOrigin=a==="right"?"left center":"right center";n(this).css(l)})}};n.extend(n.coverflow.renderer,{ThreeD:p});for(var w=i.createElement("div"),h=w.style,b=0,e=["ms","moz","webkit","o"],it=e.length,l="",o=0,u=n.coverflow.support,k=function(n){return n.charAt(0).toUpperCase()+n.slice(1)};o<it&&!t.requestAnimationFrame;o++)t.requestAnimationFrame=t[e[o]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[e[o]+"CancelAnimationFrame"]||t[e[o]+"CancelRequestAnimationFrame"];if(t.requestAnimationFrame||(t.requestAnimationFrame=function(n){var i=(new Date).getTime(),r=Math.max(0,16-(i-b)),u=t.setTimeout(function(){n(i+r)},r);return b=i+r,u}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(n){clearTimeout(n)}),n.each(e,function(n,t){return(t!=="ms"&&(t=k(t)),!u.transform&&t+"Transform"in h&&(u.transform=t+"Transform"),!u.transition&&t+"Transition"in h&&(u.transition=t+"Transition"),u.transform&&u.transition)?(l=t,!1):!0}),u.transform&&u.transition||(u.transform="transform"in h?"transform":!1,u.transition="transition"in h?"transition":!1),n.support.transform==null&&(n.support.transform=u.transform),n.support.transition==null&&(n.support.transition=u.transition),n.cssProps==null)throw new Error("Your jQuery version is too old. Please upgrade.");!l||n.each(["transitionProperty","transitionDuration","transitionTimingFunction","transitionDelay","perspectiveOrigin"],function(t,i){n.cssProps[i]==null&&(n.cssProps[i]=l+k(i))});w=null;var s=i.documentElement,c="coverflowjsfeaturedetection",rt=i.createElement(c),ut=rt.style,d="Webkit Moz O ms",ft=d.split(" "),et=d.toLowerCase().split(" "),ot=function(n,t,r,u){var l,a,h,v,f=i.createElement("div"),o=i.body,e=o||i.createElement("body");if(parseInt(r,10))while(r--)h=i.createElement("div"),h.id=u?u[r]:c+(r+1),f.appendChild(h);return l=["&#173;","<style id='s",c,"'>",n,"<\/style>"].join(""),f.id=c,(o?f:e).innerHTML+=l,e.appendChild(f),o||(e.style.background="",e.style.overflow="hidden",v=s.style.overflow,s.style.overflow="hidden",s.appendChild(e)),a=t(f,n),o?f.parentNode.removeChild(f):(e.parentNode.removeChild(e),s.style.overflow=v),!!a},a={}.hasOwnProperty,st;st=f(a,"undefined")||f(a.call,"undefined")?function(n,t){return t in n&&f(n.constructor.prototype[t],"undefined")}:function(n,t){return a.call(n,t)};n.coverflow.support.transform3d=function(){var n=!!at("perspective");return n&&"webkitPerspective"in s.style&&ot("@media (transform-3d),(-webkit-transform-3d){#coverflowjsfeaturedetection{left:9px;position:absolute;height:3px;}}",function(t){n=t.offsetLeft===9&&t.offsetHeight===3}),n}();n.support.transform3d==null&&(n.support.transform3d=n.coverflow.support.transform3d);
/**
 * @license Released under the MIT license.
 *
 * CoverflowJS
 *
 * 3D transformations: Brandon Belvin
 * Refactored for jQuery 1.8 / jQueryUI 1.9 Sebastian Sauer
 * Re-written for jQueryUI 1.8.6/jQuery core 1.4.4+ by Addy Osmani with adjustments
 * Maintenance updates for 1.8.9/jQuery core 1.5, 1.6.2 made.
 * Original Component: Paul Bakaus for jQueryUI 1.7
 *
 *
 * Depends:
 *  jquery.ui.core.js
 *  jquery.ui.widget.js
 *
 * In case you want swipe support and you don't use jQuery mobile yet:
 * jquery-mobile.custom.js
 *
 * $.animate support for older browsers depends on:
 *  jquery.ui.effect.js
 *
 * Events:
 *  beforeselect
 *  select
 */
var g={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"transitionend"},nt=navigator.userAgent.toLowerCase(),tt=function(){var n=/(msie) ([\w.]+)/.exec(nt);return n!==null&&n[1]&&~~n[2]<10}();n.coverflow=n.extend(!0,{},n.coverflow,{isAndroid:/android/.test(nt),isOldie:tt,transition:{easeInQuad:"cubic-bezier( .55,.085,.68,.53 )",easeInCubic:"cubic-bezier( .550, .055, .675, .190 )",easeInQuart:"cubic-bezier( .895, .03, .685, .22 )",easeInQuint:"cubic-bezier( .755, .05, .855, .06 )",easeInSine:"cubic-bezier( .47, 0, .745, .715 )",easeInExpo:"cubic-bezier( .95, .05, .795, .035 )",easeInCirc:"cubic-bezier( .6, .04, .98, .335 )",easeInBack:"cubic-bezier( .6, -.28, .735, .045 )",easeOutQuad:"cubic-bezier( .25,.46,.45,.94 )",easeOutCubic:"cubic-bezier( .215,.61,.355,1 )",easeOutQuart:"cubic-bezier( .165, .84, .44, 1 )",easeOutQuint:"cubic-bezier( .23, 1, .32, 1 )",easeOutSine:"cubic-bezier( .39, .575, .565, 1 )",easeOutExpo:"cubic-bezier( .19,1,.22,1 )",easeOutCirc:"cubic-bezier( .075, .82, .165, 1 )",easeOutBack:"cubic-bezier( .175, .885, .32, 1.275 )",easeInOutQuad:"cubic-bezier( .455, .03, .515, .955 )",easeInOutCubic:"cubic-bezier( .645, .045, .355, 1 )",easeInOutQuart:"cubic-bezier( .77, 0, .175, 1 )",easeInOutQuint:"cubic-bezier( .86, 0, .07, 1 )",easeInOutSine:"cubic-bezier( .445, .05, .55, .95 )",easeInOutExpo:"cubic-bezier( 1, 0, 0, 1 )",easeInOutCirc:"cubic-bezier( .785, .135, .15, .86 )",easeInOutBack:"cubic-bezier( .68, -.55, .265, 1.55 )"},renderer:{}});n.widget("ui.coverflow",{options:{items:"> *",active:0,duration:400,easing:"easeOutQuint",angle:45,perspectiveY:45,scale:.7,overlap:.3,trigger:{itemfocus:!1,itemclick:!0,mousewheel:!0,swipe:!0}},isTicking:!1,_create:function(){var i=this,r=this.options,f,e,u=n.coverflow.support||{};i.elementOrigStyle=i.element.attr("style");i.items=i.element.find(r.items).each(function(){var t=n(this);t.data({coverflowOrigElemAttr:{style:t.attr("style"),"class":t.attr("class"),tabIndex:t.attr("tabIndex")}})}).addClass("ui-coverflow-item");i._setDimensions();i.support=u;f=u.transform&&!tt&&t.opera==null&&u.transform3d?n.coverflow.renderer.ThreeD:n.coverflow.renderer.Classic;e={angle:r.angle,perspectiveY:r.perspectiveY,scale:r.scale,overlap:r.overlap,itemSize:i.itemSize,outerWidth:i.outerWidth};i.renderer=new f(i,i.element,i.items,e);i.element.addClass("ui-coverflow ui-coverflow-"+i.renderer.cssClass+"-render").parent().addClass("ui-coverflow-wrapper ui-clearfix");r.trigger.itemfocus&&this._bindFocus();r.trigger.itemclick&&i._on(i.items,{click:i._select});r.trigger.mousewheel&&i._on({mousewheel:i._onMouseWheel,DOMMouseScroll:i._onMouseWheel});r.trigger.swipe&&i._bindSwipe();i.useJqueryAnimate=!(u.transition&&n.isFunction(t.requestAnimationFrame));i.coverflowrafid=0},_bindFocus:function(){var n=this;n.items.prop("tabIndex",0);n._on(n.items,{focus:n._select})},_bindSwipe:function(){var i=this,r=i.element,u=!1,f=!1;if(n.event.special&&n.event.special.swipe&&(u=!0,n.coverflow.isAndroid&&(n.event.special.swipe.scrollSupressionThreshold=0),n.event.special.swipe.handleSwipe=function(t,i){var u=t.coords,f=i.coords,r=n.event.special.swipe;i.time-t.time<r.durationThreshold&&Math.abs(u[0]-f[0])>r.horizontalDistanceThreshold&&Math.abs(u[1]-f[1])<r.verticalDistanceThreshold&&t.origin.trigger("swipe",{swipestart:t,swipestop:i}).trigger(t.coords[0]>i.coords[0]?"swipeleft":"swiperight",{swipestart:t,swipestop:i})},i._on({swipe:vt(i._handleJQmSwipe,150)})),r.hammer&&t.Hammer!=null){f=!0;r.hammer().on("drag swipe",function(n){Hammer.utils.isVertical(n.gesture.direction)||n.gesture.preventDefault()});i._on({swipe:i._handleHammerSwipe})}u||f||i._on({swipeleft:i.next,swiperight:i.prev})},_init:function(){var n=this,t=n.options;t.duration=~~t.duration;t.duration<1&&(t.duration=1);n.currentIndex=n._isValidIndex(t.active,!0)?t.active:0;n.activeItem=n.items.removeClass("ui-state-active").eq(n.currentIndex).addClass("ui-state-active");n._setDimensions();n.renderer.initialize();n._refresh(1,n._getFrom(),n.currentIndex);n._trigger("beforeselect",null,n._ui());n._trigger("select",null,n._ui())},_setDimensions:function(){var n=this;n.itemWidth=n.items.width();n.itemHeight=n.items.height();n.itemSize=n.items.outerWidth(!0);n.outerWidth=n.element.parent().outerWidth(!1)},_isValidIndex:function(n,t){return t=!!t,n=~~n,(this.currentIndex!==n||t)&&n>-1&&!!this.items.get(n)},_select:function(n){this.select(n.currentTarget)},next:function(){return this.select(this.currentIndex+1)},prev:function(){return this.select(this.currentIndex-1)},_handleJQmSwipe:function(n,t){var i=t.swipestart,r=t.swipestop,f=r.time-i.time,u=r.coords[0]-i.coords[0],e=u/f,o=u<0?"left":"right";this._handleSwipe(o,e)},_handleHammerSwipe:function(n){var t=n.gesture;this._handleSwipe(t.direction,t.distance/t.deltaTime)},_handleSwipe:function(n,t){var i=this,r,u;if(r=i.outerWidth*Math.pow(t,2)*.25,r/=i.itemWidth,r=Math.floor(r)*(n==="left"?1:-1),u=i.currentIndex+r,!r){n==="left"?i.next():i.prev();return}if(u<0){i.select(0);return}if(i._isValidIndex(u)){i.select(u);return}i.select(i.items.length-1)},_getFrom:function(){var n=this;return Math.abs(n.previous-n.currentIndex)<=1?n.previousIndex:n.currentIndex+(n.previousIndex<n.currentIndex?-1:1)},select:function(i){var r=this,u=r.options,f=isNaN(parseInt(i,10))?r.items.index(i):parseInt(i,10),e;return r._isValidIndex(f)?!1===r._trigger("beforeselect",null,this._ui(r.items.eq(f),f))?!1:(r.isTicking&&(r.useJqueryAnimate?r.element.stop(!0,!1):(r.coverflowrafid&&t.cancelAnimationFrame(r.coverflowrafid),r.element.unbind(g[r.support.transition]))),r.isTicking=!0,r.previousIndex=r.currentIndex,u.active=r.currentIndex=f,e=n.extend({},r.renderer.select(),{coverflow:1}),r.useJqueryAnimate?r._animation(u,e):(u=n.extend({duration:u.duration,easing:u.easing},e),r._transition(u)),!0):!1},_animation:function(t,i){var r=this,u=this._getFrom();n.fx.step.coverflow=function(n){r._refresh(n.now,u,r.currentIndex)};r.element.animate(i,{duration:t.duration,easing:t.easing}).promise().done(function(){r._onAnimationEnd()})},_transition:function(i){var r=this,s=new Date,f=r._getFrom(),e=r.currentIndex,u={},o=function(){var n=((new Date).getTime()-s.getTime())/i.duration;n>1?r.isTicking=!1:r._refresh(n,f,e);r.isTicking&&(r.coverflowrafid=t.requestAnimationFrame(o))};n.isFunction(r.renderer.getElementTransitionStyles)&&(u=n.extend(u,r.renderer.getElementTransitionStyles(i)));r.element.one(g[r.support.transition],function(){r._refresh(1,f,e);r._onAnimationEnd()}).css(u);r.coverflowrafid=t.requestAnimationFrame(o)},_onAnimationEnd:function(){var n=this;n.coverflowrafid&&cancelAnimationFrame(n.coverflowrafid);n.isTicking=!1;n.activeItem=n.items.removeClass("ui-state-active").eq(n.currentIndex).addClass("ui-state-active");n._trigger("select",null,n._ui())},_refresh:function(n,t,i){this.element.parent().scrollTop(0);this.renderer.refresh(n,t,i)},_ui:function(n,t){return{active:n||this.activeItem,index:t!=null?t:this.currentIndex}},_onMouseWheel:function(n){var t=n.originalEvent;if(n.preventDefault(),t.wheelDelta>0||t.detail<0){this.prev();return}this.next()},_destroy:function(){var t=this;t.elementOrigStyle!==r?t.element.attr("style",this.elementOrigStyle):t.element.removeAttr("style");t.element.removeClass("ui-coverflow ui-helper-clearfix ui-coverflow-"+(t.renderer.cssClass||"classic")+"-render").parent().removeClass("ui-coverflow-wrapper ui-clearfix");t.items.removeClass("ui-coverflow-item ui-state-active").each(function(){var t=n(this),i=t.data("coverflowOrigElemAttr");n.each(i,function(n,i){i!==r?t.attr(n,i):t.removeAttr(n)});t.data("coverflowOrigElemAttr",null)});t._super()}})}(jQuery,this,this.document);
/*! ========================================================================
 * Bootstrap Toggle: bootstrap-toggle.js v2.2.0
 * http://www.bootstraptoggle.com
 * ========================================================================
 * Copyright 2014 Min Hur, The New York Times Company
 * Licensed under MIT
 * ======================================================================== */
+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.toggle"),f=typeof i=="object"&&i;r||u.data("bs.toggle",r=new t(this,f));typeof i=="string"&&r[i]&&r[i]()})}var t=function(t,i){this.$element=n(t);this.options=n.extend({},this.defaults(),i);this.render()},i;t.VERSION="2.2.0";t.DEFAULTS={on:"On",off:"Off",onstyle:"primary",offstyle:"default",size:"normal",style:"",width:null,height:null};t.prototype.defaults=function(){return{on:this.$element.attr("data-on")||t.DEFAULTS.on,off:this.$element.attr("data-off")||t.DEFAULTS.off,onstyle:this.$element.attr("data-onstyle")||t.DEFAULTS.onstyle,offstyle:this.$element.attr("data-offstyle")||t.DEFAULTS.offstyle,size:this.$element.attr("data-size")||t.DEFAULTS.size,style:this.$element.attr("data-style")||t.DEFAULTS.style,width:this.$element.attr("data-width")||t.DEFAULTS.width,height:this.$element.attr("data-height")||t.DEFAULTS.height}};t.prototype.render=function(){var e,o;this._onstyle="btn-"+this.options.onstyle;this._offstyle="btn-"+this.options.offstyle;var r=this.options.size==="large"?"btn-lg":this.options.size==="small"?"btn-sm":this.options.size==="mini"?"btn-xs":"",t=n('<label class="btn">').html(this.options.on).addClass(this._onstyle+" "+r),i=n('<label class="btn">').html(this.options.off).addClass(this._offstyle+" "+r+" active"),u=n('<span class="toggle-handle btn btn-default">').addClass(r),f=n('<div class="toggle-group">').append(t,i,u),s=n('<div class="toggle btn" data-toggle="toggle">').addClass(this.$element.prop("checked")?this._onstyle:this._offstyle+" off").addClass(r).addClass(this.options.style);this.$element.wrap(s);n.extend(this,{$toggle:this.$element.parent(),$toggleOn:t,$toggleOff:i,$toggleGroup:f});this.$toggle.append(f);e=this.options.width||Math.max(t.outerWidth(),i.outerWidth())+u.outerWidth()/2;o=this.options.height||Math.max(t.outerHeight(),i.outerHeight());t.addClass("toggle-on");i.addClass("toggle-off");this.$toggle.css({width:e,height:o});this.options.height&&(t.css("line-height",t.height()+"px"),i.css("line-height",i.height()+"px"));this.update(!0);this.trigger(!0)};t.prototype.toggle=function(){this.$element.prop("checked")?this.off():this.on()};t.prototype.on=function(n){if(this.$element.prop("disabled"))return!1;this.$toggle.removeClass(this._offstyle+" off").addClass(this._onstyle);this.$element.prop("checked",!0);n||this.trigger()};t.prototype.off=function(n){if(this.$element.prop("disabled"))return!1;this.$toggle.removeClass(this._onstyle).addClass(this._offstyle+" off");this.$element.prop("checked",!1);n||this.trigger()};t.prototype.enable=function(){this.$toggle.removeAttr("disabled");this.$element.prop("disabled",!1)};t.prototype.disable=function(){this.$toggle.attr("disabled","disabled");this.$element.prop("disabled",!0)};t.prototype.update=function(n){if(this.$element.prop("disabled")?this.disable():this.enable(),this.$element.prop("checked"))this.on(n);else this.off(n)};t.prototype.trigger=function(t){this.$element.off("change.bs.toggle");t||this.$element.change();this.$element.on("change.bs.toggle",n.proxy(function(){this.update()},this))};t.prototype.destroy=function(){this.$element.off("change.bs.toggle");this.$toggleGroup.remove();this.$element.removeData("bs.toggle");this.$element.unwrap()};i=n.fn.bootstrapToggle;n.fn.bootstrapToggle=r;n.fn.bootstrapToggle.Constructor=t;n.fn.toggle.noConflict=function(){return n.fn.bootstrapToggle=i,this};n(function(){n("input[type=checkbox][data-toggle^=toggle]").bootstrapToggle()});n(document).on("click.bs.toggle","div[data-toggle^=toggle]",function(t){var i=n(this).find("input[type=checkbox]");i.bootstrapToggle("toggle");t.preventDefault()})}(jQuery);!function(n,t){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],t);else if("object"==typeof exports)t(require("jquery"),require("moment"));else{if(!jQuery)throw new Error("bootstrap-datetimepicker requires jQuery to be loaded first");if(!moment)throw new Error("bootstrap-datetimepicker requires moment.js to be loaded first");t(n.jQuery,moment)}}(this,function(n,t){"use strict";if("undefined"==typeof t)throw new Error("momentjs is required");var i=0,r=function(r,u){var g,ht=n.fn.datetimepicker.defaults,ct={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},f=this,nt=!1,lt=function(){var s,h,o=!1;if(f.options=n.extend({},ht,u),f.options.icons=n.extend({},ct,f.options.icons),f.element=n(r),at(),!f.options.pickTime&&!f.options.pickDate)throw new Error("Must choose at least one picker");if(f.id=i++,t.locale(f.options.language),f.date=t(),f.unset=!1,f.isInput=f.element.is("input"),f.component=!1,f.element.hasClass("input-group")&&(f.component=f.element.find(0===f.element.find(".datepickerbutton").size()?'[class^="input-group-"]':".datepickerbutton")),f.format=f.options.format,s=t().localeData(),f.format||(f.format=f.options.pickDate?s.longDateFormat("L"):"",f.options.pickDate&&f.options.pickTime&&(f.format+=" "),f.format+=f.options.pickTime?s.longDateFormat("LT"):"",f.options.useSeconds&&(-1!==s.longDateFormat("LT").indexOf(" A")?f.format=f.format.split(" A")[0]+":ss A":f.format+=":ss")),f.use24hours=f.format.toLowerCase().indexOf("a")<0&&f.format.indexOf("h")<0,f.component&&(o=f.component.find("span")),f.options.pickTime&&o&&o.addClass(f.options.icons.time),f.options.pickDate&&o&&(o.removeClass(f.options.icons.time),o.addClass(f.options.icons.date)),f.options.widgetParent="string"==typeof f.options.widgetParent&&f.options.widgetParent||f.element.parents().filter(function(){return"scroll"===n(this).css("overflow-y")}).get(0)||"body",f.widget=n(ii()).appendTo(f.options.widgetParent),f.minViewMode=f.options.minViewMode||0,"string"==typeof f.minViewMode)switch(f.minViewMode){case"months":f.minViewMode=1;break;case"years":f.minViewMode=2;break;default:f.minViewMode=0}if(f.viewMode=f.options.viewMode||0,"string"==typeof f.viewMode)switch(f.viewMode){case"months":f.viewMode=1;break;case"years":f.viewMode=2;break;default:f.viewMode=0}f.viewMode=Math.max(f.viewMode,f.minViewMode);f.options.disabledDates=d(f.options.disabledDates);f.options.enabledDates=d(f.options.enabledDates);f.startViewMode=f.viewMode;f.setMinDate(f.options.minDate);f.setMaxDate(f.options.maxDate);vt();yt();pt();wt();bt();c();b();e().prop("disabled")||ft();""!==f.options.defaultDate&&""===e().val()&&f.setValue(f.options.defaultDate);1!==f.options.minuteStepping&&(h=f.options.minuteStepping,f.date.minutes(Math.round(f.date.minutes()/h)*h%60).seconds(0))},e=function(){var n;if(f.isInput)return f.element;if(n=f.element.find(".datepickerinput"),0===n.size())n=f.element.find("input");else if(!n.is("input"))throw new Error('CSS class "datepickerinput" cannot be applied to non input element');return n},at=function(){var n;n=f.element.is("input")?f.element.data():f.element.find("input").data();void 0!==n.dateFormat&&(f.options.format=n.dateFormat);void 0!==n.datePickdate&&(f.options.pickDate=n.datePickdate);void 0!==n.datePicktime&&(f.options.pickTime=n.datePicktime);void 0!==n.dateUseminutes&&(f.options.useMinutes=n.dateUseminutes);void 0!==n.dateUseseconds&&(f.options.useSeconds=n.dateUseseconds);void 0!==n.dateUsecurrent&&(f.options.useCurrent=n.dateUsecurrent);void 0!==n.calendarWeeks&&(f.options.calendarWeeks=n.calendarWeeks);void 0!==n.dateMinutestepping&&(f.options.minuteStepping=n.dateMinutestepping);void 0!==n.dateMindate&&(f.options.minDate=n.dateMindate);void 0!==n.dateMaxdate&&(f.options.maxDate=n.dateMaxdate);void 0!==n.dateShowtoday&&(f.options.showToday=n.dateShowtoday);void 0!==n.dateCollapse&&(f.options.collapse=n.dateCollapse);void 0!==n.dateLanguage&&(f.options.language=n.dateLanguage);void 0!==n.dateDefaultdate&&(f.options.defaultDate=n.dateDefaultdate);void 0!==n.dateDisableddates&&(f.options.disabledDates=n.dateDisableddates);void 0!==n.dateEnableddates&&(f.options.enabledDates=n.dateEnableddates);void 0!==n.dateIcons&&(f.options.icons=n.dateIcons);void 0!==n.dateUsestrict&&(f.options.useStrict=n.dateUsestrict);void 0!==n.dateDirection&&(f.options.direction=n.dateDirection);void 0!==n.dateSidebyside&&(f.options.sideBySide=n.dateSidebyside);void 0!==n.dateDaysofweekdisabled&&(f.options.daysOfWeekDisabled=n.dateDaysofweekdisabled)},ut=function(){var r,u="absolute",t=f.component?f.component.offset():f.element.offset(),i=n(window);f.width=f.component?f.component.outerWidth():f.element.outerWidth();t.top=t.top+f.element.outerHeight();"up"===f.options.direction?r="top":"bottom"===f.options.direction?r="bottom":"auto"===f.options.direction&&(r=t.top+f.widget.height()>i.height()+i.scrollTop()&&f.widget.height()+f.element.outerHeight()<t.top?"top":"bottom");"top"===r?(t.bottom=i.height()-t.top+f.element.outerHeight()+3,f.widget.addClass("top").removeClass("bottom")):(t.top+=1,f.widget.addClass("bottom").removeClass("top"));void 0!==f.options.width&&f.widget.width(f.options.width);"left"===f.options.orientation&&(f.widget.addClass("left-oriented"),t.left=t.left-f.widget.width()+20);ti()&&(u="fixed",t.top-=i.scrollTop(),t.left-=i.scrollLeft());i.width()<t.left+f.widget.outerWidth()?(t.right=i.width()-t.left-f.width,t.left="auto",f.widget.addClass("pull-right")):(t.right="auto",f.widget.removeClass("pull-right"));f.widget.css("top"===r?{position:u,bottom:t.bottom,top:"auto",left:t.left,right:t.right}:{position:u,top:t.top,bottom:"auto",left:t.left,right:t.right})},o=function(n,i){(!t(f.date).isSame(t(n))||nt)&&(nt=!1,f.element.trigger({type:"dp.change",date:t(f.date),oldDate:t(n)}),"change"!==i&&f.element.change())},tt=function(n){nt=!0;f.element.trigger({type:"dp.error",date:t(n,f.format,f.options.useStrict)})},c=function(n){t.locale(f.options.language);var i=n;i||(i=e().val(),i&&(f.date=t(i,f.format,f.options.useStrict)),f.date||(f.date=t()));f.viewDate=t(f.date).startOf("month");v();it()},vt=function(){t.locale(f.options.language);var i,r=n("<tr>"),u=t.weekdaysMin();if(f.options.calendarWeeks===!0&&r.append('<th class="cw">#<\/th>'),0===t().localeData()._week.dow)for(i=0;7>i;i++)r.append('<th class="dow">'+u[i]+"<\/th>");else for(i=1;8>i;i++)r.append(7===i?'<th class="dow">'+u[0]+"<\/th>":'<th class="dow">'+u[i]+"<\/th>");f.widget.find(".datepicker-days thead").append(r)},yt=function(){t.locale(f.options.language);for(var i="",r=t.monthsShort(),n=0;12>n;n++)i+='<span class="month">'+r[n]+"<\/span>";f.widget.find(".datepicker-months td").append(i)},v=function(){if(f.options.pickDate){t.locale(f.options.language);var y,r,p,a,e,u,w,b,v,i=f.viewDate.year(),h=f.viewDate.month(),o=f.options.minDate.year(),d=f.options.minDate.month(),s=f.options.maxDate.year(),g=f.options.maxDate.month(),c=[],l=t.months();for(f.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),f.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),f.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),f.widget.find(".datepicker-days th:eq(1)").text(l[h]+" "+i),r=t(f.viewDate,f.format,f.options.useStrict).subtract(1,"months"),w=r.daysInMonth(),r.date(w).startOf("week"),(i===o&&d>=h||o>i)&&f.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(i===s&&h>=g||i>s)&&f.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),p=t(r).add(42,"d");r.isBefore(p);){if(r.weekday()===t().startOf("week").weekday()&&(a=n("<tr>"),c.push(a),f.options.calendarWeeks===!0&&a.append('<td class="cw">'+r.week()+"<\/td>")),e="",r.year()<i||r.year()===i&&r.month()<h?e+=" old":(r.year()>i||r.year()===i&&r.month()>h)&&(e+=" new"),r.isSame(t({y:f.date.year(),M:f.date.month(),d:f.date.date()}))&&(e+=" active"),(k(r,"day")||!st(r))&&(e+=" disabled"),f.options.showToday===!0&&r.isSame(t(),"day")&&(e+=" today"),f.options.daysOfWeekDisabled)for(u=0;u<f.options.daysOfWeekDisabled.length;u++)if(r.day()===f.options.daysOfWeekDisabled[u]){e+=" disabled";break}a.append('<td class="day'+e+'">'+r.date()+"<\/td>");y=r.date();r.add(1,"d");y===r.date()&&r.add(1,"d")}for(f.widget.find(".datepicker-days tbody").empty().append(c),v=f.date.year(),l=f.widget.find(".datepicker-months").find("th:eq(1)").text(i).end().find("span").removeClass("active"),v===i&&l.eq(f.date.month()).addClass("active"),o>i-1&&f.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),i+1>s&&f.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),u=0;12>u;u++)i===o&&d>u||o>i?n(l[u]).addClass("disabled"):(i===s&&u>g||i>s)&&n(l[u]).addClass("disabled");for(c="",i=10*parseInt(i/10,10),b=f.widget.find(".datepicker-years").find("th:eq(1)").text(i+"-"+(i+9)).parents("table").find("td"),f.widget.find(".datepicker-years").find("th").removeClass("disabled"),o>i&&f.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),i+9>s&&f.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),i-=1,u=-1;11>u;u++)c+='<span class="year'+(-1===u||10===u?" old":"")+(v===i?" active":"")+(o>i||i>s?" disabled":"")+'">'+i+"<\/span>",i+=1;b.html(c)}},pt=function(){t.locale(f.options.language);var i,r,u,e=f.widget.find(".timepicker .timepicker-hours table"),n="";if(e.parent().hide(),f.use24hours)for(i=0,r=0;6>r;r+=1){for(n+="<tr>",u=0;4>u;u+=1)n+='<td class="hour">'+s(i.toString())+"<\/td>",i++;n+="<\/tr>"}else for(i=1,r=0;3>r;r+=1){for(n+="<tr>",u=0;4>u;u+=1)n+='<td class="hour">'+s(i.toString())+"<\/td>",i++;n+="<\/tr>"}e.html(n)},wt=function(){var i,r,e=f.widget.find(".timepicker .timepicker-minutes table"),n="",u=0,t=f.options.minuteStepping;for(e.parent().hide(),1===t&&(t=5),i=0;i<Math.ceil(15/t);i++){for(n+="<tr>",r=0;4>r;r+=1)60>u?(n+='<td class="minute">'+s(u.toString())+"<\/td>",u+=t):n+="<td><\/td>";n+="<\/tr>"}e.html(n)},bt=function(){var t,i,r=f.widget.find(".timepicker .timepicker-seconds table"),n="",u=0;for(r.parent().hide(),t=0;3>t;t++){for(n+="<tr>",i=0;4>i;i+=1)n+='<td class="second">'+s(u.toString())+"<\/td>",u+=5;n+="<\/tr>"}r.html(n)},it=function(){if(f.date){var t=f.widget.find(".timepicker span[data-time-component]"),n=f.date.hours(),i=f.date.format("A");f.use24hours||(0===n?n=12:12!==n&&(n%=12),f.widget.find(".timepicker [data-action=togglePeriod]").text(i));t.filter("[data-time-component=hours]").text(s(n));t.filter("[data-time-component=minutes]").text(s(f.date.minutes()));t.filter("[data-time-component=seconds]").text(s(f.date.second()))}},kt=function(i){i.stopPropagation();i.preventDefault();f.unset=!1;var u,e,s,h,r=n(i.target).closest("span, td, th"),c=t(f.date);if(1===r.length&&!r.is(".disabled"))switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"picker-switch":b(1);break;case"prev":case"next":s=rt.modes[f.viewMode].navStep;"prev"===r[0].className&&(s=-1*s);f.viewDate.add(s,rt.modes[f.viewMode].navFnc);v()}break;case"span":r.is(".month")?(u=r.parent().find("span").index(r),f.viewDate.month(u)):(e=parseInt(r.text(),10)||0,f.viewDate.year(e));f.viewMode===f.minViewMode&&(f.date=t({y:f.viewDate.year(),M:f.viewDate.month(),d:f.viewDate.date(),h:f.date.hours(),m:f.date.minutes(),s:f.date.seconds()}),l(),o(c,i.type));b(-1);v();break;case"td":r.is(".day")&&(h=parseInt(r.text(),10)||1,u=f.viewDate.month(),e=f.viewDate.year(),r.is(".old")?0===u?(u=11,e-=1):u-=1:r.is(".new")&&(11===u?(u=0,e+=1):u+=1),f.date=t({y:e,M:u,d:h,h:f.date.hours(),m:f.date.minutes(),s:f.date.seconds()}),f.viewDate=t({y:e,M:u,d:Math.min(28,h)}),v(),l(),o(c,i.type))}},y={incrementHours:function(){a("add","hours",1)},incrementMinutes:function(){a("add","minutes",f.options.minuteStepping)},incrementSeconds:function(){a("add","seconds",1)},decrementHours:function(){a("subtract","hours",1)},decrementMinutes:function(){a("subtract","minutes",f.options.minuteStepping)},decrementSeconds:function(){a("subtract","seconds",1)},togglePeriod:function(){var n=f.date.hours();n>=12?n-=12:n+=12;f.date.hours(n)},showPicker:function(){f.widget.find(".timepicker > div:not(.timepicker-picker)").hide();f.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){f.widget.find(".timepicker .timepicker-picker").hide();f.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){f.widget.find(".timepicker .timepicker-picker").hide();f.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){f.widget.find(".timepicker .timepicker-picker").hide();f.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var i=parseInt(n(t.target).text(),10);f.use24hours||(f.date.hours()>=12?12!==i&&(i+=12):12===i&&(i=0));f.date.hours(i);y.showPicker.call(f)},selectMinute:function(t){f.date.minutes(parseInt(n(t.target).text(),10));y.showPicker.call(f)},selectSecond:function(t){f.date.seconds(parseInt(n(t.target).text(),10));y.showPicker.call(f)}},dt=function(i){var r=t(f.date),u=n(i.currentTarget).data("action"),e=y[u].apply(f,arguments);return p(i),f.date||(f.date=t({y:1970})),l(),it(),o(r,i.type),e},p=function(n){n.stopPropagation();n.preventDefault()},gt=function(n){27===n.keyCode&&f.hide()},w=function(i){t.locale(f.options.language);var e=n(i.target),u=t(f.date),r=t(e.val(),f.format,f.options.useStrict);r.isValid()&&!k(r)&&st(r)?(c(),f.setValue(r),o(u,i.type),l()):(f.viewDate=u,f.unset=!0,o(u,i.type),tt(r))},b=function(n){n&&(f.viewMode=Math.max(f.minViewMode,Math.min(2,f.viewMode+n)));f.widget.find(".datepicker > div").hide().filter(".datepicker-"+rt.modes[f.viewMode].clsName).show()},ft=function(){var i,r,t,e,u;f.widget.on("click",".datepicker *",n.proxy(kt,this));f.widget.on("click","[data-action]",n.proxy(dt,this));f.widget.on("mousedown",n.proxy(p,this));f.element.on("keydown",n.proxy(gt,this));f.options.pickDate&&f.options.pickTime&&f.widget.on("click.togglePicker",".accordion-toggle",function(o){if(o.stopPropagation(),i=n(this),r=i.closest("ul"),t=r.find(".in"),e=r.find(".collapse:not(.in)"),t&&t.length){if(u=t.data("collapse"),u&&u.transitioning)return;t.collapse("hide");e.collapse("show");i.find("span").toggleClass(f.options.icons.time+" "+f.options.icons.date);f.component&&f.component.find("span").toggleClass(f.options.icons.time+" "+f.options.icons.date)}});f.isInput?f.element.on({click:n.proxy(f.show,this),focus:n.proxy(f.show,this),change:n.proxy(w,this),blur:n.proxy(f.hide,this)}):(f.element.on({change:n.proxy(w,this)},"input"),f.component?(f.component.on("click",n.proxy(f.show,this)),f.component.on("mousedown",n.proxy(p,this))):f.element.on("click",n.proxy(f.show,this)))},ni=function(){n(window).on("resize.datetimepicker"+f.id,n.proxy(ut,this));f.isInput||n(document).on("mousedown.datetimepicker"+f.id,n.proxy(f.hide,this))},et=function(){f.widget.off("click",".datepicker *",f.click);f.widget.off("click","[data-action]");f.widget.off("mousedown",f.stopEvent);f.options.pickDate&&f.options.pickTime&&f.widget.off("click.togglePicker");f.isInput?f.element.off({focus:f.show,change:w,click:f.show,blur:f.hide}):(f.element.off({change:w},"input"),f.component?(f.component.off("click",f.show),f.component.off("mousedown",f.stopEvent)):f.element.off("click",f.show))},ot=function(){n(window).off("resize.datetimepicker"+f.id);f.isInput||n(document).off("mousedown.datetimepicker"+f.id)},ti=function(){if(f.element){for(var i=f.element.parents(),r=!1,t=0;t<i.length;t++)if("fixed"===n(i[t]).css("position")){r=!0;break}return r}return!1},l=function(){t.locale(f.options.language);var n="";f.unset||(n=t(f.date).format(f.format));e().val(n);f.element.data("date",n);f.options.pickTime||f.hide()},a=function(n,i,r){t.locale(f.options.language);var u;return"add"===n?(u=t(f.date),23===u.hours()&&u.add(r,i),u.add(r,i)):u=t(f.date).subtract(r,i),k(t(u.subtract(r,i)))||k(u)?void tt(u.format(f.format)):("add"===n?f.date.add(r,i):f.date.subtract(r,i),void(f.unset=!1))},k=function(n,i){t.locale(f.options.language);var r=t(f.options.maxDate,f.format,f.options.useStrict),u=t(f.options.minDate,f.format,f.options.useStrict);return i&&(r=r.endOf(i),u=u.startOf(i)),n.isAfter(r)||n.isBefore(u)?!0:f.options.disabledDates===!1?!1:f.options.disabledDates[n.format("YYYY-MM-DD")]===!0},st=function(n){return t.locale(f.options.language),f.options.enabledDates===!1?!0:f.options.enabledDates[n.format("YYYY-MM-DD")]===!0},d=function(n){for(var r={},u=0,i=0;i<n.length;i++)g=t.isMoment(n[i])||n[i]instanceof Date?t(n[i]):t(n[i],f.format,f.options.useStrict),g.isValid()&&(r[g.format("YYYY-MM-DD")]=!0,u++);return u>0?r:!1},s=function(n){return n=n.toString(),n.length>=2?n:"0"+n},ii=function(){var n='<thead><tr><th class="prev">&lsaquo;<\/th><th colspan="'+(f.options.calendarWeeks?"6":"5")+'" class="picker-switch"><\/th><th class="next">&rsaquo;<\/th><\/tr><\/thead>',r='<tbody><tr><td colspan="'+(f.options.calendarWeeks?"8":"7")+'"><\/td><\/tr><\/tbody>',t='<div class="datepicker-days"><table class="table-condensed">'+n+'<tbody><\/tbody><\/table><\/div><div class="datepicker-months"><table class="table-condensed">'+n+r+'<\/table><\/div><div class="datepicker-years"><table class="table-condensed">'+n+r+"<\/table><\/div>",i="";return f.options.pickDate&&f.options.pickTime?(i='<div class="bootstrap-datetimepicker-widget'+(f.options.sideBySide?" timepicker-sbs":"")+(f.use24hours?" usetwentyfour":"")+' dropdown-menu" style="z-index:9999 !important;">',i+=f.options.sideBySide?'<div class="row"><div class="col-sm-6 datepicker">'+t+'<\/div><div class="col-sm-6 timepicker">'+h.getTemplate()+"<\/div><\/div>":'<ul class="list-unstyled"><li'+(f.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+t+'<\/div><\/li><li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+f.options.icons.time+'"><\/span><\/a><\/li><li'+(f.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+h.getTemplate()+"<\/div><\/li><\/ul>",i+="<\/div>"):f.options.pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+h.getTemplate()+"<\/div><\/div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+t+"<\/div><\/div>"},rt={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}]},h={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"><\/span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"><\/span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"><\/span>'};h.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><span class="'+f.options.icons.up+'"><\/span><\/a><\/td><td class="separator"><\/td><td>'+(f.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+f.options.icons.up+'"><\/span><\/a>':"")+"<\/td>"+(f.options.useSeconds?'<td class="separator"><\/td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+f.options.icons.up+'"><\/span><\/a><\/td>':"")+(f.use24hours?"":'<td class="separator"><\/td>')+"<\/tr><tr><td>"+h.hourTemplate+'<\/td> <td class="separator">:<\/td><td>'+(f.options.useMinutes?h.minuteTemplate:'<span class="timepicker-minute">00<\/span>')+"<\/td> "+(f.options.useSeconds?'<td class="separator">:<\/td><td>'+h.secondTemplate+"<\/td>":"")+(f.use24hours?"":'<td class="separator"><\/td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"><\/button><\/td>')+'<\/tr><tr><td><a href="#" class="btn" data-action="decrementHours"><span class="'+f.options.icons.down+'"><\/span><\/a><\/td><td class="separator"><\/td><td>'+(f.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+f.options.icons.down+'"><\/span><\/a>':"")+"<\/td>"+(f.options.useSeconds?'<td class="separator"><\/td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+f.options.icons.down+'"><\/span><\/a><\/td>':"")+(f.use24hours?"":'<td class="separator"><\/td>')+'<\/tr><\/table><\/div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"><\/table><\/div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"><\/table><\/div>'+(f.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"><\/table><\/div>':"")};f.destroy=function(){et();ot();f.widget.remove();f.element.removeData("DateTimePicker");f.component&&f.component.removeData("DateTimePicker")};f.show=function(n){if(!e().prop("disabled")){if(f.options.useCurrent&&""===e().val()){if(1!==f.options.minuteStepping){var i=t(),r=f.options.minuteStepping;i.minutes(Math.round(i.minutes()/r)*r%60).seconds(0);f.setValue(i.format(f.format))}else f.setValue(t().format(f.format));o("",n.type)}n&&"click"===n.type&&f.isInput&&f.widget.hasClass("picker-open")||(f.widget.hasClass("picker-open")?(f.widget.hide(),f.widget.removeClass("picker-open")):(f.widget.show(),f.widget.addClass("picker-open")),f.height=f.component?f.component.outerHeight():f.element.outerHeight(),ut(),f.element.trigger({type:"dp.show",date:t(f.date)}),ni(),n&&p(n))}};f.disable=function(){var n=e();n.prop("disabled")||(n.prop("disabled",!0),et())};f.enable=function(){var n=e();n.prop("disabled")&&(n.prop("disabled",!1),ft())};f.hide=function(){for(var i,r=f.widget.find(".collapse"),n=0;n<r.length;n++)if(i=r.eq(n).data("collapse"),i&&i.transitioning)return;f.widget.hide();f.widget.removeClass("picker-open");f.viewMode=f.startViewMode;b();f.element.trigger({type:"dp.hide",date:t(f.date)});ot()};f.setValue=function(n){t.locale(f.options.language);n?f.unset=!1:(f.unset=!0,l());n=t.isMoment(n)?n.locale(f.options.language):n instanceof Date?t(n):t(n,f.format,f.options.useStrict);n.isValid()?(f.date=n,l(),f.viewDate=t({y:f.date.year(),M:f.date.month()}),v(),it()):tt(n)};f.getDate=function(){return f.unset?null:t(f.date)};f.setDate=function(n){var i=t(f.date);f.setValue(n?n:null);o(i,"function")};f.setDisabledDates=function(n){f.options.disabledDates=d(n);f.viewDate&&c()};f.setEnabledDates=function(n){f.options.enabledDates=d(n);f.viewDate&&c()};f.setMaxDate=function(n){void 0!==n&&(f.options.maxDate=t.isMoment(n)||n instanceof Date?t(n):t(n,f.format,f.options.useStrict),f.viewDate&&c())};f.setMinDate=function(n){void 0!==n&&(f.options.minDate=t.isMoment(n)||n instanceof Date?t(n):t(n,f.format,f.options.useStrict),f.viewDate&&c())};lt()};n.fn.datetimepicker=function(t){return this.each(function(){var i=n(this),u=i.data("DateTimePicker");u||i.data("DateTimePicker",new r(this,t))})};n.fn.datetimepicker.defaults={format:!1,pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,calendarWeeks:!1,minuteStepping:1,minDate:t({y:1900}),maxDate:t().add(100,"y"),showToday:!0,collapse:!0,language:t.locale(),defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:[],widgetParent:!1}});
/*!
 * Bootstrap-select v1.6.3 (http://silviomoreto.github.io/bootstrap-select/)
 *
 * Copyright 2013-2014 bootstrap-select
 * Licensed under MIT (https://github.com/silviomoreto/bootstrap-select/blob/master/LICENSE)
 */
(function(n){"use strict";function u(n,t){return n.toUpperCase().indexOf(t.toUpperCase())>-1}function i(t){return n.each([{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],function(){t=t.replace(this.re,this.ch)}),t}function r(n){var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(i).join("|")+")",u=new RegExp(r),f=new RegExp(r,"g"),t=n==null?"":""+n;return u.test(t)?t.replace(f,function(n){return i[n]}):t}function f(i,r){var u=arguments,o=i,i=u[0],r=u[1],f,e;return[].shift.apply(u),typeof i=="undefined"&&(i=o),e=this.each(function(){var s=n(this),e,o,c,h;if(s.is("select")){if(e=s.data("selectpicker"),o=typeof i=="object"&&i,e){if(o)for(h in o)o.hasOwnProperty(h)&&(e.options[h]=o[h])}else c=n.extend({},t.DEFAULTS,n.fn.selectpicker.defaults||{},s.data(),o),s.data("selectpicker",e=new t(this,c,r));typeof i=="string"&&(f=e[i]instanceof Function?e[i].apply(e,u):e.options[i])}}),typeof f!="undefined"?f:e}var t,e;n.expr[":"].icontains=function(t,i,r){return u(n(t).text(),r[3])};n.expr[":"].aicontains=function(t,i,r){return u(n(t).data("normalizedText")||n(t).text(),r[3])};t=function(i,r,u){u&&(u.stopPropagation(),u.preventDefault());this.$element=n(i);this.$newElement=null;this.$button=null;this.$menu=null;this.$lis=null;this.options=r;this.options.title===null&&(this.options.title=this.$element.attr("title"));this.val=t.prototype.val;this.render=t.prototype.render;this.refresh=t.prototype.refresh;this.setStyle=t.prototype.setStyle;this.selectAll=t.prototype.selectAll;this.deselectAll=t.prototype.deselectAll;this.destroy=t.prototype.remove;this.remove=t.prototype.remove;this.show=t.prototype.show;this.hide=t.prototype.hide;this.init()};t.VERSION="1.6.3";t.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:function(n){return n==1?"{0} item selected":"{0} items selected"},maxOptionsText:function(n,t){var i=[];return i[0]=n==1?"Limit reached ({n} item max)":"Limit reached ({n} items max)",i[1]=t==1?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)",i},selectAllText:"Select All",deselectAllText:"Deselect All",multipleSeparator:", ",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,searchAccentInsensitive:!1};t.prototype={constructor:t,init:function(){var i=this,t=this.$element.attr("id");this.$element.hide();this.multiple=this.$element.prop("multiple");this.autofocus=this.$element.prop("autofocus");this.$newElement=this.createView();this.$element.after(this.$newElement);this.$menu=this.$newElement.find("> .dropdown-menu");this.$button=this.$newElement.find("> button");this.$searchbox=this.$newElement.find("input");this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right");typeof t!="undefined"&&(this.$button.attr("data-id",t),n('label[for="'+t+'"]').click(function(n){n.preventDefault();i.$button.focus()}));this.checkDisabled();this.clickListener();this.options.liveSearch&&this.liveSearchListener();this.render();this.liHeight();this.setStyle();this.setWidth();this.options.container&&this.selectPosition();this.$menu.data("this",this);this.$newElement.data("this",this);this.options.mobile&&this.mobile()},createDropdown:function(){var t=this.multiple?" show-tick":"",i=this.$element.parent().hasClass("input-group")?" input-group-btn":"",r=this.autofocus?" autofocus":"",u=this.$element.parents().hasClass("form-group-lg")?" btn-lg":this.$element.parents().hasClass("form-group-sm")?" btn-sm":"",f=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;<\/button>'+this.options.header+"<\/div>":"",e=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="input-block-level form-control" autocomplete="off" /><\/div>':"",o=this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-block"><button class="actions-btn bs-select-all btn btn-sm btn-default">'+this.options.selectAllText+'<\/button><button class="actions-btn bs-deselect-all btn btn-sm btn-default">'+this.options.deselectAllText+"<\/button><\/div><\/div>":"",s='<div class="btn-group bootstrap-select'+t+i+'"><button type="button" class="btn dropdown-toggle selectpicker'+u+'" data-toggle="dropdown"'+r+'><span class="filter-option pull-left"><\/span>&nbsp;<span class="caret"><\/span><\/button><div class="dropdown-menu open">'+f+e+o+'<ul class="dropdown-menu inner selectpicker" role="menu"><\/ul><\/div><\/div>';return n(s)},createView:function(){var n=this.createDropdown(),t=this.createLi();return n.find("ul").append(t),n},reloadLi:function(){this.destroyLi();var n=this.createLi();this.$menu.find("ul").append(n)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var f=this,t=[],o=0,u=function(n,t,i){return"<li"+(typeof i!="undefined"?' class="'+i+'"':"")+(typeof t!="undefined"|null===t?' data-original-index="'+t+'"':"")+">"+n+"<\/li>"},e=function(n,t,u,e){var o=i(r(n));return'<a tabindex="0"'+(typeof t!="undefined"?' class="'+t+'"':"")+(typeof u!="undefined"?' style="'+u+'"':"")+(typeof e!="undefined"?'data-optgroup="'+e+'"':"")+' data-normalized-text="'+o+'">'+n+'<span class="'+f.options.iconBase+" "+f.options.tickIcon+' check-mark"><\/span><\/a>'};return this.$element.find("option").each(function(){var i=n(this),c=i.attr("class")||"",l=i.attr("style"),r=i.data("content")?i.data("content"):i.html(),y=typeof i.data("subtext")!="undefined"?'<small class="muted text-muted">'+i.data("subtext")+"<\/small>":"",h=typeof i.data("icon")!="undefined"?'<span class="'+f.options.iconBase+" "+i.data("icon")+'"><\/span> ':"",v=i.is(":disabled")||i.parent().is(":disabled"),s=i[0].index;if(h!==""&&v&&(h="<span>"+h+"<\/span>"),i.data("content")||(r=h+'<span class="text">'+r+y+"<\/span>"),!f.options.hideDisabled||!v)if(i.parent().is("optgroup")&&i.data("divider")!==!0){if(i.index()===0){o+=1;var a=i.parent().attr("label"),p=typeof i.parent().data("subtext")!="undefined"?'<small class="muted text-muted">'+i.parent().data("subtext")+"<\/small>":"",w=i.parent().data("icon")?'<span class="'+f.options.iconBase+" "+i.parent().data("icon")+'"><\/span> ':"";a=w+'<span class="text">'+a+p+"<\/span>";s!==0&&t.length>0&&t.push(u("",null,"divider"));t.push(u(a,null,"dropdown-header"))}t.push(u(e(r,"opt "+c,l,o),s))}else i.data("divider")===!0?t.push(u("",s,"divider")):i.data("hidden")===!0?t.push(u(e(r,c,l),s,"hide is-hidden")):t.push(u(e(r,c,l),s))}),this.multiple||this.$element.find("option:selected").length!==0||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),n(t.join(""))},findLis:function(){return this.$lis==null&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(t){var i=this,e,s,h;t!==!1&&this.$element.find("option").each(function(t){i.setDisabled(t,n(this).is(":disabled")||n(this).parent().is(":disabled"));i.setSelected(t,n(this).is(":selected"))});this.tabIndex();var o=this.options.hideDisabled?":not([disabled])":"",u=this.$element.find("option:selected"+o).map(function(){var t=n(this),u=t.data("icon")&&i.options.showIcon?'<i class="'+i.options.iconBase+" "+t.data("icon")+'"><\/i> ':"",r;return r=i.options.showSubtext&&t.attr("data-subtext")&&!i.multiple?' <small class="muted text-muted">'+t.data("subtext")+"<\/small>":"",t.data("content")&&i.options.showContent?t.data("content"):typeof t.attr("title")!="undefined"?t.attr("title"):u+t.html()+r}).toArray(),f=this.multiple?u.join(this.options.multipleSeparator):u[0];this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1&&(e=this.options.selectedTextFormat.split(">"),(e.length>1&&u.length>e[1]||e.length==1&&u.length>=2)&&(o=this.options.hideDisabled?", [disabled]":"",s=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+o).length,h=typeof this.options.countSelectedText=="function"?this.options.countSelectedText(u.length,s):this.options.countSelectedText,f=h.replace("{0}",u.length.toString()).replace("{1}",s.toString())));this.options.title=this.$element.attr("title");this.options.selectedTextFormat=="static"&&(f=this.options.title);f||(f=typeof this.options.title!="undefined"?this.options.title:this.options.noneSelectedText);this.$button.attr("title",r(f));this.$newElement.find(".filter-option").html(f)},setStyle:function(n,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|validate\[.*\]/gi,""));var i=n?n:this.options.style;t=="add"?this.$button.addClass(i):t=="remove"?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(){if(this.options.size!==!1){var t=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),n=t.addClass("open").find("> .dropdown-menu"),i=n.find("li").not(".divider").not(".dropdown-header").filter(":visible").children("a").outerHeight(),r=this.options.header?n.find(".popover-title").outerHeight():0,u=this.options.liveSearch?n.find(".bs-searchbox").outerHeight():0,f=this.options.actionsBox?n.find(".bs-actionsbox").outerHeight():0;t.remove();this.$newElement.data("liHeight",i).data("headerHeight",r).data("searchHeight",u).data("actionsHeight",f)}},setSize:function(){var e,b,k;this.findLis();var r=this,t=this.$menu,a=t.find(".inner"),d=this.$newElement.outerHeight(),v=this.$newElement.data("liHeight"),h=this.$newElement.data("headerHeight"),c=this.$newElement.data("searchHeight"),l=this.$newElement.data("actionsHeight"),g=this.$lis.filter(".divider").outerHeight(!0),u=parseInt(t.css("padding-top"))+parseInt(t.css("padding-bottom"))+parseInt(t.css("border-top-width"))+parseInt(t.css("border-bottom-width")),y=this.options.hideDisabled?", .disabled":"",p=n(window),o=u+parseInt(t.css("margin-top"))+parseInt(t.css("margin-bottom"))+2,i,f,s,w=function(){f=r.$newElement.offset().top-p.scrollTop();s=p.height()-f-d};if(w(),this.options.header&&t.css("padding-top",0),this.options.size=="auto"){e=function(){var n,e=r.$lis.not(".hide");w();i=s-o;r.options.dropupAuto&&r.$newElement.toggleClass("dropup",f>s&&i-o<t.height());r.$newElement.hasClass("dropup")&&(i=f-o);n=e.length+e.filter(".dropdown-header").length>3?v*3+o-2:0;t.css({"max-height":i+"px",overflow:"hidden","min-height":n+h+c+l+"px"});a.css({"max-height":i-h-c-l-u+"px","overflow-y":"auto","min-height":Math.max(n-u,0)+"px"})};e();this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",e);n(window).off("resize.getSize").on("resize.getSize",e);n(window).off("scroll.getSize").on("scroll.getSize",e)}else this.options.size&&this.options.size!="auto"&&t.find("li"+y).length>this.options.size&&(b=this.$lis.not(".divider"+y).find(" > *").slice(0,this.options.size).last().parent().index(),k=this.$lis.slice(0,b+1).filter(".divider").length,i=v*this.options.size+k*g+u,r.options.dropupAuto&&this.$newElement.toggleClass("dropup",f>s&&i<t.height()),t.css({"max-height":i+h+c+l+"px",overflow:"hidden"}),a.css({"max-height":i-u+"px","overflow-y":"auto"}))},setWidth:function(){if(this.options.width=="auto"){this.$menu.css("min-width","0");var n=this.$newElement.clone().appendTo("body"),t=n.find("> .dropdown-menu").css("width"),i=n.css("width","auto").find("> button").css("width");n.remove();this.$newElement.css("width",Math.max(parseInt(t),parseInt(i))+"px")}else this.options.width=="fit"?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&this.options.width!=="fit"&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var t=this,i=n("<div />"),r,f,u=function(n){i.addClass(n.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",n.hasClass("dropup"));r=n.offset();f=n.hasClass("dropup")?0:n[0].offsetHeight;i.css({top:r.top+f,left:r.left,width:n[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){t.isDisabled()||(u(n(this)),i.appendTo(t.options.container),i.toggleClass("open",!n(this).hasClass("open")),i.append(t.$menu))});n(window).resize(function(){u(t.$newElement)});n(window).on("scroll",function(){u(t.$newElement)});n("html").on("click",function(r){n(r.target).closest(t.$newElement).length<1&&i.removeClass("open")})},setSelected:function(n,t){this.findLis();this.$lis.filter('[data-original-index="'+n+'"]').toggleClass("selected",t)},setDisabled:function(n,t){this.findLis();t?this.$lis.filter('[data-original-index="'+n+'"]').addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):this.$lis.filter('[data-original-index="'+n+'"]').removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var n=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),this.$button.attr("tabindex")==-1&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex")));this.$button.click(function(){return!n.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var t=this;this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(n){n.stopPropagation()});this.$newElement.on("click",function(){t.setSize();t.options.liveSearch||t.multiple||setTimeout(function(){t.$menu.find(".selected a").focus()},10)});this.$menu.on("click","li a",function(i){var s=n(this),e=s.parent().data("originalIndex"),k=t.$element.val(),d=t.$element.prop("selectedIndex"),a,v,b;if(t.multiple&&i.stopPropagation(),i.preventDefault(),!t.isDisabled()&&!s.parent().hasClass("disabled")){var h=t.$element.find("option"),f=h.eq(e),w=f.prop("selected"),l=f.parent("optgroup"),r=t.options.maxOptions,u=l.data("maxOptions")||!1;if(t.multiple){if(f.prop("selected",!w),t.setSelected(e,!w),s.blur(),(r!==!1||u!==!1)&&(a=r<h.filter(":selected").length,v=u<l.find("option:selected").length,r&&a||u&&v))if(r&&r==1)h.prop("selected",!1),f.prop("selected",!0),t.$menu.find(".selected").removeClass("selected"),t.setSelected(e,!0);else if(u&&u==1)l.find("option:selected").prop("selected",!1),f.prop("selected",!0),b=s.data("optgroup"),t.$menu.find(".selected").has('a[data-optgroup="'+b+'"]').removeClass("selected"),t.setSelected(e,!0);else{var o=typeof t.options.maxOptionsText=="function"?t.options.maxOptionsText(r,u):t.options.maxOptionsText,y=o[0].replace("{n}",r),p=o[1].replace("{n}",u),c=n('<div class="notify"><\/div>');o[2]&&(y=y.replace("{var}",o[2][r>1?0:1]),p=p.replace("{var}",o[2][u>1?0:1]));f.prop("selected",!1);t.$menu.append(c);r&&a&&(c.append(n("<div>"+y+"<\/div>")),t.$element.trigger("maxReached.bs.select"));u&&v&&(c.append(n("<div>"+p+"<\/div>")),t.$element.trigger("maxReachedGrp.bs.select"));setTimeout(function(){t.setSelected(e,!1)},10);c.delay(750).fadeOut(300,function(){n(this).remove()})}}else h.prop("selected",!1),f.prop("selected",!0),t.$menu.find(".selected").removeClass("selected"),t.setSelected(e,!0);t.multiple?t.options.liveSearch&&t.$searchbox.focus():t.$button.focus();(k!=t.$element.val()&&t.multiple||d!=t.$element.prop("selectedIndex")&&!t.multiple)&&t.$element.change()}});this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(n){n.target==this&&(n.preventDefault(),n.stopPropagation(),t.options.liveSearch?t.$searchbox.focus():t.$button.focus())});this.$menu.on("click","li.divider, li.dropdown-header",function(n){n.preventDefault();n.stopPropagation();t.options.liveSearch?t.$searchbox.focus():t.$button.focus()});this.$menu.on("click",".popover-title .close",function(){t.$button.focus()});this.$searchbox.on("click",function(n){n.stopPropagation()});this.$menu.on("click",".actions-btn",function(i){t.options.liveSearch?t.$searchbox.focus():t.$button.focus();i.preventDefault();i.stopPropagation();n(this).is(".bs-select-all")?t.selectAll():t.deselectAll();t.$element.change()});this.$element.change(function(){t.render(!1)})},liveSearchListener:function(){var t=this,u=n('<li class="no-results"><\/li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){t.$menu.find(".active").removeClass("active");!t.$searchbox.val()||(t.$searchbox.val(""),t.$lis.not(".is-hidden").removeClass("hide"),!u.parent().length||u.remove());t.multiple||t.$menu.find(".selected").addClass("active");setTimeout(function(){t.$searchbox.focus()},10)});this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(n){n.stopPropagation()});this.$searchbox.on("input propertychange",function(){t.$searchbox.val()?(t.options.searchAccentInsensitive?t.$lis.not(".is-hidden").removeClass("hide").find("a").not(":aicontains("+i(t.$searchbox.val())+")").parent().addClass("hide"):t.$lis.not(".is-hidden").removeClass("hide").find("a").not(":icontains("+t.$searchbox.val()+")").parent().addClass("hide"),t.$menu.find("li").filter(":visible:not(.no-results)").length?!u.parent().length||u.remove():(!u.parent().length||u.remove(),u.html(t.options.noneResultsText+' "'+r(t.$searchbox.val())+'"').show(),t.$menu.find("li").last().after(u))):(t.$lis.not(".is-hidden").removeClass("hide"),!u.parent().length||u.remove());t.$menu.find("li.active").removeClass("active");t.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus();n(this).focus()})},val:function(n){return typeof n!="undefined"?(this.$element.val(n),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis();this.$lis.not(".divider").not(".disabled").not(".selected").filter(":visible").find("a").click()},deselectAll:function(){this.findLis();this.$lis.not(".divider").not(".disabled").filter(".selected").filter(":visible").find("a").click()},keydown:function(t){var e=n(this),c=e.is("input")?e.parent().parent():e.parent(),f,r=c.data("this"),u,h,l,a,y,p,b,s,w={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},v,o,k;(r.options.liveSearch&&(c=e.parent().parent()),r.options.container&&(c=r.$menu),f=n("[role=menu] li a",c),s=r.$menu.parent().hasClass("open"),!s&&/([0-9]|[A-z])/.test(String.fromCharCode(t.keyCode))&&(r.options.container?r.$newElement.trigger("click"):(r.setSize(),r.$menu.parent().addClass("open"),s=!0),r.$searchbox.focus()),r.options.liveSearch&&(/(^9$|27)/.test(t.keyCode.toString(10))&&s&&r.$menu.find(".active").length===0&&(t.preventDefault(),r.$menu.parent().removeClass("open"),r.$button.focus()),f=n("[role=menu] li:not(.divider):not(.dropdown-header):visible",c),e.val()||/(38|40)/.test(t.keyCode.toString(10))||f.filter(".active").length===0&&(f=r.options.searchAccentInsensitive?r.$newElement.find("li").filter(":aicontains("+i(w[t.keyCode])+")"):r.$newElement.find("li").filter(":icontains("+w[t.keyCode]+")"))),f.length)&&(/(38|40)/.test(t.keyCode.toString(10))?(u=f.index(f.filter(":focus")),l=f.parent(":not(.disabled):visible").first().index(),a=f.parent(":not(.disabled):visible").last().index(),h=f.eq(u).parent().nextAll(":not(.disabled):visible").eq(0).index(),y=f.eq(u).parent().prevAll(":not(.disabled):visible").eq(0).index(),p=f.eq(h).parent().prevAll(":not(.disabled):visible").eq(0).index(),r.options.liveSearch&&(f.each(function(t){n(this).is(":not(.disabled)")&&n(this).data("index",t)}),u=f.index(f.filter(".active")),l=f.filter(":not(.disabled):visible").first().data("index"),a=f.filter(":not(.disabled):visible").last().data("index"),h=f.eq(u).nextAll(":not(.disabled):visible").eq(0).data("index"),y=f.eq(u).prevAll(":not(.disabled):visible").eq(0).data("index"),p=f.eq(h).prevAll(":not(.disabled):visible").eq(0).data("index")),b=e.data("prevIndex"),t.keyCode==38&&(r.options.liveSearch&&(u-=1),u!=p&&u>y&&(u=y),u<l&&(u=l),u==b&&(u=a)),t.keyCode==40&&(r.options.liveSearch&&(u+=1),u==-1&&(u=0),u!=p&&u<h&&(u=h),u>a&&(u=a),u==b&&(u=l)),e.data("prevIndex",u),r.options.liveSearch?(t.preventDefault(),e.is(".dropdown-toggle")||(f.removeClass("active"),f.eq(u).addClass("active").find("a").focus(),e.focus())):f.eq(u).focus()):e.is("input")||(v=[],f.each(function(){n(this).parent().is(":not(.disabled)")&&n.trim(n(this).text().toLowerCase()).substring(0,1)==w[t.keyCode]&&v.push(n(this).parent().index())}),o=n(document).data("keycount"),o++,n(document).data("keycount",o),k=n.trim(n(":focus").text().toLowerCase()).substring(0,1),k!=w[t.keyCode]?(o=1,n(document).data("keycount",o)):o>=v.length&&(n(document).data("keycount",0),o>v.length&&(o=1)),f.eq(v[o-1]).focus()),(/(13|32)/.test(t.keyCode.toString(10))||/(^9$)/.test(t.keyCode.toString(10))&&r.options.selectOnTab)&&s&&(/(32)/.test(t.keyCode.toString(10))||t.preventDefault(),r.options.liveSearch?/(32)/.test(t.keyCode.toString(10))||(r.$menu.find(".active a").click(),e.focus()):n(":focus").click(),n(document).data("keycount",0)),(/(^9$|27)/.test(t.keyCode.toString(10))&&s&&(r.multiple||r.options.liveSearch)||/(27)/.test(t.keyCode.toString(10))&&!s)&&(r.$menu.parent().removeClass("open"),r.$button.focus()))},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement);this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null;this.reloadLi();this.render();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight()},update:function(){this.reloadLi();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight()},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove();this.$element.remove()}};e=n.fn.selectpicker;n.fn.selectpicker=f;n.fn.selectpicker.Constructor=t;n.fn.selectpicker.noConflict=function(){return n.fn.selectpicker=e,this};n(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",t.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",function(n){n.stopPropagation()});n(window).on("load.bs.select.data-api",function(){n(".selectpicker").each(function(){var t=n(this);f.call(t,t.data())})})})(jQuery);Backbone.View.prototype.destroy=function(){this.views!=undefined&&(_.invoke(this.views,"destroy"),this.views.length=0);this.$el.removeData().unbind();this.remove();this.$el.find("*").remove();Backbone.View.prototype.remove.call(this);this.onDestroy&&this.onDestroy()};$(document).ready(function(){var n=window.location;FoodParent.Setting.getInstance().setBaseUrl(n.origin+window.location.pathname);FoodParent.View.setElement({el:$("#wrapper-main")});Backbone.history.start()});__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(i,r){t.call(this,i,r);this.url="food.php";this.url=n.Setting.getInstance().getPhpDir()+this.url;this.defaults={id:0,name:"",icon:"",description:"",updated:moment(new Date).format(n.Setting.getInstance().getDateTimeFormat())}}return __extends(i,t),i.prototype.parse=function(i,r){return i.id!=null&&(i.id=parseInt(i.id)),i.updated=moment(i.updated).format(n.Setting.getInstance().getDateTimeFormat()),t.prototype.parse.call(this,i,r)},i.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),n},i.prototype.getId=function(){return Math.floor(this.id)},i.prototype.getName=function(){return this.get("name")},i.prototype.getIconPath=function(){return n.Setting.getInstance().getCoreImageDir()+this.get("icon")},i}(Backbone.Model),i;n.Food=t;i=function(i){function r(r,u){i.call(this,r,u);this.url="foods.php";this.url=n.Setting.getInstance().getPhpDir()+this.url;this.model=t}return __extends(r,i),r.prototype.getUndetectedIds=function(n){var i=this,t=Array();return t=n,$.each(i.models,function(n,i){var r=t.indexOf(i.getId());r!=-1&&t.splice(r,1)}),t},r.prototype.toArray=function(){var t=this,n=[];return $.each(t.models,function(t,i){n.push([i.getName(),i.getId()])}),n},r}(Backbone.Collection);n.Foods=i}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(i,r){t.call(this,i,r);this.url="tree.php";this.isSavable=!0;var u=this;this.url=n.Setting.getInstance().getPhpDir()+this.url;this.defaults={id:0,lat:0,lng:0,address:"",food:0,type:0,flag:0,owner:0,ownership:0,updated:moment(new Date).format(n.Setting.getInstance().getDateTimeFormat())};u.off("change");u.on("change",function(n){u.isSavable!=!1&&(u.isSavable=!1,n.save({},{wait:!0,success:function(n){console.log(n);u.isSavable=!0},error:function(){}}))})}return __extends(i,t),i.prototype.parse=function(i,r){return i.id!=null&&(i.id=parseInt(i.id)),i.lat=parseFloat(i.lat),i.lng=parseFloat(i.lng),i.food=parseInt(i.food),i.type=parseInt(i.type),i.flag=parseInt(i.flag),i.owner=parseInt(i.owner),i.ownership=parseInt(i.ownership),i.updated=moment(i.updated).format(n.Setting.getInstance().getDateTimeFormat()),i.owners=n.Model.getInstance().getAdopts().getOwnerIds(i.id),t.prototype.parse.call(this,i,r)},i.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),delete n.owners,n},i.prototype.getFoodId=function(){return this.get("food")},i.prototype.getFlagId=function(){return this.get("flag")},i.prototype.getOwnershipId=function(){return Math.floor(this.get("ownership"))},i.prototype.getName=function(){var n=this;return" #"+n.getId()},i.prototype.getLat=function(){return parseFloat(this.get("lat"))},i.prototype.getLng=function(){return parseFloat(this.get("lng"))},i.prototype.getId=function(){return Math.floor(this.id)},i.prototype.getLocation=function(){return new L.LatLng(this.getLat(),this.getLng())},i}(Backbone.Model),i;n.Tree=t;i=function(i){function r(r,u){i.call(this,r,u);this.url="trees.php";this.url=n.Setting.getInstance().getPhpDir()+this.url;this.model=t}return __extends(r,i),r.prototype.getIds=function(){var t=this,n=Array();return $.each(t.models,function(t,i){n.indexOf(i.getId())==-1&&n.push(i.getId())}),n},r.prototype.getFoodIds=function(){var t=this,n=Array();return $.each(t.models,function(t,i){n.indexOf(i.getFoodId())==-1&&n.push(i.getFoodId())}),n},r.prototype.getFlagIds=function(){var t=this,n=Array();return $.each(t.models,function(t,i){n.indexOf(i.getFlagId())==-1&&n.push(i.getFlagId())}),n},r.prototype.filterById=function(n){var t=this,i=new r(t.models);return i.reset(_.map(n,function(n){return this.get(n)},this))},r.prototype.getAssigned=function(n){var t=this;return $.each(t.models,function(t,i){i.get("owners").length>=1&&n.where({id:i.getId()})!=undefined&&n.add(i)}),n},r.prototype.getUnassigned=function(n){var t=this;return $.each(t.models,function(t,i){i.get("owners").length==0&&n.where({id:i.getId()})!=undefined&&n.add(i)}),n},r.prototype.getFromFoodId=function(n,t){var i=this;return $.each(i.models,function(i,r){r.getFoodId()==t&&n.where({id:r.getId()})!=undefined&&n.add(r)}),n},r}(Backbone.Collection);n.Trees=i}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(i,r){t.call(this,i,r);this.url="flag.php";this.url=n.Setting.getInstance().getPhpDir()+this.url;this.defaults={id:0,name:""}}return __extends(i,t),i.prototype.parse=function(n,i){return n.id!=null&&(n.id=parseInt(n.id)),t.prototype.parse.call(this,n,i)},i.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),n},i.prototype.getId=function(){return this.id},i.prototype.getName=function(){return this.get("name")},i}(Backbone.Model),i;n.Flag=t;i=function(i){function r(r,u){i.call(this,r,u);this.url="flags.php";this.url=n.Setting.getInstance().getPhpDir()+this.url;this.model=t}return __extends(r,i),r}(Backbone.Collection);n.Flags=i}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(i,r){t.call(this,i,r);this.url="ownership.php";this.url=n.Setting.getInstance().getPhpDir()+this.url;this.defaults={id:0,name:""}}return __extends(i,t),i.prototype.parse=function(n,i){return n.id!=null&&(n.id=parseInt(n.id)),t.prototype.parse.call(this,n,i)},i.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),n},i.prototype.getId=function(){return this.id},i.prototype.getName=function(){return this.get("name")},i}(Backbone.Model),i;n.Ownership=t;i=function(i){function r(r,u){i.call(this,r,u);this.url="ownerships.php";this.url=n.Setting.getInstance().getPhpDir()+this.url;this.model=t}return __extends(r,i),r}(Backbone.Collection);n.Ownerships=i}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var r,u,t,i;(function(n){n[n.NONE=0]="NONE";n[n.DESCENDING=1]="DESCENDING";n[n.ASCENDING=2]="ASCENDING"})(n.SortType||(n.SortType={}));r=n.SortType,function(n){n[n.NONE=0]="NONE";n[n.IMAGE=1]="IMAGE";n[n.INFO=2]="INFO";n[n.PICKUP=3]="PICKUP"}(n.NoteType||(n.NoteType={}));u=n.NoteType;t=function(t){function i(i,r){t.call(this,i,r);this.url="note.php";this.url=n.Setting.getInstance().getPhpDir()+this.url;this.defaults={id:0,type:0,tree:0,person:0,comment:"",picture:"",rate:0,date:moment(new Date).format(n.Setting.getInstance().getDateTimeFormat())}}return __extends(i,t),i.prototype.parse=function(i,r){return i.id!=null&&(i.id=parseInt(i.id)),i.type=parseFloat(i.type),i.tree=parseFloat(i.tree),i.person=parseInt(i.person),i.rate=parseFloat(i.rate),i.date=moment(i.date).format(n.Setting.getInstance().getDateTimeFormat()),t.prototype.parse.call(this,i,r)},i.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),n},i.prototype.getId=function(){return Math.floor(this.id)},i.prototype.getComment=function(){return this.get("comment")},i.prototype.getPicturePath=function(){return n.Setting.getInstance().getContentsImageDir()+this.get("picture")},i.prototype.getFakePicturePath=function(){return n.Setting.getInstance().getCoreImageDir()+"placeholder-image.jpg"},i.prototype.getFormattedDate=function(){return moment(this.get("date")).format(n.Setting.getInstance().getDateFormat())},i.prototype.getFormattedDateTime=function(){return moment(this.get("date")).format(n.Setting.getInstance().getDateTimeFormat())},i.prototype.getDateValueOf=function(){return moment(this.get("date")).valueOf()},i.prototype.getRate=function(){return parseFloat(this.get("rate"))},i}(Backbone.Model);n.Note=t;i=function(i){function r(r,u){i.call(this,r,u);this.url="notes.php";this.sortType=0;this.url=n.Setting.getInstance().getPhpDir()+this.url;this.model=t}return __extends(r,i),r.prototype.comparator=function(n){var t=this;switch(t.sortType){case 0:return 0;case 2:return n.getDateValueOf();case 1:return-n.getDateValueOf()}},r.prototype.sortByDescendingDate=function(){var n=this;n.sortType=1;n.sort()},r.prototype.sortByAscendingDate=function(){var n=this;n.sortType=2;n.sort()},r}(Backbone.Collection);n.Notes=i}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(n){function t(t,i){n.call(this,t,i);this.defaults={id:0,name:""}}return __extends(t,n),t.prototype.parse=function(t,i){return t.id!=null&&(t.id=parseInt(t.id)),n.prototype.parse.call(this,t,i)},t.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),n},t.prototype.getId=function(){return Math.floor(this.id)},t.prototype.getName=function(){return this.get("name")},t}(Backbone.Model),i;n.Auth=t;i=function(n){function i(i,r){n.call(this,i,r);this.model=t}return __extends(i,n),i.prototype.toArray=function(){var t=this,n=[];return $.each(t.models,function(t,i){n.push([i.getName(),i.getId()])}),console.log(n),n},i}(Backbone.Collection);n.Auths=i}(FoodParent||(FoodParent={})),function(n){var t=function(){function t(){var n=this;if(t._instance)throw new Error("Error: Instantiation failed: Use Model.getInstance() instead of new.");t._instance=this;n.fetchAuths()}return t.getInstance=function(){return t._instance},t.prototype.getFoods=function(){return this.foods},t.prototype.getTrees=function(){return this.trees},t.prototype.getOwnerships=function(){return this.ownerships},t.prototype.getFlags=function(){return this.flags},t.prototype.getNotes=function(){return this.notes},t.prototype.getAuths=function(){return this.auths},t.prototype.getPersons=function(){return this.persons},t.prototype.getAdopts=function(){return this.adopts},t.prototype.fetchAuths=function(){var t,i,r,u,f;console.log("Fetch Authorizations");t=this;t.auths==undefined&&(t.auths=new n.Auths,i=new n.Auth({id:1,name:"ConcreteJungle"}),i.id=1,r=new n.Auth({id:2,name:"Participant"}),r.id=2,u=new n.Auth({id:3,name:"Manager"}),u.id=3,f=new n.Auth({id:4,name:"Unkown"}),f.id=4,t.auths.add(i),t.auths.add(r),t.auths.add(u),t.auths.add(f))},t.prototype.fetchAdopts=function(t){var i=this;i.adopts==undefined&&(i.adopts=new n.Adopts);i.adopts.fetch({remove:!0,processData:!0,data:{},success:function(n){console.log("success fetch with "+n.models.length+" adopt items");t!=undefined&&t()},error:function(){console.log("error while fetching item data from the server")}})},t.prototype.fetchPersons=function(t){var i=this;i.persons==undefined&&(i.persons=new n.Persons);i.persons.fetch({remove:!0,processData:!0,data:{},success:function(n){console.log("success fetch with "+n.models.length+" items");t!=undefined&&t()},error:function(){console.log("error while fetching item data from the server")}})},t.prototype.fetchFood=function(t){var i=this;i.foods==undefined&&(i.foods=new n.Foods);i.foods.fetch({remove:!0,processData:!0,data:{id:t},success:function(n){console.log("success fetch with "+n.models.length+" items");console.log(i.foods)},error:function(){console.log("error while fetching item data from the server")}})},t.prototype.fetchTree=function(t,i){var r=this;r.trees==undefined&&(r.trees=new n.Trees);r.foods==undefined&&(r.foods=new n.Foods);r.trees.fetch({remove:!0,processData:!0,data:{id:t,south:0,north:0,west:0,east:0},success:function(n){console.log("success fetch with "+n.models.length+" trees");r.fetchFoods(r.foods.getUndetectedIds(r.trees.getFoodIds()),i)},error:function(){console.log("error while fetching item data from the server");i!=undefined&&i()}})},t.prototype.fetchTrees=function(t,i){var r=this;r.trees==undefined&&(r.trees=new n.Trees);r.foods==undefined&&(r.foods=new n.Foods);r.trees.fetch({remove:!0,processData:!0,data:{id:-1,south:t.getSouthEast().lat,north:t.getNorthEast().lat,west:t.getSouthWest().lng,east:t.getSouthEast().lng},success:function(n){console.log("success fetch with "+n.models.length+" trees");r.fetchFoods(r.foods.getUndetectedIds(r.trees.getFoodIds()));i!=undefined&&i()},error:function(){console.log("error while fetching item data from the server")}})},t.prototype.fetchFoods=function(t,i){var r=this;r.foods==undefined&&(r.foods=new n.Foods);t.length!=0?r.foods.fetch({remove:!0,processData:!0,data:{ids:t.toString()},success:function(t){console.log("success fetch with "+t.models.length+" foods");n.Controller.getInstance().renderTreesOnMap();i!=undefined&&i()},error:function(){console.log("error while fetching item data from the server")}}):(n.Controller.getInstance().renderTreesOnMap(),i!=undefined&&i())},t.prototype.fetchFoods2=function(t){var i=this;i.foods==undefined&&(i.foods=new n.Foods);i.foods.fetch({remove:!0,processData:!0,data:{ids:[-1].toString()},success:function(n){console.log("success fetch with "+n.models.length+" foods");t!=undefined&&t()},error:function(){console.log("error while fetching item data from the server")}})},t.prototype.fetchFlags=function(t,i){var r=this;r.flags==undefined?(r.flags=new n.Flags,r.flags.fetch({remove:!0,processData:!0,data:{},success:function(n){console.log("success fetch with "+n.models.length+" flags");t!=undefined&&t(i)},error:function(){console.log("error while fetching item data from the server")}})):t!=undefined&&t(i)},t.prototype.fetchTypes=function(t,i){var r=this;r.ownerships==undefined?(r.ownerships=new n.Ownerships,r.ownerships.fetch({remove:!0,processData:!0,data:{},success:function(n){console.log("success fetch with "+n.models.length+" types");t!=undefined&&t(i)},error:function(){console.log("error while fetching item data from the server")}})):t!=undefined&&t(i)},t.prototype.fetchNotes=function(t,i,r,u){var f=this;f.notes==undefined&&(f.notes=new n.Notes);t.length!=0?f.notes.fetch({remove:!0,processData:!0,data:{trees:t.toString(),size:i,offset:r},success:function(n){console.log("success fetch with "+n.models.length+" notes");u!=undefined&&u()},error:function(){console.log("error while fetching item data from the server")}}):u!=undefined&&u()},t._instance=new t,t}();n.Model=t}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(i,r){t.call(this,i,r);this.url="person.php";this.isSavable=!0;var u=this;this.url=n.Setting.getInstance().getPhpDir()+this.url;this.defaults={id:0,auth:0,name:"",address:"",contact:"",neightboorhood:"",updated:moment(new Date).format(n.Setting.getInstance().getDateTimeFormat())};u.off("change");u.on("change",function(n){u.isSavable!=!1&&(u.isSavable=!1,n.save({},{wait:!0,success:function(n){console.log(n);n.isSavable=!0},error:function(){}}))})}return __extends(i,t),i.prototype.parse=function(i,r){return i.id!=null&&(i.id=parseInt(i.id)),i.auth=parseInt(i.auth),i.updated=moment(i.updated).format(n.Setting.getInstance().getDateTimeFormat()),i.trees=n.Model.getInstance().getAdopts().getTreeIds(i.id),t.prototype.parse.call(this,i,r)},i.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),delete n.trees,n},i.prototype.getId=function(){return Math.floor(this.id)},i.prototype.getAuth=function(){var n=this;return Math.floor(this.get("auth"))},i.prototype.getName=function(){var n=this;return this.get("name")},i.prototype.getAddress=function(){var n=this;return this.get("address")},i.prototype.getContact=function(){var n=this;return this.get("contact")},i.prototype.getNeightboorhood=function(){var n=this;return this.get("neightboorhood")},i}(Backbone.Model),i;n.Person=t;i=function(i){function r(r,u){i.call(this,r,u);this.url="persons.php";this.url=n.Setting.getInstance().getPhpDir()+this.url;this.model=t}return __extends(r,i),r.prototype.getIds=function(){var t=this,n=Array();return $.each(t.models,function(t,i){n.indexOf(i.getId())==-1&&n.push(i.getId())}),n},r.prototype.getAssigned=function(n){var t=this;return $.each(t.models,function(t,i){i.get("trees").length>=1&&n.where({id:i.getId()})!=undefined&&n.add(i)}),n},r.prototype.getUnassigned=function(n){var t=this;return $.each(t.models,function(t,i){i.get("trees").length==0&&n.where({id:i.getId()})!=undefined&&n.add(i)}),n},r.prototype.updateTrees=function(){var t=this;$.each(t.models,function(t,i){i.attributes.trees=n.Model.getInstance().getAdopts().getTreeIds(i.id)})},r}(Backbone.Collection);n.Persons=i}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(i,r){t.call(this,i,r);this.url="adopt.php";this.isSavable=!0;var u=this;this.url=n.Setting.getInstance().getPhpDir()+this.url;this.defaults={id:0,tree:"",owner:"",updated:moment(new Date).format(n.Setting.getInstance().getDateTimeFormat())};u.off("change");u.on("change",function(n){u.isSavable!=!1&&(u.isSavable=!1,n.save({},{wait:!0,success:function(n){console.log(n);n.isSavable=!0},error:function(){}}))})}return __extends(i,t),i.prototype.parse=function(i,r){return i.id!=null&&(i.id=parseInt(i.id)),i.tree=parseInt(i.tree),i.owner=parseInt(i.owner),i.updated=moment(i.updated).format(n.Setting.getInstance().getDateTimeFormat()),t.prototype.parse.call(this,i,r)},i.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),n},i.prototype.getId=function(){return Math.floor(this.id)},i.prototype.getTreeId=function(){var n=this;return Math.floor(this.get("tree"))},i.prototype.getOwnerId=function(){var n=this;return Math.floor(this.get("owner"))},i}(Backbone.Model),i;n.Adopt=t;i=function(i){function r(r,u){i.call(this,r,u);this.url="adopts.php";this.url=n.Setting.getInstance().getPhpDir()+this.url;this.model=t}return __extends(r,i),r.prototype.getIds=function(){var t=this,n=Array();return $.each(t.models,function(t,i){n.indexOf(i.getId())==-1&&n.push(i.getId())}),n},r.prototype.getTreeIds=function(n){var i=this,t=Array();return $.each(i.models,function(i,r){r.getOwnerId()==n&&t.indexOf(r.getTreeId())==-1&&t.push(r.getTreeId())}),t},r.prototype.getOwnerIds=function(n){var i=this,t=Array();return $.each(i.models,function(i,r){r.getTreeId()==n&&t.indexOf(r.getOwnerId())==-1&&t.push(r.getOwnerId())}),t},r}(Backbone.Collection);n.Adopts=i}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(){function t(){if(this.bDebug=!0,this.fetchTypes=function(t,i){n.Model.getInstance().fetchTypes(t,i)},t._instance)throw new Error("Error: Instantiation failed: Use Controller.getInstance() instead of new.");t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.loadTreesPage=function(){var t=this;this.bDebug&&console.log("loadTreesPage()");n.View.getInstance().SetViewType(1);n.View.getInstance().render()},t.prototype.loadTreePage=function(t){var i=this;i.current=t;this.bDebug&&console.log("loadTreePage("+t+")");n.View.getInstance().SetViewType(2);n.View.getInstance().render()},t.prototype.loadPeoplePage=function(){this.bDebug&&console.log("loadNotePage()");n.View.getInstance().SetViewType(3);n.View.getInstance().render()},t.prototype.updateGeoLocation=function(n){navigator.geolocation&&navigator.geolocation.getCurrentPosition(n)},t.prototype.fetchFood=function(t){n.Model.getInstance().fetchFood(t)},t.prototype.fetchTree=function(t,i){n.Model.getInstance().fetchTree(t,i)},t.prototype.fetchTrees=function(t){n.Model.getInstance().fetchTrees(t)},t.prototype.fetchFlags=function(t,i){n.Model.getInstance().fetchFlags(t,i)},t.prototype.fetchNotes=function(t,i,r,u){n.Model.getInstance().fetchNotes(t,i,r,u)},t.prototype.setMapView=function(t){n.View.getInstance().setMapView(t)},t.prototype.renderTreesOnMap=function(){n.View.getInstance().renderTreesOnMap(n.Model.getInstance().getTrees())},t.prototype.getCurrent=function(){return Math.floor(this.current)},t._instance=new t,t}(),i;n.Controller=t;i=function(n){function i(t){if(i._instance)throw new Error("Error: Instantiation failed: Use Router.getInstance() instead of new.");i._instance=this;this.routes={"":"home",trees:"trees","tree/:id":"tree",people:"people",about:"about"};n.call(this,t)}return __extends(i,n),i.getInstance=function(){return i._instance},i.prototype.home=function(){this.navigate("trees",{trigger:!0,replace:!0})},i.prototype.trees=function(){console.log("we have loaded the trees");t.getInstance().loadTreesPage()},i.prototype.tree=function(n){console.log("we have loaded the tree id: "+n);t.getInstance().loadTreePage(n)},i.prototype.people=function(){console.log("we have loaded the people");t.getInstance().loadPeoplePage()},i.prototype.about=function(){console.log("we have loaded the note")},i._instance=new i,i}(Backbone.Router);n.Router=i}(FoodParent||(FoodParent={})),function(n){var t=function(){function n(){if(n._instance)throw new Error("Error: Instantiation failed: Use Setting.getInstance() instead of new.");n._instance=this}return n.getInstance=function(){return n._instance},n.prototype.setBaseUrl=function(n){return this.baseUrl=n},n.prototype.getBaseUrl=function(){return this.baseUrl},n.prototype.getPhpDir=function(){return this.baseUrl+"core/php/"},n.prototype.getContentsImageDir=function(){return this.baseUrl+"contents/image/"},n.prototype.getCoreImageDir=function(){return this.baseUrl+"core/image/"},n.prototype.getMarkerShadowPath=function(){return this.getCoreImageDir()+"marker-shadow.png"},n.prototype.getTileMapAddress=function(){return"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"},n.prototype.getDefaultMapZoomLevel=function(){return 10},n.prototype.getDefaultSmallMapZoomLevel=function(){return 11},n.prototype.getMapMinZoomLevel=function(){return 5},n.prototype.getMapMaxZoomLevel=function(){return 19},n.prototype.getDateTimeFormat=function(){return"YYYY-MM-DD HH:mm:ss"},n.prototype.getDateFormat=function(){return"DD MMM"},n.prototype.getResetUpdateDelay=function(){return 100},n.prototype.getNumRecentActivityShown=function(){return 5},n._instance=new n,n}();n.Setting=t}(FoodParent||(FoodParent={})),function(n){var t=function(){function t(){if(t._instance)throw new Error("Error: Instantiation failed: Use HeaderFactory.getInstance() instead of new.");t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.create=function(t){return new n.HeaderView({el:t})},t._instance=new t,t}();n.HeaderFactory=t}(FoodParent||(FoodParent={})),function(n){var t=function(){function t(){if(t._instance)throw new Error("Error: Instantiation failed: Use TreesViewFactory.getInstance() instead of new.");t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.create=function(t){return new n.TreesView({el:t})},t._instance=new t,t}();n.TreesViewFactory=t}(FoodParent||(FoodParent={})),function(n){var t=function(){function t(){if(t._instance)throw new Error("Error: Instantiation failed: Use MapViewFactory.getInstance() instead of new.");t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.create=function(t){var i=new n.MapView({el:t});return i.setIsCentered(!0),i},t.prototype.create2=function(t){var i=new n.MapView({el:t});return i.setIsCentered(!1),i},t._instance=new t,t}();n.MapViewFactory=t}(FoodParent||(FoodParent={})),function(n){var t=function(){function t(){if(t._instance)throw new Error("Error: Instantiation failed: Use MarkerViewFactory.getInstance() instead of new.");t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.create=function(t){var i=new n.MarkerView,r=n.Model.getInstance().getFoods().findWhere({id:t.getFoodId()}),u=new L.Icon({iconUrl:r.getIconPath(),shadowUrl:n.Setting.getInstance().getMarkerShadowPath(),iconSize:new L.Point(40,40),iconAnchor:new L.Point(20,40),shadowAnchor:new L.Point(9,38),popupAnchor:new L.Point(0,-40)});return i.create(t.getId(),r.getName()+t.getName(),u,t.getLat(),t.getLng()),i},t.prototype.create2=function(t){var i=new n.MarkerView,r=n.Model.getInstance().getFoods().findWhere({id:t.getFoodId()}),u=new L.Icon({iconUrl:r.getIconPath(),shadowUrl:n.Setting.getInstance().getMarkerShadowPath(),iconSize:new L.Point(40,40),iconAnchor:new L.Point(20,40),shadowAnchor:new L.Point(9,38),popupAnchor:new L.Point(0,-40)});return i.create2(t.getId(),r.getName()+t.getName(),u,t.getLat(),t.getLng()),i},t._instance=new t,t}();n.MarkerViewFactory=t}(FoodParent||(FoodParent={})),function(n){var t=function(){function t(){if(t._instance)throw new Error("Error: Instantiation failed: Use SideViewFactory.getInstance() instead of new.");t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.create=function(t){return new n.SideInfoView({el:t})},t._instance=new t,t}();n.SideViewFactory=t}(FoodParent||(FoodParent={})),function(n){var t=function(){function t(){if(t._instance)throw new Error("Error: Instantiation failed: Use TreeViewFactory.getInstance() instead of new.");t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.create=function(t,i){var r=new n.TreeView({el:t});return r.setCurrent(i),r},t._instance=new t,t}();n.TreeViewFactory=t}(FoodParent||(FoodParent={})),function(n){var t=function(){function t(){if(t._instance)throw new Error("Error: Instantiation failed: Use TreeInfoViewFactory.getInstance() instead of new.");t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.create=function(t){return new n.TreeInfoView({el:t})},t._instance=new t,t}();n.TreeInfoViewFactory=t}(FoodParent||(FoodParent={})),function(n){var t=function(){function t(){if(t._instance)throw new Error("Error: Instantiation failed: Use CoverflowViewFactory.getInstance() instead of new.");t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.create=function(t){return new n.CoverflowView({el:t})},t._instance=new t,t}();n.CoverflowViewFactory=t}(FoodParent||(FoodParent={})),function(n){var i=function(){function t(){if(t._instance)throw new Error("Error: Instantiation failed: Use PeopleViewFactory.getInstance() instead of new.");t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.create=function(t){return new n.PeopleView({el:t})},t._instance=new t,t}(),t;n.PeopleViewFactory=i;t=function(){function t(){if(t._instance)throw new Error("Error: Instantiation failed: Use PersonsViewFactory.getInstance() instead of new.");t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.create=function(t){return new n.PersonsView({el:t})},t._instance=new t,t}();n.PersonsViewFactory=t}(FoodParent||(FoodParent={})),function(n){var t=function(){function t(){if(t._instance)throw new Error("Error: Instantiation failed: Use TreeDetailViewFactory.getInstance() instead of new.");t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.create=function(t){return new n.TreeDetailView({el:t})},t._instance=new t,t}();n.TreeDetailViewFactory=t}(FoodParent||(FoodParent={})),function(n){var t=function(){function t(){if(t._instance)throw new Error("Error: Instantiation failed: Use PopupViewFactory.getInstance() instead of new.");t._instance=this}return t.getInstance=function(){return t._instance},t.prototype.create=function(t){return new n.PopupView({el:t})},t._instance=new t,t}();n.PopupViewFactory=t}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){(function(n){n[n.NONE=0]="NONE";n[n.TREES=1]="TREES";n[n.TREE=2]="TREE";n[n.PEOPLE=3]="PEOPLE";n[n.ABOUT=4]="ABOUT"})(n.MainViewType||(n.MainViewType={}));var i=n.MainViewType,t=function(t){function i(r){var u=this,f;if(t.call(this,r),this.treesViewAfterFetchAdops=function(){var t=u;n.Model.getInstance().fetchFoods2(t.treesViewAfterFetchAdops2)},this.treesViewAfterFetchAdops2=function(){var t=u;t.bodyView=n.TreesViewFactory.getInstance().create(t.$("#wrapper-main-body"));t.bodyView.render()},this.treeViewAfterFetchAdops=function(){var t=u;n.Model.getInstance().fetchPersons(t.treeViewAfterFetchAdops2)},this.treeViewAfterFetchAdops2=function(){var t=u;t.bodyView=n.TreeViewFactory.getInstance().create(t.$("#wrapper-main-body"),n.Controller.getInstance().getCurrent());t.bodyView.render();t.popupview=n.PopupViewFactory.getInstance().create(t.$("#wrapper-main-popup"))},this.peopleViewAfterFetchAdops=function(){var t=u;n.Model.getInstance().fetchTrees(new L.LatLngBounds(new L.LatLng(0,0),new L.LatLng(0,0)),t.peopleViewAfterFetchAdops2)},this.peopleViewAfterFetchAdops2=function(){var t=u;t.bodyView=n.PeopleViewFactory.getInstance().create(t.$("#wrapper-main-body"));t.bodyView.render()},this.renderTreeInfo=function(t){var r=u,f,i,e,o,s;switch(r.viewType){case 1:i=r.bodyView.getViews();$.each(i,function(t,i){i instanceof n.SideInfoView&&(f=i)});t!=null?f.customRender(t):f.render();break;case 2:i=r.bodyView.getViews();$.each(i,function(t,i){i instanceof n.TreeInfoView&&(e=i);i instanceof n.CoverflowView&&(o=i);i instanceof n.TreeDetailView&&(s=i)});e.customRender(t);o.customRender(t);s.customRender(t)}},i._instance)throw new Error("Error: Instantiation failed: Use View.getInstance() instead of new.");i._instance=this;f=this}return __extends(i,t),i.setElement=function(n){i._instance.setElement(n.el)},i.getInstance=function(){return i._instance},i.prototype.SetViewType=function(n){this.viewType=n},i.prototype.getViewType=function(){return this.viewType},i.prototype.setMapView=function(n){this.mapView=n},i.prototype.getMapView=function(){return this.mapView},i.prototype.getPopupView=function(){return this.popupview},i.prototype.render=function(){var t=this,i=_.template(n.Template.getInstance().getBaseTemplate());t.$el.html(i({}));t.headerView!=undefined&&t.headerView.destroy();t.headerView=n.HeaderFactory.getInstance().create(t.$("#wrapper-main-header"));t.headerView.render();t.bodyView!=undefined&&t.bodyView.destroy();t.popupview!=undefined&&t.popupview.destroy();t.mapView=undefined;switch(t.viewType){case 1:n.Model.getInstance().fetchAdopts(t.treesViewAfterFetchAdops);break;case 2:n.Model.getInstance().fetchAdopts(t.treeViewAfterFetchAdops);break;case 3:n.Model.getInstance().fetchAdopts(t.peopleViewAfterFetchAdops)}return t},i.prototype.renderTreesOnMap=function(t){var i=this,r,u,f;if(i.mapView!=undefined)switch(i.viewType){case 1:r=new n.Trees;u=i.mapView.getAllMarkers();$.each(t.models,function(t,i){$.each(u,function(t,u){var f=n.Model.getInstance().getFoods().findWhere({id:i.getFoodId()});u.options.name==f.getName()+i.getName()&&r.add(i)})});$.each(u,function(t,u){var f=!0;$.each(r.models,function(t,i){var r=n.Model.getInstance().getFoods().findWhere({id:i.getFoodId()});u.options.name!=r.getName()+i.getName()&&(f=!1)});f&&i.mapView.removeMarker(u)});$.each(t.models,function(n,t){r.findWhere({id:t.getId()})==undefined&&i.createMarker(t)});break;case 2:r=new n.Trees;u=i.mapView.getAllMarkers();$.each(t.models,function(t,i){$.each(u,function(t,u){var f=n.Model.getInstance().getFoods().findWhere({id:i.getFoodId()});u.options.name==f.getName()+i.getName()&&r.add(i)})});$.each(u,function(t,u){var f=!0;$.each(r.models,function(t,i){var r=n.Model.getInstance().getFoods().findWhere({id:i.getFoodId()});u.options.name!=r.getName()+i.getName()&&(f=!1)});f&&i.mapView.removeMarker(u)});f=n.Model.getInstance().getTrees().findWhere({id:n.Controller.getInstance().getCurrent()});$.each(t.models,function(n,t){r.findWhere({id:t.getId()})==undefined&&i.createMarker2(t,f==t)})}},i.prototype.createMarker=function(t){var i=this,r=n.MarkerViewFactory.getInstance().create(t);r.getMarker().on("popupopen",function(){i.renderTreeInfo(t);$(".leaflet-popup-content .glyphicon").off("click");$(".leaflet-popup-content .glyphicon").on("click",function(){n.Router.getInstance().navigate("tree/"+$(".leaflet-popup-content .glyphicon").attr("data-id"),{trigger:!0})})});r.getMarker().on("popupclose",function(){i.renderTreeInfo(null)});i.mapView.addMarker(r.getMarker())},i.prototype.createMarker2=function(t,i){var u=this,r=n.MarkerViewFactory.getInstance().create2(t);r.getMarker().on("click",function(n){n.target._popup==undefined||this.openPopup()});r.getMarker().on("popupopen",function(){u.renderTreeInfo(t);n.Router.getInstance().navigate("tree/"+$(".leaflet-popup-content span").attr("data-id"),{trigger:!1})});r.getMarker().on("popupclose",function(){u.renderTreeInfo(null)});u.mapView.addMarker(r.getMarker());i&&r.getMarker().openPopup()},i._instance=new i,i}(Backbone.View);n.View=t}(FoodParent||(FoodParent={})),function(n){var t=function(){function n(){if(n._instance)throw new Error("Error: Instantiation failed: Use Template.getInstance() instead of new.");n._instance=this}return n.getInstance=function(){return n._instance},n.prototype.getBaseTemplate=function(){var n="";return n+='<div id="wrapper-main-popup" class="hidden"><\/div>',n+='<div id="wrapper-main-body"><\/div>',n+'<div id="wrapper-main-header"><\/div>'},n.prototype.getMainHeaderTemplate=function(){var n="";return n+='<div class="row-100">',n+='<div class="col-xs-3 btn-nav nav-home"><%= site %><\/div>',n+='<div class="col-xs-3 btn-nav nav-trees"><%= trees %><\/div>',n+='<div class="col-xs-3 btn-nav nav-people"><%= people %><\/div>',n+='<div class="col-xs-3 btn-nav nav-about"><%= about %><\/div>',n+"<\/div>"},n.prototype.getMainTreeViewTemplate=function(){var n="";return n+='<div class="col-xs-3 panel-body">',n+='<div class="panel-tree-info"><\/div>',n+='<div id="map-tree" class="panel-tree-map"><\/div>',n+="<\/div>",n+='<div class="col-xs-9 panel-body">',n+='<div class="panel-breadcrumb"><\/div>',n+='<div class="panel-tree-coverflow"><\/div>',n+='<div class="panel-tree-detail"><\/div>',n+='<div id="panel-popup" class="hidden">',n+='<div class="wrapper-popup">',n+="<\/div>",n+="<\/div>",n+"<\/div>"},n.prototype.getMainTreesViewTemplate=function(){var n="";return n+='<div class="col-xs-3 panel-body panel-sideinfo panel-left-split"><\/div>',n+'<div id="map-trees" class="col-xs-9 panel-body panel-map"><\/div>'},n.prototype.getMainPeopleViewTemplate=function(){var n="";return n+='<div class="col-xs-3 panel-body panel-sideinfo panel-left-split panel-side-people"><\/div>',n+'<div id="map-people" class="col-xs-9 panel-body panel-people"><\/div>'},n.prototype.getEmptySideInfoViewTemplate=function(){var n="";return n+='<div class="form-group">',n+='<div class="col-xs-12 left"><input type="checkbox" checked id="toggle-table"><\/div>',n+"<\/div>"},n.prototype.getTreesSideInfoViewTemplate=function(){var n="";return n+='<div class="form-group">',n+='<div class="col-xs-12 left"><input type="checkbox" checked id="toggle-table"><\/div>',n+="<\/div>",n+='<div class="col-xs-9 panel-sideinfo"><h2><span class="glyphicon glyphicon-flag" aria-hidden="true"><\/span> Filtering<\/h2><\/div>',n+='<div class="col-xs-3 panel-sideinfo"><h2><i data-toggle="collapse" data-target="#peoplefilter" class="toggle-collapse fa fa-folder-open-o fa-1x"><\/i><\/h2><\/div>',n+='<div class="clear" />',n+='<div id="peoplefilter" class="collapse in filter">',n+='<div data-toggle="buttons">',n+='<label class="btn filter-checkbox">',n+='<input type="checkbox" name="showall">',n+='<i class="fa fa-square-o fa-1x"><\/i>',n+='<i class="fa fa-check-square-o fa-1x"><\/i>',n+=" show / hide all<\/label>",n+="<\/div>",n+='<div data-toggle="buttons">',n+='<label class="btn filter-checkbox">',n+='<input type="checkbox" name="assigned">',n+='<i class="fa fa-square-o fa-1x"><\/i>',n+='<i class="fa fa-check-square-o fa-1x"><\/i>',n+=" adopted<\/label>",n+="<\/div>",n+='<div data-toggle="buttons">',n+='<label class="btn filter-checkbox">',n+='<input type="checkbox" name="unassigned">',n+='<i class="fa fa-square-o fa-1x"><\/i>',n+='<i class="fa fa-check-square-o fa-1x"><\/i>',n+=" unadopted<\/label>",n+="<\/div>",n+="<% _.each(food.models, function (food) { %>",n+='<div data-toggle="buttons">',n+='<label class="btn filter-checkbox">',n+='<input type="checkbox" name="<%= food.getId() %>">',n+='<i class="fa fa-square-o fa-1x"><\/i>',n+='<i class="fa fa-check-square-o fa-1x"><\/i>',n+=" <%= food.getName() %><\/label>",n+="<\/div>",n+="<% }); %>",n+="<\/div>",n+='<div class="form-group split">',n+='<div class="col-xs-10 split-rect"><\/div>',n+='<div class="col-xs-2 split-label"><\/div>',n+'<div class="clear" />'},n.prototype.getPeopleSideInfoViewTemplate=function(){var n="";return n+='<div class="form-group">',n+='<div class="col-xs-12 left"><input type="checkbox" checked id="toggle-table"><\/div>',n+="<\/div>",n+='<div class="col-xs-9 panel-sideinfo"><h2><span class="glyphicon glyphicon-flag" aria-hidden="true"><\/span> Filtering<\/h2><\/div>',n+='<div class="col-xs-3 panel-sideinfo"><h2><i data-toggle="collapse" data-target="#peoplefilter" class="toggle-collapse fa fa-folder-open-o fa-1x"><\/i><\/h2><\/div>',n+='<div class="clear" />',n+='<div id="peoplefilter" class="collapse in">',n+='<div data-toggle="buttons">',n+='<label class="btn filter-checkbox">',n+='<input type="checkbox" name="showall">',n+='<i class="fa fa-square-o fa-1x"><\/i>',n+='<i class="fa fa-check-square-o fa-1x"><\/i>',n+=" show / hide all<\/label>",n+="<\/div>",n+='<div data-toggle="buttons">',n+='<label class="btn filter-checkbox">',n+='<input type="checkbox" name="assigned">',n+='<i class="fa fa-square-o fa-1x"><\/i>',n+='<i class="fa fa-check-square-o fa-1x"><\/i>',n+=" assigned<\/label>",n+="<\/div>",n+='<div data-toggle="buttons">',n+='<label class="btn filter-checkbox">',n+='<input type="checkbox" name="unassigned">',n+='<i class="fa fa-square-o fa-1x"><\/i>',n+='<i class="fa fa-check-square-o fa-1x"><\/i>',n+=" unassigned<\/label>",n+="<\/div>",n+="<\/div>",n+='<div class="form-group split">',n+='<div class="col-xs-10 split-rect"><\/div>',n+='<div class="col-xs-2 split-label"><\/div>',n+'<div class="clear" />'},n.prototype.getRecentActivityTemplate=function(){var n="";return n+='<div class="col-xs-12 panel-sideinfo"><h2><span class="glyphicon glyphicon-time" aria-hidden="true"><\/span> <%= recent %><\/h2><\/div>',n+='<div class="form-group">',n+="<% _.each(notes, function (note) { %>",n+='<div class="col-xs-12"><span class="glyphicon glyphicon-leaf" aria-hidden="true"><\/span> <%= note.getComment() %> (<%= note.getFormattedDate() %>)<\/div>',n+="<% }); %>",n+"<\/div>"},n.prototype.getTreeDetailTemplate=function(){var n="";return n+='<div class="col-xs-8 panel-body panel-sideinfo">',n+="<\/div>",n+='<div class="col-xs-4 panel-body panel-sideinfo panel-right-split">',n+='<div class="col-xs-9"><h2><i class="fa fa-child fa-1x" /> Parents<\/h2><\/div><div id="edit-parents" class="col-xs-3 pointer"><h2><i class="fa fa-pencil-square-o fa-1x"><\/i><\/h2><\/div>',n+='<div id="list-parents" class="col-xs-12">',n+="<%= persons %>",n+="<\/div>",n+='<div class="clear" />',n+='<div class="form-group split">',n+='<div class="col-xs-10 split-rect"><\/div>',n+='<div class="col-xs-2 split-label"><\/div>',n+='<div class="clear" />',n+"<\/div>"},n.prototype.getSideInfoViewTemplate=function(){var n="";return n+='<div class="form-group">',n+='<div class="col-xs-12 left"><input type="checkbox" checked id="toggle-table"><\/div>',n+="<\/div>",n+='<div class="col-xs-9 panel-sideinfo"><h2><span class="glyphicon glyphicon-flag" aria-hidden="true"><\/span> Filtering<\/h2><\/div>',n+='<div class="col-xs-3 panel-sideinfo"><h2><i data-toggle="collapse" data-target="#peoplefilter" class="toggle-collapse fa fa-folder-o fa-1x"><\/i><\/h2><\/div>',n+='<div class="clear" />',n+='<div id="peoplefilter" class="collapse filter">',n+='<div data-toggle="buttons">',n+='<label class="btn filter-checkbox">',n+='<input type="checkbox" name="showall">',n+='<i class="fa fa-square-o fa-1x"><\/i>',n+='<i class="fa fa-check-square-o fa-1x"><\/i>',n+=" show / hide all<\/label>",n+="<\/div>",n+='<div data-toggle="buttons">',n+='<label class="btn filter-checkbox">',n+='<input type="checkbox" name="assigned">',n+='<i class="fa fa-square-o fa-1x"><\/i>',n+='<i class="fa fa-check-square-o fa-1x"><\/i>',n+=" adopted<\/label>",n+="<\/div>",n+='<div data-toggle="buttons">',n+='<label class="btn filter-checkbox">',n+='<input type="checkbox" name="unassigned">',n+='<i class="fa fa-square-o fa-1x"><\/i>',n+='<i class="fa fa-check-square-o fa-1x"><\/i>',n+=" unadopted<\/label>",n+="<\/div>",n+="<% _.each(foods.models, function (food) { %>",n+='<div data-toggle="buttons">',n+='<label class="btn filter-checkbox">',n+='<input type="checkbox" name="<%= food.getId() %>">',n+='<i class="fa fa-square-o fa-1x"><\/i>',n+='<i class="fa fa-check-square-o fa-1x"><\/i>',n+=" <%= food.getName() %><\/label>",n+="<\/div>",n+="<% }); %>",n+="<\/div>",n+='<div class="form-group split">',n+='<div class="col-xs-10 split-rect"><\/div>',n+='<div class="col-xs-2 split-label"><\/div>',n+='<div class="clear" />',n+='<div class="col-xs-12 panel-sideinfo center"><h1><%= name %><\/h1><\/div>',n+='<div class="col-xs-12 panel-sideinfo location"><%= location %><\/div>',n+='<div class="clear" />',n+='<div class="form-group split">',n+='<div class="col-xs-4 split-rect"><\/div>',n+='<div class="col-xs-8 split-label"><\/div>',n+='<div class="clear" />',n+='<div class="col-xs-12 panel-sideinfo"><h2><span class="glyphicon glyphicon-flag" aria-hidden="true"><\/span> <%= flag %><\/h2><\/div>',n+='<div class="btn-group" data-toggle="buttons">',n+="<% _.each(flags.models, function (flag) { %>",n+='<label class="btn flag-radio" data-flag="<%= flag.getId() %>">',n+='<input type="radio" name="flag" data-flag="<%= flag.getId() %>">',n+='<i class="fa fa-circle-o fa-1x" data-flag="<%= flag.getId() %>"><\/i>',n+='<i class="fa fa-check-circle-o fa-1x" data-flag="<%= flag.getId() %>"><\/i>',n+=" <%= flag.getName() %><\/label>",n+="<% }); %>",n+="<\/div>",n+='<div class="form-group split">',n+='<div class="col-xs-4 split-rect"><\/div>',n+='<div class="col-xs-8 split-label"><\/div>',n+='<div class="clear" />',n+='<div class="col-xs-12 panel-sideinfo"><h2><span class="glyphicon glyphicon-bookmark" aria-hidden="true"><\/span> <%= ownership %><\/h2><\/div>',n+='<div class="btn-group" data-toggle="buttons">',n+="<% _.each(ownerships.models, function (ownership) { %>",n+='<label class="btn ownership-radio" data-ownership="<%= ownership.getId() %>">',n+='<input type="radio" name="ownership" data-ownership="<%= ownership.getId() %>">',n+='<i class="fa fa-circle-o fa-1x" data-ownership="<%= ownership.getId() %>"><\/i>',n+='<i class="fa fa-check-circle-o fa-1x" data-ownership="<%= ownership.getId() %>"><\/i>',n+=" <%= ownership.getName() %><\/label>",n+="<% }); %>",n+="<\/div>",n+='<div class="form-group split">',n+='<div class="col-xs-4 split-rect"><\/div>',n+='<div class="col-xs-8 split-label"><\/div>',n+'<div class="wrapper-recent-activity"><\/div>'},n.prototype.getMapPopupTemplate=function(){return""+'<%= name %>&nbsp&nbsp<span class="glyphicon glyphicon-log-in" aria-hidden="true" data-id="<%= id %>"><\/span>&nbsp'},n.prototype.getSmallMapPopupTemplate=function(){return""+'<span data-id="<%= id %>"><%= name %><\/span>'},n.prototype.getTreeInfoViewTemplate=function(){var n="";return n+='<div class="col-xs-12"><h1><%= name %><\/h1><\/div>',n+='<div class="col-xs-12"><%= location %><\/div>',n+='<div class="clear" />',n+='<div class="form-group">',n+='<div class="col-xs-3 circle-progress-left"><div><%= ripening %><\/div><div><%= ratio %><\/div><\/div>',n+='<div class="col-xs-6">',n+='<div id="ripen-progress" class="circle-progress"><\/div>',n+="<\/div>",n+='<div class="col-xs-3 circle-progress-right"><div><%= approximate %><\/div><div><%= food %><\/div><\/div>',n+="<\/div>",n+='<div class="clear" />',n+='<div class="form-group split">',n+='<div class="col-xs-10 split-rect"><\/div>',n+='<div class="col-xs-2 split-label"><\/div>',n+='<div class="clear" />',n+='<div class="col-xs-12 panel-sideinfo"><h2><span class="glyphicon glyphicon-flag" aria-hidden="true"><\/span> <%= flag %><\/h2><\/div>',n+='<div class="btn-group" data-toggle="buttons">',n+="<% _.each(flags.models, function (flag) { %>",n+='<label class="btn flag-radio" data-flag="<%= flag.getId() %>">',n+='<input type="radio" name="flag" data-flag="<%= flag.getId() %>">',n+='<i class="fa fa-circle-o fa-1x" data-flag="<%= flag.getId() %>"><\/i>',n+='<i class="fa fa-check-circle-o fa-1x" data-flag="<%= flag.getId() %>"><\/i>',n+=" <%= flag.getName() %><\/label>",n+="<% }); %>",n+="<\/div>",n+='<div class="form-group split">',n+='<div class="col-xs-10 split-rect"><\/div>',n+='<div class="col-xs-2 split-label"><\/div>',n+='<div class="clear" />',n+='<div class="col-xs-12 panel-sideinfo"><h2><span class="glyphicon glyphicon-bookmark" aria-hidden="true"><\/span> <%= ownership %><\/h2><\/div>',n+='<div class="btn-group" data-toggle="buttons">',n+="<% _.each(ownerships.models, function (ownership) { %>",n+='<label class="btn ownership-radio" data-ownership="<%= ownership.getId() %>">',n+='<input type="radio" name="ownership" data-ownership="<%= ownership.getId() %>">',n+='<i class="fa fa-circle-o fa-1x" data-ownership="<%= ownership.getId() %>"><\/i>',n+='<i class="fa fa-check-circle-o fa-1x" data-ownership="<%= ownership.getId() %>"><\/i>',n+=" <%= ownership.getName() %><\/label>",n+="<% }); %>",n+"<\/div>"},n.prototype.getCoverflowTemplate=function(){var n="";return n+='<div class="panel-coverflow col-xs-8">',n+='<div class="wrapper-coverflow">',n+='<div id="coverflow">',n+="<% _.each(notes.models, function (note) { %>",n+='<img src="<%= note.getPicturePath() %>" data-id="<%= note.getId() %>" />',n+="<% }); %>",n+="<\/div>",n+="<\/div>",n+="<\/div>",n+='<div id="coverflow-info" class="col-xs-4">',n+="<\/div>",n+='<div class="clear" />',n+='<div class="label-coverflow">',n+='<div class="col-xs-8">',n+='<div id="select-date" class="btn btn-default"><i class="fa fa-calendar-check-o fa-1x"><\/i>&nbsp;<span><%= curdate %><\/span><\/div>',n+="<\/div>",n+='<div class="col-xs-4">',n+='<div id="add-note" class="btn btn-default"><i class="fa fa-plus-square-o fa-1x"><\/i>&nbsp;<%= addnote %><\/div>',n+='<div id="delete-note" class="btn btn-default"><i class="fa fa-minus-square-o fa-1x"><\/i>&nbsp;<%= deletenote %><\/div>',n+="<\/div>",n+"<\/div>"},n.prototype.getCoverflowInfoTemplate=function(){var n="";return n+='<div class="col-xs-12"><h1><%= detail %><\/h1><\/div>',n+='<div class="input-group">',n+='<span class="input-group-addon"><i class="fa fa-calendar fa-fw"><\/i><\/span>',n+='<input class="form-control date-input" type="text" placeholder="date" value="<%= date %>">',n+="<\/div>",n+='<div class="input-group">',n+='<span class="input-group-addon"><i class="fa fa-star-half-o fa-fw"><\/i><\/span>',n+='<div class="form-control rating">',n+='<span class="rating-element" data-rating="5">☆<\/span><span class="rating-element" data-rating="4">☆<\/span><span class="rating-element" data-rating="3">☆<\/span><span class="rating-element" data-rating="2">☆<\/span><span class="rating-element" data-rating="1">☆<\/span>',n+="<\/div>",n+="<\/div>",n+='<div class="input-group">',n+='<span class="input-group-addon"><i class="fa fa-comment fa-fw"><\/i><\/span>',n+='<textarea class="form-control comment-input" rows="5" placeholder="comment"><%= note %><\/textarea>',n+="<\/div>",n+'<div class="clear" />'},n.prototype.getAddNotePopupTemplate=function(){var n="";return n+='<div class="col-xs-12"><h1><%= title %><\/h1><\/div>',n+='<div class="col-xs-4">',n+='<div id="popup-confirm" class="btn btn-default"><i class="fa fa-circle-o fa-1x"><\/i>&nbsp;<%= confirm %><\/div>',n+='<div id="popup-close" class="btn btn-default"><i class="fa fa-times fa-1x"><\/i>&nbsp;<%= close %><\/div>',n+"<\/div>"},n.prototype.getLocationTableTemplate=function(){var n="";return n+='<div class="list">',n+='<div class="col-xs-12"><h1><%= title %><\/h1><\/div>',n+='<div class="clear" />',n+='<div class="form-group">',n+='<div class="col-xs-12">',n+='<div class="list-location"><\/div>',n+="<\/div>",n+='<div class="clear" />',n+"<\/div>"},n.prototype.getPeopleTableTemplate=function(){var n="";return n+='<div class="list">',n+='<div class="col-xs-12"><h1><%= title %><\/h1><\/div>',n+='<div class="clear" />',n+='<div class="form-group">',n+='<div class="col-xs-12">',n+='<div class="list-people"><\/div>',n+="<\/div>",n+='<div class="clear" />',n+"<\/div>"},n.prototype.getAdoptTreeCellTemplate=function(){var n="";return n+="<% _.each(trees.models, function (tree) { %>",n+='<a href="#tree/<%= tree.getId() %>"><%= tree.getName() %><\/a>',n+"<% }); %>"},n.prototype.getEditParentPopupViewTemplate=function(){var n="";return n+='<div class="popup-wrapper">',n+='<div class="col-xs-3 panel-body panel-sideinfo panel-left-split panel-side-people">',n+='<div class="col-xs-9 panel-sideinfo"><h2><span class="glyphicon glyphicon-flag" aria-hidden="true"><\/span> Filtering<\/h2><\/div>',n+='<div class="col-xs-3 panel-sideinfo"><h2><i data-toggle="collapse" data-target="#peoplefilter" class="toggle-collapse fa fa-folder-open-o fa-1x"><\/i><\/h2><\/div>',n+='<div class="clear" />',n+='<div id="peoplefilter" class="collapse in">',n+='<div data-toggle="buttons">',n+='<label class="btn filter-checkbox">',n+='<input type="checkbox" name="showall">',n+='<i class="fa fa-square-o fa-1x"><\/i>',n+='<i class="fa fa-check-square-o fa-1x"><\/i>',n+=" show / hide all<\/label>",n+="<\/div>",n+='<div data-toggle="buttons">',n+='<label class="btn filter-checkbox">',n+='<input type="checkbox" name="assigned">',n+='<i class="fa fa-square-o fa-1x"><\/i>',n+='<i class="fa fa-check-square-o fa-1x"><\/i>',n+=" assigned<\/label>",n+="<\/div>",n+='<div data-toggle="buttons">',n+='<label class="btn filter-checkbox">',n+='<input type="checkbox" name="unassigned">',n+='<i class="fa fa-square-o fa-1x"><\/i>',n+='<i class="fa fa-check-square-o fa-1x"><\/i>',n+=" unassigned<\/label>",n+="<\/div>",n+="<\/div>",n+='<div class="form-group split">',n+='<div class="col-xs-10 split-rect"><\/div>',n+='<div class="col-xs-2 split-label"><\/div>',n+='<div class="clear" />',n+="<\/div>",n+="<\/div>",n+='<div class="col-xs-9 panel-body panel-people">',n+='<div class="list">',n+='<div class="col-xs-12"><h1>Tree Adoption<\/h1><\/div>',n+='<div class="col-xs-12"><h2><i>Click <i class="fa fa-plus-square fa-1x"><\/i> icon to assign a new parent for tree <strong><%= tree %><\/strong>.<\/h2><\/i><\/div>',n+='<div class="clear" />',n+='<div class="form-group">',n+='<div class="col-xs-12">',n+='<div class="list-people"><\/div>',n+="<\/div>",n+='<div class="clear" />',n+="<\/div>",n+"<\/div>"},n._instance=new n,n}();n.Template=t}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(n){t.call(this,n);this.bActive=!0;var i=this;i.events={"click .nav-home":"_navHome","click .nav-trees":"_navTrees","click .nav-people":"_navPeople","click .nav-about":"_navAbout"};i.delegateEvents();i.views=[]}return __extends(i,t),i.prototype.render=function(){var t=this,i=_.template(n.Template.getInstance().getMainHeaderTemplate()),r={site:n.Localization.getInstance().getSiteText(),trees:n.Localization.getInstance().getTreesText(),people:n.Localization.getInstance().getPeopleText(),about:n.Localization.getInstance().getAboutText()};return t.$el.html(i(r)),t},i.prototype._navHome=function(t){t.preventDefault();n.Router.getInstance().navigate("home",{trigger:!0,replace:!1})},i.prototype._navTrees=function(t){t.preventDefault();n.Router.getInstance().navigate("trees",{trigger:!0,replace:!1})},i.prototype._navPeople=function(t){t.preventDefault();n.Router.getInstance().navigate("people",{trigger:!0,replace:!1})},i.prototype._navAbout=function(t){t.preventDefault();n.Router.getInstance().navigate("about",{trigger:!0,replace:!1})},i}(Backbone.View);n.HeaderView=t}(FoodParent||(FoodParent={})),function(n){var t=function(){function n(){if(n._instance)throw new Error("Error: Instantiation failed: Use Localization.getInstance() instead of new.");n._instance=this}return n.getInstance=function(){return n._instance},n.prototype.getSiteText=function(){return"FoodParent&#153;"},n.prototype.getTreesText=function(){return"Trees"},n.prototype.getPeopleText=function(){return"People"},n.prototype.getNoteText=function(){return"Note"},n.prototype.getAboutText=function(){return"About"},n.prototype.getFlagText=function(){return"Flag"},n.prototype.getOwnershipText=function(){return"Ownership"},n.prototype.getRecentText=function(){return"Recent Activities"},n.prototype.getRipeningText=function(){return"Ripnening"},n.prototype.getTreeListText=function(){return"Tree List"},n.prototype.getPeopleListText=function(){return"People List"},n.prototype.getDeleteConfirmText=function(){return"Are you sure to delete this item?"},n.prototype.getNoDataText=function(){return"No Data"},n.prototype.getNoteDetailText=function(){return"Note Detail"},n.prototype.getAddNoteText=function(){return"Add Note"},n.prototype.getDeleteNoteText=function(){return"Delete Note"},n._instance=new n,n}();n.Localization=t}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(n){t.call(this,n);this.bActive=!0;var i=this;i.events={"click .nav-home":"_navHome"};i.delegateEvents();i.views=[]}return __extends(i,t),i.prototype.render=function(){var t=this,u=_.template(n.Template.getInstance().getMainTreesViewTemplate()),i,r;return t.$el.html(u({})),i=n.MapViewFactory.getInstance().create(t.$(".panel-map"),!0).render(),t.views.push(i),r=n.SideViewFactory.getInstance().create(t.$(".panel-sideinfo")).render(),r.setMapView(i),t.views.push(r),t},i.prototype.getViews=function(){var n=this;return n.views},i}(Backbone.View);n.TreesView=t}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(i){var u=this,r;t.call(this,i);this.bDebug=!0;this.bActive=!0;this.bCentered=!0;this.bClosePopupOnClick=!0;this.bGraphicView=!0;this.createMap=function(t){var i=u,r=t.coords.accuracy;if(i.location=new L.LatLng(t.coords.latitude,t.coords.longitude),i.map==undefined){i.setLocation(new L.LatLng(t.coords.latitude,t.coords.longitude));i.map=L.map(i.$el[0].id,{zoomControl:!1,closePopupOnClick:i.bClosePopupOnClick,doubleClickZoom:!0,touchZoom:!0,zoomAnimation:!0,markerZoomAnimation:!0}).setView(i.location,i.zoom);L.tileLayer(n.Setting.getInstance().getTileMapAddress(),{minZoom:n.Setting.getInstance().getMapMinZoomLevel(),maxZoom:n.Setting.getInstance().getMapMaxZoomLevel()}).addTo(i.map);i.map.invalidateSize(!1);i.map.whenReady(i.afterCreateMap);i.map.on("moveend",i.afterMoveMap)}};this.afterCreateMap=function(){var t=u;t.bDebug&&console.log("afterCreateMap()");n.Controller.getInstance().fetchTrees(t.map.getBounds());n.Controller.getInstance().setMapView(t)};this.afterMoveMap=function(){var t=u;t.bDebug&&console.log("afterMoveMap()");n.Controller.getInstance().fetchTrees(t.map.getBounds())};r=this;r.events={"click .nav-home":"_navHome"};r.delegateEvents();r.views=[];r.zoom=n.Setting.getInstance().getDefaultMapZoomLevel()}return __extends(i,t),i.prototype.render=function(){var t=this;return t.$el.html(""),t.bCentered&&(console.log("render()"),n.Controller.getInstance().updateGeoLocation(t.createMap)),t},i.prototype.setIsCentered=function(n){this.bCentered=n},i.prototype.setIsClosePopupOnClick=function(n){this.bClosePopupOnClick=n},i.prototype.setZoom=function(n){this.zoom=n},i.prototype.setLocation=function(n){var t=this;t.location=n},i.prototype.updateLocation=function(){var n=this;n.map.setView(n.location,n.zoom)},i.prototype.getLocation=function(){return this.location},i.prototype.addMarker=function(n){var t=this;n.addTo(t.map)},i.prototype.getAllMarkers=function(){var t=this,n=[];return $.each(t.map._layers,function(t,i){i instanceof L.Marker&&n.push(i)}),n},i.prototype.removeMarker=function(n){var t=this;return n.off("click"),t.map.removeLayer(n),n},i.prototype.SetIsGraphicView=function(n){var t=this;t.bGraphicView=n;t.bGraphicView?t.render():t.render2()},i.prototype.getIsGraphicView=function(){return this.bGraphicView},i.prototype.render2=function(){var t,r,u,f,i;console.log("render2()");t=this;t.map.remove();t.map=undefined;t.$el.removeClass("leaflet-container");t.$el.removeClass("leaflet-touch");t.$el.removeClass("leaflet-fade-anim");t.$el.removeAttr("tabindex");r=_.template(n.Template.getInstance().getLocationTableTemplate());u={title:n.Localization.getInstance().getTreeListText()};t.$el.html(r(u));TreeColumn[1].cell=Backgrid.SelectCell.extend({optionValues:n.Model.getInstance().getFoods().toArray()});f=new n.Trees(n.Model.getInstance().getTrees().where({type:1}));i=new Backgrid.Grid({columns:TreeColumn,collection:f,emptyText:n.Localization.getInstance().getNoDataText()});i.render();t.$(".list-location").html(i.el)},i.prototype.customRender=function(t){var i=this,u,f,r;i.bGraphicView||(i.map&&(i.map.remove(),i.map=undefined,i.$el.removeClass("leaflet-container"),i.$el.removeClass("leaflet-touch"),i.$el.removeClass("leaflet-fade-anim"),i.$el.removeAttr("tabindex")),u=_.template(n.Template.getInstance().getLocationTableTemplate()),f={title:n.Localization.getInstance().getTreeListText()},i.$el.html(u(f)),TreeColumn[1].cell=Backgrid.SelectCell.extend({optionValues:n.Model.getInstance().getFoods().toArray()}),r=new Backgrid.Grid({columns:TreeColumn,collection:t,emptyText:n.Localization.getInstance().getNoDataText()}),r.render(),i.$(".list-location").html(r.el))},i}(Backbone.View);n.MapView=t}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(n){t.call(this,n);var i=this}return __extends(i,t),i.prototype.create=function(t,i,r,u,f){var e=this,o=_.template(n.Template.getInstance().getMapPopupTemplate()),s={name:i,id:t};e.marker=new L.Marker(new L.LatLng(u,f),{icon:r,draggable:!1,riseOnHover:!0,name:i,id:t}).bindPopup(o(s),{closeButton:!1})},i.prototype.create2=function(t,i,r,u,f){var e=this,o=_.template(n.Template.getInstance().getSmallMapPopupTemplate()),s={name:i,id:t};e.marker=new L.Marker(new L.LatLng(u,f),{icon:r,draggable:!1,riseOnHover:!0,closeOnClick:!1,name:i,id:t}).bindPopup(o(s),{closeButton:!1,closeOnClick:!1})},i.prototype.getMarker=function(){return this.marker},i}(Backbone.View);n.MarkerView=t}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(i){var r=this,u;t.call(this,i);this.bActive=!0;this.renderRecentActivity=function(){var t=r,i,u,f;t.tree&&(i=_.template(n.Template.getInstance().getRecentActivityTemplate()),u=new n.Notes(n.Model.getInstance().getNotes().where({tree:t.tree.getId()})),n.Model.getInstance().getNotes().sortByDescendingDate(),f={recent:n.Localization.getInstance().getRecentText(),notes:u.first(n.Setting.getInstance().getNumRecentActivityShown())},t.$(".wrapper-recent-activity").html(i(f)))};this.renderTreeInfo=function(){var t=r;if(t.tree){var i=n.Model.getInstance().getFoods().findWhere({id:t.tree.getFoodId()}),u=n.Model.getInstance().getFlags().findWhere({id:t.tree.getFlagId()}),f=n.Model.getInstance().getOwnerships().findWhere({id:t.tree.getOwnershipId()}),e=_.template(n.Template.getInstance().getSideInfoViewTemplate()),o={name:i.getName()+t.tree.getName(),location:"@ "+t.tree.getLat().toFixed(4)+", "+t.tree.getLng().toFixed(4),flag:n.Localization.getInstance().getFlagText(),flags:n.Model.getInstance().getFlags(),ownership:n.Localization.getInstance().getOwnershipText(),ownerships:n.Model.getInstance().getOwnerships(),foods:n.Model.getInstance().getFoods()};t.$el.html(e(o));t.renderFlagInfo(u);t.renderOwnershipInfo(f);n.Controller.getInstance().fetchNotes([t.tree.getId()],n.Setting.getInstance().getNumRecentActivityShown(),0,t.renderRecentActivity);t.renderTableToggle()}else t.$el.html("");return t};this.renderFlagInfo=function(n){var t=r;$.each(t.$(".flag-radio"),function(i,r){parseInt($(r).attr("data-flag"))==n.getId()?($(r).addClass("active"),$(r).find("input").prop({checked:"checked"}),t.currentFlag=parseInt($(r).attr("data-flag"))):($(r).removeClass("active"),$(r).find("input").prop({checked:""}))})};this.renderOwnershipInfo=function(n){var t=r;$.each(t.$(".ownership-radio"),function(i,r){parseInt($(r).attr("data-ownership"))==n.getId()?($(r).addClass("active"),$(r).find("input").prop({checked:"checked"}),t.currentOwnership=parseInt($(r).attr("data-ownership"))):($(r).removeClass("active"),$(r).find("input").prop({checked:""}))})};u=this;u.events={"click .flag-radio":"_clickFlagRadio","click .ownership-radio":"_clickOwnershipRadio","click .filter-checkbox":"_clickFilterCheckbox"};u.delegateEvents();u.views=[]}return __extends(i,t),i.prototype.render=function(){var i=this,r,u,t,f;return n.View.getInstance().getViewType()==1?(t=_.template(n.Template.getInstance().getTreesSideInfoViewTemplate()),r={food:n.Model.getInstance().getFoods()},i.$el.html(t(r))):n.View.getInstance().getViewType()==3?(t=_.template(n.Template.getInstance().getPeopleSideInfoViewTemplate()),u={},i.$el.html(t(u))):(t=_.template(n.Template.getInstance().getEmptySideInfoViewTemplate()),f={},i.$el.html(t(f))),i.renderTableToggle(),i},i.prototype.render2=function(t){var i=this,r,u;return n.View.getInstance().getViewType()==1&&(r=_.template(n.Template.getInstance().getTreesSideInfoViewTemplate()),u={food:n.Model.getInstance().getFoods()},i.$el.html(r(u))),i.renderTableToggle(t),i},i.prototype.customRender=function(t){var i=this;i.tree=t;n.Controller.getInstance().fetchFlags(n.Controller.getInstance().fetchTypes,i.renderTreeInfo)},i.prototype.renderTableToggle=function(t){var i=this;i.$("#toggle-table").bootstrapToggle({on:"Graphic",off:"Table",size:"small",onstyle:"default"});n.View.getInstance().getViewType()==1?(t!=undefined&&(t?i.$("#toggle-table").bootstrapToggle("on"):i.$("#toggle-table").bootstrapToggle("off")),i.$("#toggle-table").change(function(){i.render2($(this).prop("checked"));i.mapView.SetIsGraphicView($(this).prop("checked"))})):n.View.getInstance().getViewType()==3&&(i.$("#toggle-table").bootstrapToggle("off"),i.$("#toggle-table").prop({disabled:"disabled"}))},i.prototype._clickFilterCheckbox=function(t){var i=this;setTimeout(function(){var f,r,u;$(t.target).find("input").prop("name")=="showall"?$(t.target).find("input").prop("checked")==!0?$.each(i.$(".filter-checkbox"),function(n,t){$(t).addClass("active");$(t).find("input").prop({checked:"checked"})}):$.each(i.$(".filter-checkbox"),function(n,t){$(t).removeClass("active");$(t).find("input").prop({checked:""})}):$(t.target).find("input").prop("name")!="showall"&&(f=!0,$.each(i.$(".filter-checkbox"),function(n,t){$(t).find("input").prop("name")!="showall"&&$(t).find("input").prop("checked")==!1&&(f=!1)}),f?(i.$(".filter-checkbox").find('input[name="showall"]').parent().addClass("active"),i.$(".filter-checkbox").find('input[name="showall"]').prop({checked:"checked"})):$(t.target).find("input").prop("checked")==!1&&(i.$(".filter-checkbox").find('input[name="showall"]').parent().removeClass("active"),i.$(".filter-checkbox").find('input[name="showall"]').prop({checked:""})));r=new n.Trees;u=new n.Persons;i.$(".filter-checkbox").find('input[name="showall"]').prop("checked")&&(n.View.getInstance().getViewType()==1?r=n.Model.getInstance().getTrees():n.View.getInstance().getViewType()==3&&(u=n.Model.getInstance().getPersons()));i.$(".filter-checkbox").find('input[name="assigned"]').prop("checked")&&(n.View.getInstance().getViewType()==1?(r=n.Model.getInstance().getTrees().getAssigned(r),console.log(r)):n.View.getInstance().getViewType()==3&&(u=n.Model.getInstance().getPersons().getAssigned(u)));i.$(".filter-checkbox").find('input[name="unassigned"]').prop("checked")&&(n.View.getInstance().getViewType()==1?r=n.Model.getInstance().getTrees().getUnassigned(r):n.View.getInstance().getViewType()==3&&(u=n.Model.getInstance().getPersons().getUnassigned(u)));$.each(i.$(".filter-checkbox"),function(t,i){$(i).find("input").prop("name")!="showall"&&$(i).find("input").prop("name")!="assigned"&&$(i).find("input").prop("name")!="unassigned"&&$(i).find("input").prop("checked")&&(r=n.Model.getInstance().getTrees().getFromFoodId(r,parseInt($(i).find("input").prop("name"))))});n.View.getInstance().getViewType()==1?i.mapView.customRender(r):n.View.getInstance().getViewType()==3&&i.personsView.renderGrid(u)},1)},i.prototype._clickFlagRadio=function(t){var i=this,r;$.each(i.$(".flag-radio"),function(n,i){i==t.target?($(i).addClass("active"),$(i).find("input").prop({checked:"checked"})):($(i).removeClass("active"),$(i).find("input").prop({checked:""}))});i.currentFlag!=parseInt($(t.target).attr("data-flag"))&&i.tree&&(i.currentFlag=parseInt($(t.target).attr("data-flag")),i.tree.save({flag:parseInt($(t.target).attr("data-flag"))},{wait:!0,success:function(){},error:function(n){console.log(n)}}),r=new n.Note({type:2,tree:i.tree.getId(),person:0,comment:"Flag is changed to '"+n.Model.getInstance().getFlags().findWhere({id:parseInt($(t.target).attr("data-flag"))}).getName()+"'",picture:"",rate:0,date:moment(new Date).format(n.Setting.getInstance().getDateTimeFormat())}),r.save({},{wait:!0,success:function(t){n.Model.getInstance().getNotes().add(t);i.renderRecentActivity()},error:function(n){console.log(n)}}))},i.prototype._clickOwnershipRadio=function(t){var i=this,r;$.each(i.$(".ownership-radio"),function(n,i){i==t.target?($(i).addClass("active"),$(i).find("input").prop({checked:"checked"})):($(i).removeClass("active"),$(i).find("input").prop({checked:""}))});i.currentOwnership!=parseInt($(t.target).attr("data-ownership"))&&i.tree&&(i.currentOwnership=parseInt($(t.target).attr("data-ownership")),i.tree.save({ownership:parseInt($(t.target).attr("data-ownership"))},{wait:!0,success:function(){},error:function(n){console.log(n)}}),r=new n.Note({type:2,tree:i.tree.getId(),person:0,comment:"Ownership is changed to '"+n.Model.getInstance().getOwnerships().findWhere({id:parseInt($(t.target).attr("data-ownership"))}).getName()+"'",picture:"",rate:0,date:moment(new Date).format(n.Setting.getInstance().getDateTimeFormat())}),r.save({},{wait:!0,success:function(t){n.Model.getInstance().getNotes().add(t);i.renderRecentActivity()},error:function(n){console.log(n)}}))},i.prototype.setMapView=function(n){this.mapView=n},i.prototype.setPersonsView=function(n){this.personsView=n},i}(Backbone.View);n.SideInfoView=t}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(i){var u=this,r;t.call(this,i);this.bActive=!0;this.renderTree=function(){console.log("renderTree");var r=u,t=n.Model.getInstance().getTrees().findWhere({id:r.current}),i,f,e,o;$.each(r.views,function(t,r){r instanceof n.MapView&&(i=r);r instanceof n.TreeInfoView&&(f=r);r instanceof n.CoverflowView&&(e=r);r instanceof n.TreeDetailView&&(o=r)});i.setZoom(n.Setting.getInstance().getDefaultSmallMapZoomLevel());i.setIsClosePopupOnClick(!1);i.createMap({timestamp:new Date,coords:{altitudeAccuracy:0,latitude:t.getLat(),longitude:t.getLng(),speed:0,heading:0,altitude:0,accuracy:0}});f.customRender(t);e.customRender(t);o.customRender(t)};r=this;r.events={"click .nav-home":"_navHome"};r.delegateEvents();r.views=[]}return __extends(i,t),i.prototype.render=function(){var t=this,i=_.template(n.Template.getInstance().getMainTreeViewTemplate());return t.$el.html(i({})),t.views.push(n.MapViewFactory.getInstance().create2(t.$(".panel-tree-map"),!1).render()),t.views.push(n.TreeInfoViewFactory.getInstance().create(t.$(".panel-tree-info")).render()),t.views.push(n.CoverflowViewFactory.getInstance().create(t.$(".panel-tree-coverflow")).render()),t.views.push(n.TreeDetailViewFactory.getInstance().create(t.$(".panel-tree-detail")).render()),n.Controller.getInstance().fetchTree(t.current,t.renderTree),t},i.prototype.getViews=function(){var n=this;return n.views},i.prototype.setCurrent=function(n){var t=this;t.current=Math.floor(n)},i}(Backbone.View);n.TreeView=t}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(i){var u=this,r;t.call(this,i);this.bActive=!0;this.renderTreeInfo=function(){var t=u,i;if(t.tree){var r=n.Model.getInstance().getFoods().findWhere({id:t.tree.getFoodId()}),e=n.Model.getInstance().getFlags().findWhere({id:t.tree.getFlagId()}),o=n.Model.getInstance().getOwnerships().findWhere({id:t.tree.getOwnershipId()}),f=.75,s=_.template(n.Template.getInstance().getTreeInfoViewTemplate()),h={name:r.getName()+t.tree.getName(),location:"@ "+t.tree.getLat().toFixed(4)+", "+t.tree.getLng().toFixed(4),ripening:n.Localization.getInstance().getRipeningText(),ratio:Math.floor(f*100)+"%",approximate:15,food:r.getName(),flag:n.Localization.getInstance().getFlagText(),flags:n.Model.getInstance().getFlags(),ownership:n.Localization.getInstance().getOwnershipText(),ownerships:n.Model.getInstance().getOwnerships(),recent:n.Localization.getInstance().getRecentText()};t.$el.html(s(h));t.renderFlagInfo(e);t.renderOwnershipInfo(o);i=t.$(".circle-progress").innerWidth();t.$("#ripen-progress").circleProgress({startAngle:-Math.PI/2,value:f,size:i,thickness:i/8,fill:{gradient:["red","orange"],gradientAngle:Math.PI/4}});t.$(".circle-progress-left").css({height:i});t.$(".circle-progress-right").css({height:i})}else t.$el.html("");return t};this.renderFlagInfo=function(n){var t=u;$.each(t.$(".flag-radio"),function(i,r){parseInt($(r).attr("data-flag"))==n.getId()?($(r).addClass("active"),$(r).find("input").prop({checked:"checked"}),t.currentFlag=parseInt($(r).attr("data-flag"))):($(r).removeClass("active"),$(r).find("input").prop({checked:""}))})};this.renderOwnershipInfo=function(n){var t=u;$.each(t.$(".ownership-radio"),function(i,r){parseInt($(r).attr("data-ownership"))==n.getId()?($(r).addClass("active"),$(r).find("input").prop({checked:"checked"}),t.currentOwnership=parseInt($(r).attr("data-ownership"))):($(r).removeClass("active"),$(r).find("input").prop({checked:""}))})};r=this;r.events={"click .flag-radio":"_clickFlagRadio","click .ownership-radio":"_clickOwnershipRadio"};r.delegateEvents();r.views=[]}return __extends(i,t),i.prototype.render=function(){return this},i.prototype.customRender=function(t){var i=this;i.tree=t;n.Controller.getInstance().fetchFlags(n.Controller.getInstance().fetchTypes,i.renderTreeInfo)},i.prototype._clickFlagRadio=function(n){var t=this;$.each(t.$(".flag-radio"),function(t,i){i==n.target?$(i).prop({checked:"checked"}):$(i).prop({checked:""})})},i.prototype._clickOwnershipRadio=function(n){var t=this;$.each(t.$(".type-radio"),function(t,i){i==n.target?$(i).prop({checked:"checked"}):$(i).prop({checked:""})})},i.prototype.getViews=function(){var n=this;return n.views},i}(Backbone.View);n.TreeInfoView=t}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){(function(n){n[n.NONE=0]="NONE";n[n.ADD=1]="ADD"})(n.PopupType||(n.PopupType={}));var i=n.PopupType,t=function(t){function i(i){var u=this,r;t.call(this,i);this.bActive=!0;this.renderTreeInfo=function(){var t=u,r,i,f;return t.tree&&(r=_.template(n.Template.getInstance().getCoverflowTemplate()),i=new n.Notes(n.Model.getInstance().getNotes().where({tree:t.tree.getId(),type:1})),i.models.length>0&&(i.sortByAscendingDate(),f={notes:i,addnote:n.Localization.getInstance().getAddNoteText(),deletenote:n.Localization.getInstance().getDeleteNoteText(),curdate:i.at(i.models.length-1).getFormattedDateTime()},t.$el.html(r(f)),$.each(t.$(".wrapper-coverflow img"),function(n,i){$(i).attr({width:(t.$(".wrapper-coverflow").innerHeight()-12)*4/3,height:t.$(".wrapper-coverflow").innerHeight()-12})})),t.$("#coverflow").coverflow({active:i.length-1,duration:100,select:function(i,r){var f=r.active,u=n.Model.getInstance().getNotes().findWhere({id:parseInt(f.attr("data-id"))});t.renderNoteInfo(u);t.renderCalendar(u)}})),t};this.renderCalendar=function(n){var t=u;n&&t.$("#select-date span").html(n.getFormattedDateTime())};this.renderNoteInfo=function(t){var i=u,r,f;t&&(r=_.template(n.Template.getInstance().getCoverflowInfoTemplate()),f={detail:n.Localization.getInstance().getNoteDetailText(),date:t.getFormattedDateTime(),note:t.getComment()},i.$("#coverflow-info").html(r(f)),i.renderRating(t.getRate()))};r=this;r.events={"click #add-note":"_clickAddNote","click .rating-element":"_clickRating","mouseenter .rating-element":"_mouseenterRating","mouseleave .rating":"_mouseleaveRating"};r.delegateEvents();r.views=[]}return __extends(i,t),i.prototype.render=function(){var t=this,i=_.template(n.Template.getInstance().getCoverflowTemplate());return t},i.prototype.getViews=function(){var n=this;return n.views},i.prototype.customRender=function(t){var i=this;i.tree=t;i.tree&&n.Controller.getInstance().fetchNotes([i.tree.getId()],100,0,i.renderTreeInfo)},i.prototype.renderRating=function(n){var t=this;console.log(n);$.each(t.$(".rating-element"),function(t,i){parseInt($(i).attr("data-rating"))<=n&&$(i).addClass("rating-active")})},i.prototype._clickRating=function(n){var t=this;$.each(t.$(".rating-element"),function(t,i){parseInt($(i).attr("data-rating"))<=parseInt($(n.target).attr("data-rating"))&&$(i).addClass("rating-active")})},i.prototype._mouseenterRating=function(){var n=this;n.$(".rating-element").removeClass("rating-active")},i.prototype._mouseleaveRating=function(){var n=this;console.log("_mouseleaveRating")},i.prototype._clickAddNote=function(){var n=this;console.log("_clickAddNote");n.renderPopup(1)},i.prototype.renderPopup=function(t){var u=this,i,r;switch(t){case 1:i=_.template(n.Template.getInstance().getAddNotePopupTemplate());r={title:"Add Note",confirm:"Confirm",close:"Cancle"};$("#panel-popup .wrapper-popup").html(i(r));$("#panel-popup").removeClass("hidden")}$("#popup-close").off("click");$("#popup-close").on("click",function(){u._closePopup()})},i.prototype._closePopup=function(){console.log("_closePopup");$("#panel-popup").addClass("hidden");$("#panel-popup .wrapper-popup").html("")},i}(Backbone.View);n.CoverflowView=t}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(n){t.call(this,n);this.bActive=!0;var i=this;i.events={"click .nav-home":"_navHome"};i.delegateEvents();i.views=[]}return __extends(i,t),i.prototype.render=function(){var t=this,u=_.template(n.Template.getInstance().getMainPeopleViewTemplate()),f={title:n.Localization.getInstance().getPeopleListText()},i,r;return t.$el.html(u(f)),i=n.PersonsViewFactory.getInstance().create(t.$(".panel-people")).render(),t.views.push(i),r=n.SideViewFactory.getInstance().create(t.$(".panel-sideinfo")).render(),r.setPersonsView(i),t.views.push(r),t},i.prototype.getViews=function(){var n=this;return n.views},i}(Backbone.View);n.PeopleView=t}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(n){t.call(this,n);this.bActive=!0;var i=this;i.events={"click .nav-home":"_navHome"};i.delegateEvents();i.views=[]}return __extends(i,t),i.prototype.render=function(){var t=this,i=_.template(n.Template.getInstance().getPeopleTableTemplate()),r={title:n.Localization.getInstance().getPeopleListText()};return t.$el.html(i(r)),PersonColumn[1].cell=Backgrid.SelectCell.extend({optionValues:n.Model.getInstance().getAuths().toArray()}),n.Model.getInstance().fetchPersons(function(){var i=n.Model.getInstance().getPersons();t.renderGrid(i)}),t},i.prototype.getViews=function(){var n=this;return n.views},i.prototype.renderGrid=function(t){var i=this,r=new Backgrid.Grid({columns:PersonColumn,collection:t,emptyText:n.Localization.getInstance().getNoDataText()});return r.render(),i.$(".list-people").html(r.el),i},i}(Backbone.View);n.PersonsView=t}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(n){t.call(this,n);this.bActive=!0;var i=this;i.events={"click .nav-home":"_navHome"};i.delegateEvents();i.views=[]}return __extends(i,t),i.prototype.render=function(){return this},i.prototype.customRender=function(t){var i=this,r,u,f;if(i.tree=t,i.tree){r=Array();u=_.template(n.Template.getInstance().getTreeDetailTemplate());$.each(i.tree.get("owners"),function(t,i){var u=n.Model.getInstance().getPersons().findWhere({id:i}).getName();r.push(" "+u)});f={persons:r.toString()};i.$el.html(u(f));$("#edit-parents").off("click");$("#edit-parents").on("click",function(){n.View.getInstance().getPopupView().renderEditParent(i.tree);n.View.getInstance().getPopupView().SetVisibility(!0)})}},i.prototype.getViews=function(){var n=this;return n.views},i}(Backbone.View);n.TreeDetailView=t}(FoodParent||(FoodParent={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(n){t.call(this,n);this.bActive=!0;var i=this;i.events={"click .nav-home":"_navHome","click .filter-checkbox":"_clickFilterCheckbox"};i.delegateEvents();i.views=[];i.bVisible=!1}return __extends(i,t),i.prototype.render=function(){return this},i.prototype.getCurrentTree=function(){return this.tree},i.prototype.renderEditParent=function(t){var i=this,r,u;i.tree=t;r=_.template(n.Template.getInstance().getEditParentPopupViewTemplate());u={tree:t.getName()};i.$el.html(r(u));i.delegateEvents();i.renderGrid(n.Model.getInstance().getPersons());console.log(i.$el)},i.prototype.renderGrid=function(t){var f=this,i=14531,r=new n.Persons,u;return $.each(t.models,function(t,u){var e,f;if(u.get("trees")==undefined||u.get("trees").length==0)f=new n.Person(u.attributes),f.id="#"+i,f.attributes.id="#"+i,f.attributes.tempid=u.attributes.id,i++,f.isSavable=!1,r.add(f);else for(console.log(u.get("trees").length),e=0;e<u.get("trees").length;e++)f=new n.Person(u.attributes),f.id="#"+i,f.attributes.id="#"+i,f.attributes.tempid=u.attributes.id,i++,f.attributes.trees=[u.get("trees")[e]],f.isSavable=!1,r.add(f)}),console.log(r),PersonPopupColumn[0].cell=Backgrid.SelectCell.extend({optionValues:n.Model.getInstance().getAuths().toArray()}),u=new Backgrid.Grid({columns:PersonPopupColumn,collection:r,emptyText:n.Localization.getInstance().getNoDataText()}),u.render(),f.$(".list-people").html(u.el),f},i.prototype.SetVisibility=function(n){var t=this;t.bVisible=n;t.bVisible?(t.$el.removeClass("hidden"),$("#wrapper-main-body").addClass("inactive"),$("#wrapper-main-body").addClass("inactive")):t.bVisible&&(t.$el.addClass("hidden"),$("#wrapper-main-body").removeClass("inactive"),$("#wrapper-main-body").removeClass("inactive"))},i.prototype.getViews=function(){var n=this;return n.views},i.prototype._clickFilterCheckbox=function(t){var i=this;setTimeout(function(){var f,r,u;$(t.target).find("input").prop("name")=="showall"?$(t.target).find("input").prop("checked")==!0?$.each(i.$(".filter-checkbox"),function(n,t){$(t).addClass("active");$(t).find("input").prop({checked:"checked"})}):$.each(i.$(".filter-checkbox"),function(n,t){$(t).removeClass("active");$(t).find("input").prop({checked:""})}):$(t.target).find("input").prop("name")!="showall"&&(f=!0,$.each(i.$(".filter-checkbox"),function(n,t){$(t).find("input").prop("name")!="showall"&&$(t).find("input").prop("checked")==!1&&(f=!1)}),f?(i.$(".filter-checkbox").find('input[name="showall"]').parent().addClass("active"),i.$(".filter-checkbox").find('input[name="showall"]').prop({checked:"checked"})):$(t.target).find("input").prop("checked")==!1&&(i.$(".filter-checkbox").find('input[name="showall"]').parent().removeClass("active"),i.$(".filter-checkbox").find('input[name="showall"]').prop({checked:""})));r=new n.Trees;u=new n.Persons;i.$(".filter-checkbox").find('input[name="showall"]').prop("checked")&&(n.View.getInstance().getViewType()==n.MainViewType.TREES?r=n.Model.getInstance().getTrees():(n.View.getInstance().getViewType()==n.MainViewType.PEOPLE||n.View.getInstance().getViewType()==n.MainViewType.TREE)&&(u=n.Model.getInstance().getPersons()));i.$(".filter-checkbox").find('input[name="assigned"]').prop("checked")&&(n.View.getInstance().getViewType()==n.MainViewType.TREES?(r=n.Model.getInstance().getTrees().getAssigned(r),console.log(r)):(n.View.getInstance().getViewType()==n.MainViewType.PEOPLE||n.View.getInstance().getViewType()==n.MainViewType.TREE)&&(u=n.Model.getInstance().getPersons().getAssigned(u)));i.$(".filter-checkbox").find('input[name="unassigned"]').prop("checked")&&(n.View.getInstance().getViewType()==n.MainViewType.TREES?r=n.Model.getInstance().getTrees().getUnassigned(r):(n.View.getInstance().getViewType()==n.MainViewType.PEOPLE||n.View.getInstance().getViewType()==n.MainViewType.TREE)&&(u=n.Model.getInstance().getPersons().getUnassigned(u)));$.each(i.$(".filter-checkbox"),function(t,i){$(i).find("input").prop("name")!="showall"&&$(i).find("input").prop("name")!="assigned"&&$(i).find("input").prop("name")!="unassigned"&&$(i).find("input").prop("checked")&&(r=n.Model.getInstance().getTrees().getFromFoodId(r,parseInt($(i).find("input").prop("name"))))});n.View.getInstance().getViewType()==n.MainViewType.TREES||n.View.getInstance().getViewType()==n.MainViewType.PEOPLE||n.View.getInstance().getViewType()==n.MainViewType.TREE&&i.renderGrid(u)},1)},i}(Backbone.View);n.PopupView=t}(FoodParent||(FoodParent={}));var AdoptTreesCell=Backgrid.Cell.extend({initialize:function(n){this.column=n.column;this.column instanceof Backgrid.Column||(this.column=new Backgrid.Column(this.column));this.listenTo(this.model,"backgrid:editing",this.postRender)},template:_.template(FoodParent.Template.getInstance().getAdoptTreeCellTemplate()),render:function(){var n=new FoodParent.Trees(FoodParent.Model.getInstance().getTrees().filterById(this.model.get("trees"))),t={trees:n};return $(this.el).html(this.template(t)),$(this.el).addClass("renderable"),this.delegateEvents(),this}}),DatePickerCellEditor=Backgrid.InputCellEditor.extend({events:{},initialize:function(){Backgrid.InputCellEditor.prototype.initialize.apply(this,arguments);var n=this;$(this.el).datetimepicker({defaultDate:n.model.get("date"),format:FoodParent.Setting.getInstance().getDateTimeFormat()}).on("dp.hide",function(){if($(this).data("date")!=undefined){var t=new Backgrid.Command({});n.model.set(n.column.get("name"),$(this).data("date"));n.model.trigger("backgrid:edited",n.model,n.column,t)}})}}),TreeDeleteCell=Backgrid.Cell.extend({template:_.template('<button type="button" class="btn btn-default btn-table"><span class="glyphicon glyphicon-remove"><\/span><\/button>'),events:{click:"deleteRow"},deleteRow:function(n){var t=confirm(FoodParent.Localization.getInstance().getDeleteConfirmText());t==!0&&(n.preventDefault(),this.model.collection.remove(this.model),this.model.destroy({wait:!0,success:function(){},error:function(){}}))},render:function(){return $(this.el).html(this.template()),this.delegateEvents(),this}}),TreeDetailCell=Backgrid.Cell.extend({template:_.template('<button type="button" class="btn btn-default btn-table"><span class="glyphicon glyphicon-log-in"><\/span><\/button>'),events:{click:"showDetail"},showDetail:function(){FoodParent.Router.getInstance().navigate("tree/"+this.model.getId(),{trigger:!0})},render:function(){return $(this.el).html(this.template()),this.delegateEvents(),this}}),TreeColumn=[{name:"id",label:"#",editable:!1,cell:"string"},{name:"food",label:"Type of Food",editable:!0},{name:"lat",label:"Latitude",editable:!0,cell:"number"},{name:"lng",label:"Longitude",editable:!0,cell:"number"},{name:"address",label:"Address",editable:!0,cell:"string"},{name:"updated",label:"Updated",editable:!1,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{label:"Detail",sortable:!1,editable:!1,cell:TreeDetailCell},{label:"Delete",sortable:!1,editable:!1,cell:TreeDeleteCell}],PersonDeleteCell=Backgrid.Cell.extend({template:_.template('<button type="button" class="btn btn-default btn-table"><span class="glyphicon glyphicon-remove"><\/span><\/button>'),events:{click:"deleteRow"},deleteRow:function(n){var t=confirm(FoodParent.Localization.getInstance().getDeleteConfirmText());t==!0&&(n.preventDefault(),this.model.collection.remove(this.model),this.model.destroy({wait:!0,success:function(){},error:function(){}}))},render:function(){return $(this.el).html(this.template()),this.delegateEvents(),this}}),PersonDetailCell=Backgrid.Cell.extend({template:_.template('<button type="button" class="btn btn-default btn-table"><span class="glyphicon glyphicon-log-in"><\/span><\/button>'),events:{click:"showDetail"},showDetail:function(){FoodParent.Router.getInstance().navigate("person/"+this.model.getId(),{trigger:!0})},render:function(){return $(this.el).html(this.template()),this.delegateEvents(),this}}),PersonColumn=[{name:"id",label:"#",editable:!1,cell:"string"},{name:"auth",label:"Type",editable:!0},{name:"name",label:"Name",editable:!0,cell:"string"},{name:"address",label:"Address",editable:!0,cell:"string"},{name:"contact",label:"Contact",editable:!0,cell:"string"},{name:"neighborhood",label:"Neighborhood",editable:!0,cell:"string"},{name:"updated",label:"Updated",editable:!1,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{name:"trees",label:"Adoption",sortable:!1,editable:!1,cell:AdoptTreesCell},{label:"Delete",sortable:!1,editable:!1,cell:PersonDeleteCell}],AdoptAddCell=Backgrid.Cell.extend({initialize:function(n){this.column=n.column;this.column instanceof Backgrid.Column||(this.column=new Backgrid.Column(this.column));this.listenTo(this.model,"backgrid:editing",this.postRender)},template:_.template('<i class="pointer fa fa-plus-square fa-1x"><\/i>'),events:{click:"AddAdoption"},render:function(){return $(this.el).html(this.template({})),$(this.el).addClass("renderable"),this.delegateEvents(),this},AddAdoption:function(n){var r;console.log(n);console.log(this.model.get("tempid"));var i=FoodParent.Model.getInstance().getPersons().findWhere({id:this.model.get("tempid")}),t=FoodParent.View.getInstance().getPopupView().getCurrentTree(),u=confirm("Do you want assign tree '"+t.getName()+"' to '"+i.getName()+"'");u==!0&&(n.preventDefault(),r=new FoodParent.Adopt({tree:t.getId(),owner:i.getId()}),FoodParent.Model.getInstance().getAdopts().add(r),FoodParent.Model.getInstance().getPersons().updateTrees(),FoodParent.View.getInstance().getPopupView().renderEditParent(t))}}),AdoptRemoveCell=Backgrid.Cell.extend({template:_.template('<i class="pointer fa fa-minus-square fa-1x"><\/i>'),events:{click:"RemoveAdoption"},AddAdoption:function(){},render:function(){return $(this.el).html(this.template()),this.delegateEvents(),this}}),PersonPopupColumn=[{name:"auth",label:"Type",editable:!1},{name:"name",label:"Name",editable:!1,cell:"string"},{name:"contact",label:"Contact",editable:!1,cell:"string"},{name:"trees",label:"Adoption",sortable:!1,editable:!1,cell:AdoptTreesCell},{label:"Add",sortable:!1,editable:!1,cell:AdoptAddCell},{label:"Remove",sortable:!1,editable:!1,cell:AdoptRemoveCell},{name:"updated",label:"Updated",editable:!1,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})}];
//# sourceMappingURL=foodparent.min.js.map
